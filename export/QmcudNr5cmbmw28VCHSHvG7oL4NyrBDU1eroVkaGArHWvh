/*! decentraland-ecs@6.1.5 */var loader;if(function(t,e){for(var n in e)t[n]=e[n]}(this,function(n){var o={};function r(t){if(o[t])return o[t].exports;var e=o[t]={i:t,l:!1,exports:{}};return n[t].call(e.exports,e,e.exports,r),e.l=!0,e.exports}return r.m=n,r.c=o,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=26)}([function(t,e,n){"use strict";var i=this&&this.__assign||function(){return(i=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)},o=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,s=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,o);else for(var g=t.length-1;0<=g;g--)(r=t[g])&&(s=(i<3?r(s):3<i?r(e,n,s):r(e,n))||s);return 3<i&&s&&Object.defineProperty(e,n,s),s},r=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var o,r,i=n.call(t),s=[];try{for(;(void 0===e||0<e--)&&!(o=i.next()).done;)s.push(o.value)}catch(t){r={error:t}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}return s},s=this&&this.__spread||function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(r(arguments[e]));return t};Object.defineProperty(e,"__esModule",{value:!0});var g=n(1),a=n(8),l=n(16),c="__name__symbol_",I="__classId__symbol_",C="__component__id_",d=o([a.EventConstructor()],B);function B(t,e,n){this.componentId=t,this.componentName=e,this.classId=n}e.DisposableComponentCreated=d;var Q=o([a.EventConstructor()],p);function p(t){this.componentId=t}e.DisposableComponentRemoved=Q;var u=o([a.EventConstructor()],F);function F(t,e){this.componentId=t,this.component=e}function U(r,i){return function(t){if(t.isComponent)throw new TypeError("You cannot extend a component. Trying to extend "+t.originalClassName+" with: "+r);if("number"!=typeof i||isNaN(i))throw new Error("classId: "+i+" is an invalid integer");function e(){if(!U.engine)throw new Error("You need to set a DisposableComponent.engine before creating disposable components");var t=Array.prototype.slice.call(arguments),e=new(o.bind.apply(o,s([void 0],t))),n=g.newId("C");return Object.defineProperty(e,c,{enumerable:!1,writable:!1,configurable:!1,value:r}),Object.defineProperty(e,C,{enumerable:!1,writable:!1,configurable:!1,value:n}),void 0!==i&&Object.defineProperty(e,I,{enumerable:!1,writable:!1,configurable:!1,value:i}),U.engine&&U.engine.registerComponent(e),e}var o=t;return void 0!==i&&(e[I]=i),e[c]=r,e.isComponent=!0,e.isDisposableComponent=!0,e.originalClassName=r,(e.prototype=t.prototype).constructor=t,e}}function y(t){if(!t)throw new TypeError(t+" is not a component.");if(t[C])return t[C];throw new TypeError(t+" is not a registered disposable component.")}e.DisposableComponentUpdated=u,e.Component=function(o,r){return function(t){if(t.isComponent)throw new TypeError("You cannot extend a component. Trying to extend "+t.originalClassName+" with: "+o);function e(){var t=Array.prototype.slice.call(arguments),e=new(n.bind.apply(n,s([void 0],t)));return Object.defineProperty(e,c,{enumerable:!1,writable:!1,configurable:!1,value:o}),void 0!==r&&Object.defineProperty(e,I,{enumerable:!1,writable:!1,configurable:!1,value:r}),e}var n=t;return void 0!==r&&(e[I]=r),e[c]=o,e.isComponent=!0,e.originalClassName=o,(e.prototype=t.prototype).constructor=t,e}},e.DisposableComponent=U,(U=e.DisposableComponent||(e.DisposableComponent={})).engine=null,e.getComponentName=function(t){if(!t)throw new TypeError(t+" is not a component.");if(t[c])return t[c];throw new TypeError(t+" is not a registered component.")},e.getComponentClassId=function(t){if(!t)throw new TypeError(t+" is not a component.");if(t[I])return t[I];if(!t[c])throw new TypeError(t+" is not a registered component.");return null},e.getComponentId=y;var h=(b.component=function(t,o){if(delete t[o]){var r=o+"_"+Math.random();t[r]=void 0,Object.defineProperty(t,r,i({},Object.getOwnPropertyDescriptor(t,r),{enumerable:!1})),Object.defineProperty(t,o.toString(),{get:function(){return this[r]},set:function(t){var e=this[r];if(this.data[o]=t?y(t):null,(this[r]=t)!==e){this.dirty=!0;for(var n=0;n<this.subscriptions.length;n++)this.subscriptions[n](o,t,e)}},enumerable:!0})}},b.field=function(t,o){delete t[o]&&Object.defineProperty(t,o.toString(),{get:function(){return this.data[o]},set:function(t){var e=this.data[o];if((this.data[o]=t)!==e){this.dirty=!0;for(var n=0;n<this.subscriptions.length;n++)this.subscriptions[n](o,t,e)}},enumerable:!0})},b.uiValue=function(t,r){delete t[r]&&Object.defineProperty(t,r.toString(),{get:function(){return this.data[r].toString()},set:function(t){var e=this.data[r],n=new l.UIValue(t);if((this.data[r]=n)!==e){this.dirty=!0;for(var o=0;o<this.subscriptions.length;o++)this.subscriptions[o](r,n,e)}},enumerable:!0})},b.readonly=function(t,e){delete t[e]&&Object.defineProperty(t,e.toString(),{get:function(){if(e in this.data==0)throw new Error("The field "+e+" is uninitialized");return this.data[e]},set:function(t){if(e in this.data)throw new Error("The field "+e+" is readonly");this.data[e]=t,this.dirty=!0},enumerable:!0,configurable:!1})},b.prototype.onChange=function(t){return this.subscriptions.push(t),this},b.prototype.toJSON=function(){return this.data},b);function b(){this.dirty=!1,this.data={},this.subscriptions=[]}e.ObservableComponent=h,e.isDisposableComponent=function(t){return C in t}},function(t,e,n){"use strict";var o=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var o,r,i=n.call(t),s=[];try{for(;(void 0===e||0<e--)&&!(o=i.next()).done;)s.push(o.value)}catch(t){r={error:t}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}return s},r=this&&this.__spread||function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(o(arguments[e]));return t};Object.defineProperty(e,"__esModule",{value:!0});var i=0;e.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];"undefined"!=typeof dcl?dcl.log.apply(dcl,r(t)):console.log.apply(console,r(["DEBUG:"],t))},e.error=function(t,e){"undefined"!=typeof dcl?dcl.error(t,e):console.error("ERROR:",t,e)},e.newId=function(t){if(i++,0===t.length)throw new Error("newId(type: string): type cannot be empty");return t+i.toString(36)},e.uuid=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var e=16*Math.random()|0;return("x"===t?e:3&e|8).toString(16)})},e.buildArray=function(t,e){for(var n=[],o=0;o<t;++o)n.push(e());return n}},function(t,e,n){"use strict";var o,r;Object.defineProperty(e,"__esModule",{value:!0}),(r=e.Orientation||(e.Orientation={}))[r.CW=0]="CW",r[r.CCW=1]="CCW",(o=e.Space||(e.Space={}))[o.LOCAL=0]="LOCAL",o[o.WORLD=1]="WORLD",o[o.BONE=2]="BONE",e.ToGammaSpace=1/2.2,e.ToLinearSpace=2.2,e.Epsilon=1e-6,e.DEG2RAD=Math.PI/180,e.RAD2DEG=360/(2*Math.PI)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var g=n(9),o=n(2),i=n(10),r=n(4),s=(Object.defineProperty(I.prototype,"isNonUniform",{get:function(){var t=Math.abs(this.x),e=Math.abs(this.y);if(t!==e)return!0;var n=Math.abs(this.z);return t!==n||e!==n},enumerable:!0,configurable:!0}),I.Add=function(t,e){return new I(t.x,t.y,t.z).addInPlace(e)},I.GetClipFactor=function(t,e,n,o){var r=I.Dot(t,n)-o;return r/(r-(I.Dot(e,n)-o))},I.GetAngleBetweenVectors=function(t,e,n){var o=t.normalizeToRef(g.MathTmp.Vector3[1]),r=e.normalizeToRef(g.MathTmp.Vector3[2]),i=I.Dot(o,r),s=g.MathTmp.Vector3[3];return I.CrossToRef(o,r,s),0<I.Dot(s,n)?Math.acos(i):-Math.acos(i)},I.FromArray=function(t,e){return void 0===e&&(e=0),new I(t[e],t[e+1],t[e+2])},I.FromFloatArray=function(t,e){return I.FromArray(t,e)},I.FromArrayToRef=function(t,e,n){n.x=t[e],n.y=t[e+1],n.z=t[e+2]},I.FromFloatArrayToRef=function(t,e,n){return I.FromArrayToRef(t,e,n)},I.FromFloatsToRef=function(t,e,n,o){o.copyFromFloats(t,e,n)},I.Zero=function(){return new I(0,0,0)},I.One=function(){return new I(1,1,1)},I.Up=function(){return new I(0,1,0)},I.Down=function(){return new I(0,-1,0)},I.Forward=function(){return new I(0,0,1)},I.Backward=function(){return new I(0,0,-1)},I.Right=function(){return new I(1,0,0)},I.Left=function(){return new I(-1,0,0)},I.TransformCoordinates=function(t,e){var n=I.Zero();return I.TransformCoordinatesToRef(t,e,n),n},I.TransformCoordinatesToRef=function(t,e,n){return I.TransformCoordinatesFromFloatsToRef(t.x,t.y,t.z,e,n)},I.TransformCoordinatesFromFloatsToRef=function(t,e,n,o,r){var i=o.m,s=t*i[0]+e*i[4]+n*i[8]+i[12],g=t*i[1]+e*i[5]+n*i[9]+i[13],a=t*i[2]+e*i[6]+n*i[10]+i[14],l=1/(t*i[3]+e*i[7]+n*i[11]+i[15]);r.x=s*l,r.y=g*l,r.z=a*l},I.TransformNormal=function(t,e){var n=I.Zero();return I.TransformNormalToRef(t,e,n),n},I.TransformNormalToRef=function(t,e,n){this.TransformNormalFromFloatsToRef(t.x,t.y,t.z,e,n)},I.TransformNormalFromFloatsToRef=function(t,e,n,o,r){var i=o.m;r.x=t*i[0]+e*i[4]+n*i[8],r.y=t*i[1]+e*i[5]+n*i[9],r.z=t*i[2]+e*i[6]+n*i[10]},I.CatmullRom=function(t,e,n,o,r){var i=r*r,s=r*i;return new I(.5*(2*e.x+(-t.x+n.x)*r+(2*t.x-5*e.x+4*n.x-o.x)*i+(-t.x+3*e.x-3*n.x+o.x)*s),.5*(2*e.y+(-t.y+n.y)*r+(2*t.y-5*e.y+4*n.y-o.y)*i+(-t.y+3*e.y-3*n.y+o.y)*s),.5*(2*e.z+(-t.z+n.z)*r+(2*t.z-5*e.z+4*n.z-o.z)*i+(-t.z+3*e.z-3*n.z+o.z)*s))},I.Clamp=function(t,e,n){var o=new I;return I.ClampToRef(t,e,n,o),o},I.ClampToRef=function(t,e,n,o){var r=t.x;r=(r=r>n.x?n.x:r)<e.x?e.x:r;var i=t.y;i=(i=i>n.y?n.y:i)<e.y?e.y:i;var s=t.z;s=(s=s>n.z?n.z:s)<e.z?e.z:s,o.copyFromFloats(r,i,s)},I.Hermite=function(t,e,n,o,r){var i=r*r,s=r*i,g=2*s-3*i+1,a=-2*s+3*i,l=s-2*i+r,c=s-i;return new I(t.x*g+n.x*a+e.x*l+o.x*c,t.y*g+n.y*a+e.y*l+o.y*c,t.z*g+n.z*a+e.z*l+o.z*c)},I.Lerp=function(t,e,n){var o=new I(0,0,0);return I.LerpToRef(t,e,n,o),o},I.LerpToRef=function(t,e,n,o){o.x=t.x+(e.x-t.x)*n,o.y=t.y+(e.y-t.y)*n,o.z=t.z+(e.z-t.z)*n},I.Dot=function(t,e){return t.x*e.x+t.y*e.y+t.z*e.z},I.Cross=function(t,e){var n=I.Zero();return I.CrossToRef(t,e,n),n},I.CrossToRef=function(t,e,n){var o=t.y*e.z-t.z*e.y,r=t.z*e.x-t.x*e.z,i=t.x*e.y-t.y*e.x;n.copyFromFloats(o,r,i)},I.Normalize=function(t){var e=I.Zero();return I.NormalizeToRef(t,e),e},I.NormalizeToRef=function(t,e){t.normalizeToRef(e)},I.Minimize=function(t,e){var n=new I(t.x,t.y,t.z);return n.minimizeInPlace(e),n},I.Maximize=function(t,e){var n=new I(t.x,t.y,t.z);return n.maximizeInPlace(e),n},I.Distance=function(t,e){return Math.sqrt(I.DistanceSquared(t,e))},I.DistanceSquared=function(t,e){var n=t.x-e.x,o=t.y-e.y,r=t.z-e.z;return n*n+o*o+r*r},I.Center=function(t,e){var n=I.Add(t,e);return n.scaleInPlace(.5),n},I.RotationFromAxis=function(t,e,n){var o=I.Zero();return I.RotationFromAxisToRef(t,e,n,o),o},I.RotationFromAxisToRef=function(t,e,n,o){var r=g.MathTmp.Quaternion[0];i.Quaternion.RotationQuaternionFromAxisToRef(t,e,n,r),o.copyFrom(r.eulerAngles)},I.prototype.toString=function(){return"("+this.x+", "+this.y+", "+this.z+")"},I.prototype.getClassName=function(){return"Vector3"},I.prototype.getHashCode=function(){var t=this.x||0;return 397*(t=397*t^(this.y||0))^(this.z||0)},I.prototype.asArray=function(){var t=[];return this.toArray(t,0),t},I.prototype.toArray=function(t,e){return void 0===e&&(e=0),t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,this},I.prototype.toQuaternion=function(){return i.Quaternion.Identity.setEuler(this.y,this.x,this.z)},I.prototype.addInPlace=function(t){return this.addInPlaceFromFloats(t.x,t.y,t.z)},I.prototype.addInPlaceFromFloats=function(t,e,n){return this.x+=t,this.y+=e,this.z+=n,this},I.prototype.add=function(t){return new I(this.x+t.x,this.y+t.y,this.z+t.z)},I.prototype.addToRef=function(t,e){return e.copyFromFloats(this.x+t.x,this.y+t.y,this.z+t.z)},I.prototype.subtractInPlace=function(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this},I.prototype.subtract=function(t){return new I(this.x-t.x,this.y-t.y,this.z-t.z)},I.prototype.subtractToRef=function(t,e){return this.subtractFromFloatsToRef(t.x,t.y,t.z,e)},I.prototype.subtractFromFloats=function(t,e,n){return new I(this.x-t,this.y-e,this.z-n)},I.prototype.subtractFromFloatsToRef=function(t,e,n,o){return o.copyFromFloats(this.x-t,this.y-e,this.z-n)},I.prototype.applyMatrix4=function(t){this.applyMatrix4ToRef(t,this)},I.prototype.applyMatrix4ToRef=function(t,e){var n=this.x,o=this.y,r=this.z,i=t.m,s=1/(i[3]*n+i[7]*o+i[11]*r+i[15]);return e.x=(i[0]*n+i[4]*o+i[8]*r+i[12])*s,e.y=(i[1]*n+i[5]*o+i[9]*r+i[13])*s,e.z=(i[2]*n+i[6]*o+i[10]*r+i[14])*s,e},I.prototype.rotate=function(t){return this.rotateToRef(t,this)},I.prototype.rotateToRef=function(t,e){var n=this.x,o=this.y,r=this.z,i=t.x,s=t.y,g=t.z,a=t.w,l=a*n+s*r-g*o,c=a*o+g*n-i*r,I=a*r+i*o-s*n,C=-i*n-s*o-g*r;return e.x=l*a+C*-i+c*-g-I*-s,e.y=c*a+C*-s+I*-i-l*-g,e.z=I*a+C*-g+l*-s-c*-i,e},I.prototype.negate=function(){return new I(-this.x,-this.y,-this.z)},I.prototype.scaleInPlace=function(t){return this.x*=t,this.y*=t,this.z*=t,this},I.prototype.scale=function(t){return new I(this.x*t,this.y*t,this.z*t)},I.prototype.scaleToRef=function(t,e){return e.copyFromFloats(this.x*t,this.y*t,this.z*t)},I.prototype.scaleAndAddToRef=function(t,e){return e.addInPlaceFromFloats(this.x*t,this.y*t,this.z*t)},I.prototype.equals=function(t){return t&&this.x===t.x&&this.y===t.y&&this.z===t.z},I.prototype.equalsWithEpsilon=function(t,e){return void 0===e&&(e=o.Epsilon),t&&r.Scalar.WithinEpsilon(this.x,t.x,e)&&r.Scalar.WithinEpsilon(this.y,t.y,e)&&r.Scalar.WithinEpsilon(this.z,t.z,e)},I.prototype.equalsToFloats=function(t,e,n){return this.x===t&&this.y===e&&this.z===n},I.prototype.multiplyInPlace=function(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this},I.prototype.multiply=function(t){return this.multiplyByFloats(t.x,t.y,t.z)},I.prototype.multiplyToRef=function(t,e){return e.copyFromFloats(this.x*t.x,this.y*t.y,this.z*t.z)},I.prototype.multiplyByFloats=function(t,e,n){return new I(this.x*t,this.y*e,this.z*n)},I.prototype.divide=function(t){return new I(this.x/t.x,this.y/t.y,this.z/t.z)},I.prototype.divideToRef=function(t,e){return e.copyFromFloats(this.x/t.x,this.y/t.y,this.z/t.z)},I.prototype.divideInPlace=function(t){return this.divideToRef(t,this)},I.prototype.minimizeInPlace=function(t){return this.minimizeInPlaceFromFloats(t.x,t.y,t.z)},I.prototype.maximizeInPlace=function(t){return this.maximizeInPlaceFromFloats(t.x,t.y,t.z)},I.prototype.minimizeInPlaceFromFloats=function(t,e,n){return t<this.x&&(this.x=t),e<this.y&&(this.y=e),n<this.z&&(this.z=n),this},I.prototype.maximizeInPlaceFromFloats=function(t,e,n){return t>this.x&&(this.x=t),e>this.y&&(this.y=e),n>this.z&&(this.z=n),this},I.prototype.floor=function(){return new I(Math.floor(this.x),Math.floor(this.y),Math.floor(this.z))},I.prototype.fract=function(){return new I(this.x-Math.floor(this.x),this.y-Math.floor(this.y),this.z-Math.floor(this.z))},I.prototype.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},I.prototype.lengthSquared=function(){return this.x*this.x+this.y*this.y+this.z*this.z},I.prototype.normalize=function(){return this.normalizeFromLength(this.length())},I.prototype.normalizeFromLength=function(t){return 0===t||1===t?this:this.scaleInPlace(1/t)},I.prototype.normalizeToNew=function(){var t=new I(0,0,0);return this.normalizeToRef(t),t},I.prototype.normalizeToRef=function(t){var e=this.length();return 0===e||1===e?t.copyFromFloats(this.x,this.y,this.z):this.scaleToRef(1/e,t)},I.prototype.clone=function(){return new I(this.x,this.y,this.z)},I.prototype.copyFrom=function(t){return this.copyFromFloats(t.x,t.y,t.z)},I.prototype.copyFromFloats=function(t,e,n){return this.x=t,this.y=e,this.z=n,this},I.prototype.set=function(t,e,n){return this.copyFromFloats(t,e,n)},I.prototype.setAll=function(t){return this.x=this.y=this.z=t,this},I);function I(t,e,n){void 0===t&&(t=0),void 0===e&&(e=0),void 0===n&&(n=0),this.x=t,this.y=e,this.z=n}e.Vector3=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=(r.WithinEpsilon=function(t,e,n){void 0===n&&(n=1401298e-51);var o=t-e;return-n<=o&&o<=n},r.ToHex=function(t){var e=t.toString(16);return t<=15?("0"+e).toUpperCase():e.toUpperCase()},r.Sign=function(t){var e=+t;return 0==e||isNaN(e)?e:0<e?1:-1},r.Clamp=function(t,e,n){return void 0===e&&(e=0),void 0===n&&(n=1),Math.min(n,Math.max(e,t))},r.Log2=function(t){return Math.log(t)*Math.LOG2E},r.Repeat=function(t,e){return t-Math.floor(t/e)*e},r.Normalize=function(t,e,n){return(t-e)/(n-e)},r.Denormalize=function(t,e,n){return t*(n-e)+e},r.DeltaAngle=function(t,e){var n=r.Repeat(e-t,360);return 180<n&&(n-=360),n},r.PingPong=function(t,e){var n=r.Repeat(t,2*e);return e-Math.abs(n-e)},r.SmoothStep=function(t,e,n){var o=r.Clamp(n);return e*(o=-2*o*o*o+3*o*o)+t*(1-o)},r.MoveTowards=function(t,e,n){return Math.abs(e-t)<=n?e:t+r.Sign(e-t)*n},r.MoveTowardsAngle=function(t,e,n){var o=r.DeltaAngle(t,e);return-n<o&&o<n?e:r.MoveTowards(t,t+o,n)},r.Lerp=function(t,e,n){return t+(e-t)*n},r.LerpAngle=function(t,e,n){var o=r.Repeat(e-t,360);return 180<o&&(o-=360),t+o*r.Clamp(n)},r.InverseLerp=function(t,e,n){return t!==e?r.Clamp((n-t)/(e-t)):0},r.Hermite=function(t,e,n,o,r){var i=r*r,s=r*i;return t*(2*s-3*i+1)+n*(-2*s+3*i)+e*(s-2*i+r)+o*(s-i)},r.RandomRange=function(t,e){return t===e?t:Math.random()*(e-t)+t},r.RangeToPercent=function(t,e,n){return(t-e)/(n-e)},r.PercentToRange=function(t,e,n){return(n-e)*t+e},r.NormalizeRadians=function(t){return t-r.TwoPi*Math.floor((t+Math.PI)/r.TwoPi)},r.TwoPi=2*Math.PI,r);function r(){}e.Scalar=o},function(t,e,n){"use strict";var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__assign||function(){return(i=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)},s=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,s=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,o);else for(var g=t.length-1;0<=g;g--)(r=t[g])&&(s=(i<3?r(s):3<i?r(e,n,s):r(e,n))||s);return 3<i&&s&&Object.defineProperty(e,n,s),s};Object.defineProperty(e,"__esModule",{value:!0});var g,a,l=n(0),c=n(6),I=n(25),C=n(1);(a=g=e.CLASS_ID||(e.CLASS_ID={}))[a.TRANSFORM=1]="TRANSFORM",a[a.UUID_CALLBACK=8]="UUID_CALLBACK",a[a.BOX_SHAPE=16]="BOX_SHAPE",a[a.SPHERE_SHAPE=17]="SPHERE_SHAPE",a[a.PLANE_SHAPE=18]="PLANE_SHAPE",a[a.CONE_SHAPE=19]="CONE_SHAPE",a[a.CYLINDER_SHAPE=20]="CYLINDER_SHAPE",a[a.TEXT_SHAPE=21]="TEXT_SHAPE",a[a.NFT_SHAPE=22]="NFT_SHAPE",a[a.UI_WORLD_SPACE_SHAPE=23]="UI_WORLD_SPACE_SHAPE",a[a.UI_SCREEN_SPACE_SHAPE=24]="UI_SCREEN_SPACE_SHAPE",a[a.UI_CONTAINER_RECT=25]="UI_CONTAINER_RECT",a[a.UI_CONTAINER_STACK=26]="UI_CONTAINER_STACK",a[a.UI_TEXT_SHAPE=27]="UI_TEXT_SHAPE",a[a.UI_INPUT_TEXT_SHAPE=28]="UI_INPUT_TEXT_SHAPE",a[a.UI_IMAGE_SHAPE=29]="UI_IMAGE_SHAPE",a[a.UI_SLIDER_SHAPE=30]="UI_SLIDER_SHAPE",a[a.CIRCLE_SHAPE=31]="CIRCLE_SHAPE",a[a.BILLBOARD=32]="BILLBOARD",a[a.ANIMATION=33]="ANIMATION",a[a.UI_FULLSCREEN_SHAPE=40]="UI_FULLSCREEN_SHAPE",a[a.UI_BUTTON_SHAPE=41]="UI_BUTTON_SHAPE",a[a.GLTF_SHAPE=54]="GLTF_SHAPE",a[a.OBJ_SHAPE=55]="OBJ_SHAPE",a[a.BASIC_MATERIAL=64]="BASIC_MATERIAL",a[a.PRB_MATERIAL=65]="PRB_MATERIAL",a[a.HIGHLIGHT_ENTITY=66]="HIGHLIGHT_ENTITY",a[a.SOUND=67]="SOUND",a[a.TEXTURE=68]="TEXTURE",a[a.AUDIO_CLIP=200]="AUDIO_CLIP",a[a.AUDIO_SOURCE=201]="AUDIO_SOURCE",a[a.GIZMOS=203]="GIZMOS";var d,B=(d=l.ObservableComponent,r(Q,d),Object.defineProperty(Q.prototype,"eulerAngles",{get:function(){return this.rotation.eulerAngles},enumerable:!0,configurable:!0}),Q.prototype.lookAt=function(t,e){void 0===e&&(e=c.MathTmp.staticUp);var n=new c.Matrix;return c.Matrix.LookAtLHToRef(this.position,t,e,n),n.invert(),c.Quaternion.FromRotationMatrixToRef(n,this.rotation),this},Q.prototype.rotate=function(t,e){return this.rotation.multiplyInPlace(this.rotation.angleAxis(e,t)),this},Q.prototype.translate=function(t){return this.position.addInPlace(t),this},s([l.ObservableComponent.field],Q.prototype,"position",void 0),s([l.ObservableComponent.field],Q.prototype,"rotation",void 0),s([l.ObservableComponent.field],Q.prototype,"scale",void 0),s([l.Component("engine.transform",g.TRANSFORM)],Q));function Q(t){void 0===t&&(t={});var e=d.call(this)||this;return e.position=t.position||c.Vector3.Zero(),e.rotation=t.rotation||c.Quaternion.Identity,e.scale=t.scale||new c.Vector3(1,1,1),e}e.Transform=B;var p,u=(p=l.ObservableComponent,r(F,p),s([l.ObservableComponent.field],F.prototype,"x",void 0),s([l.ObservableComponent.field],F.prototype,"y",void 0),s([l.ObservableComponent.field],F.prototype,"z",void 0),s([l.Component("engine.billboard",g.BILLBOARD)],F));function F(t,e,n){void 0===t&&(t=!0),void 0===e&&(e=!0),void 0===n&&(n=!0);var o=p.call(this)||this;return o.x=!0,o.y=!0,o.z=!0,o.x=t,o.y=e,o.z=n,o}e.Billboard=u;var U,y=(U=l.ObservableComponent,r(h,U),s([l.ObservableComponent.field],h.prototype,"withCollisions",void 0),s([l.ObservableComponent.field],h.prototype,"visible",void 0),h);function h(){var t=null!==U&&U.apply(this,arguments)||this;return t.withCollisions=!1,t.visible=!0,t}e.Shape=y;var b,A=(r(m,b=y),s([l.DisposableComponent("engine.shape",g.BOX_SHAPE)],m));function m(){return null!==b&&b.apply(this,arguments)||this}e.BoxShape=A;var G,x=(r(v,G=y),s([l.DisposableComponent("engine.shape",g.SPHERE_SHAPE)],v));function v(){return null!==G&&G.apply(this,arguments)||this}e.SphereShape=x;var R,Z=(r(f,R=y),s([l.ObservableComponent.field],f.prototype,"segments",void 0),s([l.ObservableComponent.field],f.prototype,"arc",void 0),s([l.DisposableComponent("engine.shape",g.CIRCLE_SHAPE)],f));function f(){return null!==R&&R.apply(this,arguments)||this}e.CircleShape=Z;var L,S=(r(V,L=y),s([l.ObservableComponent.field],V.prototype,"width",void 0),s([l.ObservableComponent.field],V.prototype,"height",void 0),s([l.ObservableComponent.field],V.prototype,"uvs",void 0),s([l.DisposableComponent("engine.shape",g.PLANE_SHAPE)],V));function V(){var t=null!==L&&L.apply(this,arguments)||this;return t.width=1,t.height=1,t}e.PlaneShape=S;var E,X=(r(N,E=y),s([l.ObservableComponent.field],N.prototype,"radiusTop",void 0),s([l.ObservableComponent.field],N.prototype,"radiusBottom",void 0),s([l.ObservableComponent.field],N.prototype,"segmentsHeight",void 0),s([l.ObservableComponent.field],N.prototype,"segmentsRadial",void 0),s([l.ObservableComponent.field],N.prototype,"openEnded",void 0),s([l.ObservableComponent.field],N.prototype,"radius",void 0),s([l.ObservableComponent.field],N.prototype,"arc",void 0),s([l.DisposableComponent("engine.shape",g.CONE_SHAPE)],N));function N(){var t=null!==E&&E.apply(this,arguments)||this;return t.radiusTop=0,t.radiusBottom=1,t.segmentsHeight=1,t.segmentsRadial=36,t.openEnded=!1,t.radius=null,t.arc=360,t}e.ConeShape=X;var W,D=(r(M,W=y),s([l.ObservableComponent.field],M.prototype,"radiusTop",void 0),s([l.ObservableComponent.field],M.prototype,"radiusBottom",void 0),s([l.ObservableComponent.field],M.prototype,"segmentsHeight",void 0),s([l.ObservableComponent.field],M.prototype,"segmentsRadial",void 0),s([l.ObservableComponent.field],M.prototype,"openEnded",void 0),s([l.ObservableComponent.field],M.prototype,"radius",void 0),s([l.ObservableComponent.field],M.prototype,"arc",void 0),s([l.DisposableComponent("engine.shape",g.CYLINDER_SHAPE)],M));function M(){var t=null!==W&&W.apply(this,arguments)||this;return t.radiusTop=0,t.radiusBottom=1,t.segmentsHeight=1,t.segmentsRadial=36,t.openEnded=!1,t.radius=null,t.arc=360,t}e.CylinderShape=D;var w,H=(r(z,w=y),s([y.readonly],z.prototype,"src",void 0),s([l.DisposableComponent("engine.shape",g.GLTF_SHAPE)],z));function z(t){var e=w.call(this)||this;return e.src=t,e}e.GLTFShape=H;var Y,T=(r(J,Y=y),s([y.readonly],J.prototype,"src",void 0),s([l.DisposableComponent("engine.shape",g.NFT_SHAPE)],J));function J(t){var e=Y.call(this)||this;return e.src=t,e}e.NFTShape=T;var O,k=(O=l.ObservableComponent,r(_,O),s([l.ObservableComponent.readonly],_.prototype,"src",void 0),s([l.ObservableComponent.readonly],_.prototype,"samplingMode",void 0),s([l.ObservableComponent.readonly],_.prototype,"wrap",void 0),s([l.ObservableComponent.readonly],_.prototype,"hasAlpha",void 0),s([l.DisposableComponent("engine.texture",g.TEXTURE)],_));function _(t,e){var n=O.call(this)||this;if(n.src=t,e)for(var o in e)n[o]=e[o];return n}e.Texture=k;var j,P=(r(K,j=y),K.prototype.addClip=function(t){var e=this;return this.states.push(t),t.onChange(function(){e.dirty=!0}),this},K.prototype.getClip=function(t){for(var e=0;e<this.states.length;e++){var n=this.states[e];if(n.clip===t)return n}var o=new I.AnimationState(t);return this.addClip(o),o},s([l.ObservableComponent.readonly],K.prototype,"states",void 0),s([l.Component("engine.animator",g.ANIMATION)],K));function K(){var t=null!==j&&j.apply(this,arguments)||this;return t.states=[],t}e.Animator=P;var q,$=(r(tt,q=y),s([l.ObservableComponent.readonly],tt.prototype,"src",void 0),s([l.DisposableComponent("engine.shape",g.OBJ_SHAPE)],tt));function tt(t){var e=q.call(this)||this;return e.src=t,e}e.OBJShape=$;var et,nt=(r(ot,et=y),s([l.ObservableComponent.field],ot.prototype,"outlineWidth",void 0),s([l.ObservableComponent.field],ot.prototype,"outlineColor",void 0),s([l.ObservableComponent.field],ot.prototype,"color",void 0),s([l.ObservableComponent.field],ot.prototype,"fontSize",void 0),s([l.ObservableComponent.field],ot.prototype,"fontWeight",void 0),s([l.ObservableComponent.field],ot.prototype,"opacity",void 0),s([l.ObservableComponent.field],ot.prototype,"value",void 0),s([l.ObservableComponent.field],ot.prototype,"lineSpacing",void 0),s([l.ObservableComponent.field],ot.prototype,"lineCount",void 0),s([l.ObservableComponent.field],ot.prototype,"resizeToFit",void 0),s([l.ObservableComponent.field],ot.prototype,"textWrapping",void 0),s([l.ObservableComponent.field],ot.prototype,"shadowBlur",void 0),s([l.ObservableComponent.field],ot.prototype,"shadowOffsetX",void 0),s([l.ObservableComponent.field],ot.prototype,"shadowOffsetY",void 0),s([l.ObservableComponent.field],ot.prototype,"shadowColor",void 0),s([l.ObservableComponent.field],ot.prototype,"zIndex",void 0),s([l.ObservableComponent.field],ot.prototype,"hTextAlign",void 0),s([l.ObservableComponent.field],ot.prototype,"vTextAlign",void 0),s([l.ObservableComponent.field],ot.prototype,"width",void 0),s([l.ObservableComponent.field],ot.prototype,"height",void 0),s([l.ObservableComponent.field],ot.prototype,"paddingTop",void 0),s([l.ObservableComponent.field],ot.prototype,"paddingRight",void 0),s([l.ObservableComponent.field],ot.prototype,"paddingBottom",void 0),s([l.ObservableComponent.field],ot.prototype,"paddingLeft",void 0),s([l.ObservableComponent.field],ot.prototype,"isPickable",void 0),s([l.ObservableComponent.field],ot.prototype,"billboard",void 0),s([l.Component("engine.text",g.TEXT_SHAPE)],ot));function ot(t){var e=et.call(this)||this;return e.outlineWidth=0,e.outlineColor=new c.Color3(1,1,1),e.color=new c.Color3(1,1,1),e.fontSize=10,e.fontWeight="normal",e.opacity=1,e.value="",e.lineSpacing="0px",e.lineCount=0,e.resizeToFit=!1,e.textWrapping=!1,e.shadowBlur=0,e.shadowOffsetX=0,e.shadowOffsetY=0,e.shadowColor=new c.Color3(1,1,1),e.zIndex=0,e.hTextAlign="center",e.vTextAlign="center",e.width=1,e.height=1,e.paddingTop=0,e.paddingRight=0,e.paddingBottom=0,e.paddingLeft=0,e.isPickable=!1,e.billboard=!1,t&&(e.value=t),e}e.TextShape=nt;var rt,it=(rt=l.ObservableComponent,r(st,rt),s([l.ObservableComponent.field],st.prototype,"alpha",void 0),s([l.ObservableComponent.field],st.prototype,"albedoColor",void 0),s([l.ObservableComponent.field],st.prototype,"emissiveColor",void 0),s([l.ObservableComponent.field],st.prototype,"metallic",void 0),s([l.ObservableComponent.field],st.prototype,"roughness",void 0),s([l.ObservableComponent.field],st.prototype,"ambientColor",void 0),s([l.ObservableComponent.field],st.prototype,"reflectionColor",void 0),s([l.ObservableComponent.field],st.prototype,"reflectivityColor",void 0),s([l.ObservableComponent.field],st.prototype,"directIntensity",void 0),s([l.ObservableComponent.field],st.prototype,"microSurface",void 0),s([l.ObservableComponent.field],st.prototype,"emissiveIntensity",void 0),s([l.ObservableComponent.field],st.prototype,"environmentIntensity",void 0),s([l.ObservableComponent.field],st.prototype,"specularIntensity",void 0),s([l.ObservableComponent.component],st.prototype,"albedoTexture",void 0),s([l.ObservableComponent.component],st.prototype,"alphaTexture",void 0),s([l.ObservableComponent.component],st.prototype,"emissiveTexture",void 0),s([l.ObservableComponent.component],st.prototype,"bumpTexture",void 0),s([l.ObservableComponent.component],st.prototype,"refractionTexture",void 0),s([l.ObservableComponent.field],st.prototype,"disableLighting",void 0),s([l.ObservableComponent.field],st.prototype,"transparencyMode",void 0),s([l.ObservableComponent.field],st.prototype,"hasAlpha",void 0),s([l.DisposableComponent("engine.material",g.PRB_MATERIAL)],st));function st(){var t=null!==rt&&rt.apply(this,arguments)||this;return t.transparencyMode=4,t}e.Material=it;var gt,at=(gt=l.ObservableComponent,r(lt,gt),s([l.ObservableComponent.component],lt.prototype,"texture",void 0),s([l.ObservableComponent.field],lt.prototype,"alphaTest",void 0),s([l.DisposableComponent("engine.material",g.BASIC_MATERIAL)],lt));function lt(){var t=null!==gt&&gt.apply(this,arguments)||this;return t.alphaTest=.5,t}e.BasicMaterial=at;var ct,It=(ct=l.ObservableComponent,r(Ct,ct),Ct.uuidEvent=function(t,o){if(delete t[o]){var r=o+"_"+Math.random();t[r]=void 0,Object.defineProperty(t,r,i({},Object.getOwnPropertyDescriptor(t,r),{enumerable:!1})),Object.defineProperty(t,o.toString(),{get:function(){return this[r]},set:function(t){var e=this[r];if(t){if(!(t instanceof Ct))throw new Error("value is not an OnUUIDEvent");this.data[o]=t.uuid}else this.data[o]=null;if((this[r]=t)!==e){this.dirty=!0;for(var n=0;n<this.subscriptions.length;n++)this.subscriptions[n](o,t,e)}},enumerable:!0})}},Ct.prototype.toJSON=function(){return{uuid:this.uuid,type:this.type}},s([l.ObservableComponent.field],Ct.prototype,"callback",void 0),Ct);function Ct(t){var e=ct.call(this)||this;if(e.uuid=C.newId("UUID"),!(t&&"apply"in t&&"call"in t))throw new Error("Callback is not a function");return e.callback=t,e}e.OnUUIDEvent=It;var dt,Bt=(r(Qt,dt=It),s([l.ObservableComponent.readonly],Qt.prototype,"type",void 0),s([l.Component("engine.onPointerLock",g.UUID_CALLBACK)],Qt));function Qt(){var t=null!==dt&&dt.apply(this,arguments)||this;return t.type="onPointerLock",t}e.OnPointerLock=Bt;var pt,ut=(r(Ft,pt=It),s([l.ObservableComponent.readonly],Ft.prototype,"type",void 0),s([l.Component("engine.onAnimationEnd",g.UUID_CALLBACK)],Ft));function Ft(){var t=null!==pt&&pt.apply(this,arguments)||this;return t.type="onAnimationEnd",t}e.OnAnimationEnd=ut},function(t,n,e){"use strict";function o(t){for(var e in t)n.hasOwnProperty(e)||(n[e]=t[e])}Object.defineProperty(n,"__esModule",{value:!0}),o(e(2)),o(e(9)),o(e(21)),o(e(22)),o(e(29)),o(e(30)),o(e(31)),o(e(23)),o(e(32)),o(e(33)),o(e(11)),o(e(34)),o(e(35)),o(e(24)),o(e(10)),o(e(4)),o(e(36)),o(e(14)),o(e(3)),o(e(20)),o(e(6))},function(t,e,n){"use strict";var o=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,s=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,o);else for(var g=t.length-1;0<=g;g--)(r=t[g])&&(s=(i<3?r(s):3<i?r(e,n,s):r(e,n))||s);return 3<i&&s&&Object.defineProperty(e,n,s),s};Object.defineProperty(e,"__esModule",{value:!0});var r=n(8),i=o([r.EventConstructor()],s);function s(t,e,n){this.entity=t,this.componentName=e,this.component=n}e.ComponentRemoved=i;var g=o([r.EventConstructor()],a);function a(t,e,n){this.entity=t,this.componentName=e,this.classId=n}e.ComponentAdded=g;var l=o([r.EventConstructor()],c);function c(t,e){this.entity=t,this.parent=e}e.ParentChanged=l},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(1),o="__event_name__",r=[];function s(t){if(!(o in t)||"string"!=typeof t[o])throw new Error("The EventConstructor is not registered");return t[o]}var g=(a.prototype.addListener=function(t,e,n){if(!t||"function"!=typeof t)throw new Error("Invalid EventConstructor");var o=s(t),r=this.listeners[o];r=r||(this.listeners[o]=[]);for(var i=0;i<r.length;i++)if(r[i].listener===e)throw new Error("The provided listener is already registered");return r.push({listener:e,fn:n}),this},a.prototype.removeListener=function(t,e){if(!e||"function"!=typeof e)throw new Error("Invalid EventConstructor");var n=s(e),o=this.listeners[n];if(!o)return!1;for(var r=0;r<o.length;r++)if(o[r].listener===t)return o.splice(r,1),!0;return!1},a.prototype.fireEvent=function(t){var e=s(t.constructor),n=this.listeners[e];if(n)for(var o=0;o<n.length;o++)try{var r=n[o];r.fn.call(r.listener,t)}catch(t){i.error(t)}return this},a);function a(){this.listeners={}}e.EventManager=g,e.EventConstructor=function(){var e=i.newId("EV");if(-1!==r.indexOf(e))throw new Error("The event name "+e+" is already taken");return r.push(e),function(t){return t[o]=e,t}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(1),r=n(3),i=n(10),s=n(11);e.MathTmp={Vector3:o.buildArray(6,r.Vector3.Zero),Matrix:o.buildArray(2,s.Matrix.Identity),Quaternion:o.buildArray(3,i.Quaternion.Zero),staticUp:r.Vector3.Up(),tmpMatrix:s.Matrix.Zero()}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(11),A=n(3),m=n(9),c=n(2),o=(G.FromRotationMatrix=function(t){var e=new G;return G.FromRotationMatrixToRef(t,e),e},G.FromRotationMatrixToRef=function(t,e){var n,o=t.m,r=o[0],i=o[4],s=o[8],g=o[1],a=o[5],l=o[9],c=o[2],I=o[6],C=o[10],d=r+a+C;0<d?(n=.5/Math.sqrt(d+1),e.w=.25/n,e.x=(I-l)*n,e.y=(s-c)*n,e.z=(g-i)*n):a<r&&C<r?(n=2*Math.sqrt(1+r-a-C),e.w=(I-l)/n,e.x=.25*n,e.y=(i+g)/n,e.z=(s+c)/n):C<a?(n=2*Math.sqrt(1+a-r-C),e.w=(s-c)/n,e.x=(i+g)/n,e.y=.25*n,e.z=(l+I)/n):(n=2*Math.sqrt(1+C-r-a),e.w=(g-i)/n,e.x=(s+c)/n,e.y=(l+I)/n,e.z=.25*n)},G.Dot=function(t,e){return t.x*e.x+t.y*e.y+t.z*e.z+t.w*e.w},G.AreClose=function(t,e){return 0<=G.Dot(t,e)},G.Zero=function(){return new G(0,0,0,0)},G.Inverse=function(t){return new G(-t.x,-t.y,-t.z,t.w)},G.IsIdentity=function(t){return t&&0===t.x&&0===t.y&&0===t.z&&1===t.w},G.RotationAxis=function(t,e){var n=e*c.DEG2RAD;return G.RotationAxisToRef(t,n,new G)},G.RotationAxisToRef=function(t,e,n){var o=e*c.DEG2RAD,r=Math.sin(o/2);return t.normalize(),n.w=Math.cos(o/2),n.x=t.x*r,n.y=t.y*r,n.z=t.z*r,n},G.FromArray=function(t,e){return void 0===e&&(e=0),new G(t[e],t[e+1],t[e+2],t[e+3])},G.FromEulerAnglesRef=function(t,e,n,o){return G.RotationYawPitchRollToRef(e*c.DEG2RAD,t*c.DEG2RAD,n*c.DEG2RAD,o)},G.RotationYawPitchRoll=function(t,e,n){var o=new G;return G.RotationYawPitchRollToRef(t,e,n,o),o},G.RotationYawPitchRollToRef=function(t,e,n,o){var r=.5*n,i=.5*e,s=.5*t,g=Math.cos(i),a=Math.cos(s),l=Math.cos(r),c=Math.sin(i),I=Math.sin(s),C=Math.sin(r);o.x=c*a*l+g*I*C,o.y=g*I*l-c*a*C,o.z=g*a*C+c*I*l,o.w=g*a*l-c*I*C},G.RotationAlphaBetaGamma=function(t,e,n){var o=new G;return G.RotationAlphaBetaGammaToRef(t,e,n,o),o},G.RotationAlphaBetaGammaToRef=function(t,e,n,o){var r=.5*(n+t),i=.5*(n-t),s=.5*e;o.x=Math.cos(i)*Math.sin(s),o.y=Math.sin(i)*Math.sin(s),o.z=Math.sin(r)*Math.cos(s),o.w=Math.cos(r)*Math.cos(s)},G.RotationQuaternionFromAxis=function(t,e,n){var o=new G(0,0,0,0);return G.RotationQuaternionFromAxisToRef(t,e,n,o),o},G.RotationQuaternionFromAxisToRef=function(t,e,n,o){var r=m.MathTmp.Matrix[0];i.Matrix.FromXYZAxesToRef(t.normalize(),e.normalize(),n.normalize(),r),G.FromRotationMatrixToRef(r,o)},G.Slerp=function(t,e,n){var o=G.Identity;return G.SlerpToRef(t,e,n,o),o},G.SlerpToRef=function(t,e,n,o){var r,i,s=t.x*e.x+t.y*e.y+t.z*e.z+t.w*e.w,g=!1;if(s<0&&(g=!0,s=-s),.999999<s)i=1-n,r=g?-n:n;else{var a=Math.acos(s),l=1/Math.sin(a);i=Math.sin((1-n)*a)*l,r=g?-Math.sin(n*a)*l:Math.sin(n*a)*l}o.x=i*t.x+r*e.x,o.y=i*t.y+r*e.y,o.z=i*t.z+r*e.z,o.w=i*t.w+r*e.w},G.Hermite=function(t,e,n,o,r){var i=r*r,s=r*i,g=2*s-3*i+1,a=-2*s+3*i,l=s-2*i+r,c=s-i;return new G(t.x*g+n.x*a+e.x*l+o.x*c,t.y*g+n.y*a+e.y*l+o.y*c,t.z*g+n.z*a+e.z*l+o.z*c,t.w*g+n.w*a+e.w*l+o.w*c)},Object.defineProperty(G,"Identity",{get:function(){return new G(0,0,0,1)},enumerable:!0,configurable:!0}),G.Angle=function(t,e){var n=G.Dot(t,e);return 2*Math.acos(Math.min(Math.abs(n),1))*c.RAD2DEG},G.Euler=function(t,e,n){return G.RotationYawPitchRoll(e*c.DEG2RAD,t*c.DEG2RAD,n*c.DEG2RAD)},G.LookRotation=function(t,e){void 0===e&&(e=m.MathTmp.staticUp);var n=A.Vector3.Normalize(t),o=A.Vector3.Normalize(A.Vector3.Cross(e,n)),r=A.Vector3.Cross(n,o),i=o.x,s=o.y,g=o.z,a=r.x,l=r.y,c=r.z,I=n.x,C=n.y,d=n.z,B=i+l+d,Q=new G;if(0<B){var p=Math.sqrt(B+1);return Q.w=.5*p,p=.5/p,Q.x=(c-C)*p,Q.y=(I-g)*p,Q.z=(s-a)*p,Q}if(l<=i&&d<=i){var u=Math.sqrt(1+i-l-d),F=.5/u;return Q.x=.5*u,Q.y=(s+a)*F,Q.z=(g+I)*F,Q.w=(c-C)*F,Q}if(d<l){var U=Math.sqrt(1+l-i-d),y=.5/U;return Q.x=(a+s)*y,Q.y=.5*U,Q.z=(C+c)*y,Q.w=(I-g)*y,Q}var h=Math.sqrt(1+d-i-l),b=.5/h;return Q.x=(I+g)*b,Q.y=(C+c)*b,Q.z=.5*h,Q.w=(s-a)*b,Q},G.RotateTowards=function(t,e,n){var o=G.Angle(t,e);if(0===o)return e;var r=Math.min(1,n/o);return G.Slerp(t,e,r)},G.FromToRotation=function(t,e){var n=new G,o=t.normalize(),r=e.normalize(),i=A.Vector3.Dot(o,r);if(i>-1+c.Epsilon){var s=Math.sqrt(2*(1+i)),g=1/s,a=A.Vector3.Cross(o,r).scaleInPlace(g);n.set(a.x,a.y,a.z,.5*s)}else{if(i>1-c.Epsilon)return new G(0,0,0,1);var l=A.Vector3.Cross(A.Vector3.Right(),o);l.lengthSquared()<c.Epsilon&&(l=A.Vector3.Cross(A.Vector3.Forward(),o)),n.set(l.x,l.y,l.z,0)}return n.normalize()},Object.defineProperty(G.prototype,"normalized",{get:function(){return this.normalize()},enumerable:!0,configurable:!0}),G.prototype.setFromToRotation=function(t,e,n){void 0===n&&(n=m.MathTmp.staticUp),m.MathTmp.tmpMatrix=i.Matrix.Zero(),i.Matrix.LookAtLHToRef(t,e,n,m.MathTmp.tmpMatrix),m.MathTmp.tmpMatrix.invert(),G.FromRotationMatrixToRef(m.MathTmp.tmpMatrix,this)},Object.defineProperty(G.prototype,"eulerAngles",{get:function(){var t=new A.Vector3,e=new i.Matrix;this.toRotationMatrix(e);var n=i.Matrix.GetAsMatrix3x3(e);return t.y=c.RAD2DEG*Math.asin(Math.max(-1,Math.min(1,n[6]))),Math.abs(n[6])<.99999?(t.x=c.RAD2DEG*Math.atan2(-n[7],n[8]),t.z=c.RAD2DEG*Math.atan2(-n[3],n[0])):(t.x=c.RAD2DEG*Math.atan2(n[5],n[4]),t.z=0),t},set:function(t){this.setEuler(t.x,t.y,t.z)},enumerable:!0,configurable:!0}),G.prototype.toString=function(){return"("+this.x+", "+this.y+", "+this.z+", "+this.w+")"},Object.defineProperty(G.prototype,"length",{get:function(){return Math.sqrt(this.lengthSquared)},enumerable:!0,configurable:!0}),Object.defineProperty(G.prototype,"lengthSquared",{get:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},enumerable:!0,configurable:!0}),G.prototype.getClassName=function(){return"Quaternion"},G.prototype.getHashCode=function(){var t=this.x||0;return 397*(t=397*(t=397*t^(this.y||0))^(this.z||0))^(this.w||0)},G.prototype.asArray=function(){return[this.x,this.y,this.z,this.w]},G.prototype.equals=function(t){return t&&this.x===t.x&&this.y===t.y&&this.z===t.z&&this.w===t.w},G.prototype.clone=function(){return new G(this.x,this.y,this.z,this.w)},G.prototype.copyFrom=function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=t.w,this},G.prototype.copyFromFloats=function(t,e,n,o){return this.x=t,this.y=e,this.z=n,this.w=o,this},G.prototype.set=function(t,e,n,o){return this.copyFromFloats(t,e,n,o)},G.prototype.setEuler=function(t,e,n){return G.RotationYawPitchRollToRef(e*c.DEG2RAD,t*c.DEG2RAD,n*c.DEG2RAD,this),this},G.prototype.add=function(t){return new G(this.x+t.x,this.y+t.y,this.z+t.z,this.w+t.w)},G.prototype.addInPlace=function(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w,this},G.prototype.subtract=function(t){return new G(this.x-t.x,this.y-t.y,this.z-t.z,this.w-t.w)},G.prototype.scale=function(t){return new G(this.x*t,this.y*t,this.z*t,this.w*t)},G.prototype.scaleToRef=function(t,e){return e.x=this.x*t,e.y=this.y*t,e.z=this.z*t,e.w=this.w*t,this},G.prototype.scaleInPlace=function(t){return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this},G.prototype.scaleAndAddToRef=function(t,e){return e.x+=this.x*t,e.y+=this.y*t,e.z+=this.z*t,e.w+=this.w*t,this},G.prototype.multiply=function(t){var e=new G(0,0,0,1);return this.multiplyToRef(t,e),e},G.prototype.multiplyToRef=function(t,e){var n=this.x*t.w+this.y*t.z-this.z*t.y+this.w*t.x,o=-this.x*t.z+this.y*t.w+this.z*t.x+this.w*t.y,r=this.x*t.y-this.y*t.x+this.z*t.w+this.w*t.z,i=-this.x*t.x-this.y*t.y-this.z*t.z+this.w*t.w;return e.copyFromFloats(n,o,r,i),this},G.prototype.multiplyInPlace=function(t){return this.multiplyToRef(t,this),this},G.prototype.conjugateToRef=function(t){return t.copyFromFloats(-this.x,-this.y,-this.z,this.w),this},G.prototype.conjugateInPlace=function(){return this.x*=-1,this.y*=-1,this.z*=-1,this},G.prototype.conjugate=function(){return new G(-this.x,-this.y,-this.z,this.w)},G.prototype.normalize=function(){var t=1/this.length;return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this},G.prototype.angleAxis=function(t,e){if(0===e.lengthSquared())return G.Identity;var n=G.Identity,o=t*c.DEG2RAD;o*=.5;var r=e.normalize();return r=e.scaleInPlace(Math.sin(o)),n.x=r.x,n.y=r.y,n.z=r.z,n.w=Math.cos(o),n.normalize()},G.prototype.toRotationMatrix=function(t){return i.Matrix.FromQuaternionToRef(this,t),this},G.prototype.fromRotationMatrix=function(t){return G.FromRotationMatrixToRef(t,this),this},G);function G(t,e,n,o){void 0===t&&(t=0),void 0===e&&(e=0),void 0===n&&(n=0),void 0===o&&(o=1),this.x=t,this.y=e,this.z=n,this.w=o}e.Quaternion=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var d=n(3),B=n(10),Q=n(9),o=n(20),r=(Object.defineProperty(z.prototype,"m",{get:function(){return this._m},enumerable:!0,configurable:!0}),Object.defineProperty(z,"IdentityReadOnly",{get:function(){return z._identityReadOnly},enumerable:!0,configurable:!0}),z.FromArray=function(t,e){void 0===e&&(e=0);var n=new z;return z.FromArrayToRef(t,e,n),n},z.FromArrayToRef=function(t,e,n){for(var o=0;o<16;o++)n._m[o]=t[o+e];n._markAsUpdated()},z.FromFloatArrayToRefScaled=function(t,e,n,o){for(var r=0;r<16;r++)o._m[r]=t[r+e]*n;o._markAsUpdated()},z.FromValuesToRef=function(t,e,n,o,r,i,s,g,a,l,c,I,C,d,B,Q,p){var u=p._m;u[0]=t,u[1]=e,u[2]=n,u[3]=o,u[4]=r,u[5]=i,u[6]=s,u[7]=g,u[8]=a,u[9]=l,u[10]=c,u[11]=I,u[12]=C,u[13]=d,u[14]=B,u[15]=Q,p._markAsUpdated()},z.FromValues=function(t,e,n,o,r,i,s,g,a,l,c,I,C,d,B,Q){var p=new z,u=p._m;return u[0]=t,u[1]=e,u[2]=n,u[3]=o,u[4]=r,u[5]=i,u[6]=s,u[7]=g,u[8]=a,u[9]=l,u[10]=c,u[11]=I,u[12]=C,u[13]=d,u[14]=B,u[15]=Q,p._markAsUpdated(),p},z.Compose=function(t,e,n){var o=new z;return z.ComposeToRef(t,e,n,o),o},z.ComposeToRef=function(t,e,n,o){z.ScalingToRef(t.x,t.y,t.z,Q.MathTmp.Matrix[1]),e.toRotationMatrix(Q.MathTmp.Matrix[0]),Q.MathTmp.Matrix[1].multiplyToRef(Q.MathTmp.Matrix[0],o),o.setTranslation(n)},z.Identity=function(){var t=z.FromValues(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1);return t._updateIdentityStatus(!0),t},z.IdentityToRef=function(t){z.FromValuesToRef(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,t),t._updateIdentityStatus(!0)},z.Zero=function(){var t=z.FromValues(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);return t._updateIdentityStatus(!1),t},z.RotationX=function(t){var e=new z;return z.RotationXToRef(t,e),e},z.Invert=function(t){var e=new z;return t.invertToRef(e),e},z.RotationXToRef=function(t,e){var n=Math.sin(t),o=Math.cos(t);z.FromValuesToRef(1,0,0,0,0,o,n,0,0,-n,o,0,0,0,0,1,e),e._updateIdentityStatus(1===o&&0===n)},z.RotationY=function(t){var e=new z;return z.RotationYToRef(t,e),e},z.RotationYToRef=function(t,e){var n=Math.sin(t),o=Math.cos(t);z.FromValuesToRef(o,0,-n,0,0,1,0,0,n,0,o,0,0,0,0,1,e),e._updateIdentityStatus(1===o&&0===n)},z.RotationZ=function(t){var e=new z;return z.RotationZToRef(t,e),e},z.RotationZToRef=function(t,e){var n=Math.sin(t),o=Math.cos(t);z.FromValuesToRef(o,n,0,0,-n,o,0,0,0,0,1,0,0,0,0,1,e),e._updateIdentityStatus(1===o&&0===n)},z.RotationAxis=function(t,e){var n=new z;return z.RotationAxisToRef(t,e,n),n},z.RotationAxisToRef=function(t,e,n){var o=Math.sin(-e),r=Math.cos(-e),i=1-r;t.normalize();var s=n._m;s[0]=t.x*t.x*i+r,s[1]=t.x*t.y*i-t.z*o,s[2]=t.x*t.z*i+t.y*o,s[3]=0,s[4]=t.y*t.x*i+t.z*o,s[5]=t.y*t.y*i+r,s[6]=t.y*t.z*i-t.x*o,s[7]=0,s[8]=t.z*t.x*i-t.y*o,s[9]=t.z*t.y*i+t.x*o,s[10]=t.z*t.z*i+r,s[11]=0,s[12]=0,s[13]=0,s[14]=0,s[15]=1,n._markAsUpdated()},z.RotationYawPitchRoll=function(t,e,n){var o=new z;return z.RotationYawPitchRollToRef(t,e,n,o),o},z.RotationYawPitchRollToRef=function(t,e,n,o){B.Quaternion.RotationYawPitchRollToRef(t,e,n,Q.MathTmp.Quaternion[0]),Q.MathTmp.Quaternion[0].toRotationMatrix(o)},z.Scaling=function(t,e,n){var o=new z;return z.ScalingToRef(t,e,n,o),o},z.ScalingToRef=function(t,e,n,o){z.FromValuesToRef(t,0,0,0,0,e,0,0,0,0,n,0,0,0,0,1,o),o._updateIdentityStatus(1===t&&1===e&&1===n)},z.Translation=function(t,e,n){var o=new z;return z.TranslationToRef(t,e,n,o),o},z.TranslationToRef=function(t,e,n,o){z.FromValuesToRef(1,0,0,0,0,1,0,0,0,0,1,0,t,e,n,1,o),o._updateIdentityStatus(0===t&&0===e&&0===n)},z.Lerp=function(t,e,n){var o=new z;return z.LerpToRef(t,e,n,o),o},z.LerpToRef=function(t,e,n,o){for(var r=0;r<16;r++)o._m[r]=t._m[r]*(1-n)+e._m[r]*n;o._markAsUpdated()},z.DecomposeLerp=function(t,e,n){var o=new z;return z.DecomposeLerpToRef(t,e,n,o),o},z.DecomposeLerpToRef=function(t,e,n,o){var r=Q.MathTmp.Vector3[0],i=Q.MathTmp.Quaternion[0],s=Q.MathTmp.Vector3[1];t.decompose(r,i,s);var g=Q.MathTmp.Vector3[2],a=Q.MathTmp.Quaternion[1],l=Q.MathTmp.Vector3[3];e.decompose(g,a,l);var c=Q.MathTmp.Vector3[4];d.Vector3.LerpToRef(r,g,n,c);var I=Q.MathTmp.Quaternion[2];B.Quaternion.SlerpToRef(i,a,n,I);var C=Q.MathTmp.Vector3[5];d.Vector3.LerpToRef(s,l,n,C),z.ComposeToRef(c,I,C,o)},z.LookAtLH=function(t,e,n){var o=new z;return z.LookAtLHToRef(t,e,n,o),o},z.LookAtLHToRef=function(t,e,n,o){var r=Q.MathTmp.Vector3[0],i=Q.MathTmp.Vector3[1],s=Q.MathTmp.Vector3[2];e.subtractToRef(t,s),s.normalize(),d.Vector3.CrossToRef(n,s,r);var g=r.lengthSquared();0===g?r.x=1:r.normalizeFromLength(Math.sqrt(g)),d.Vector3.CrossToRef(s,r,i),i.normalize();var a=-d.Vector3.Dot(r,t),l=-d.Vector3.Dot(i,t),c=-d.Vector3.Dot(s,t);z.FromValuesToRef(r.x,i.x,s.x,0,r.y,i.y,s.y,0,r.z,i.z,s.z,0,a,l,c,1,o)},z.LookAtRH=function(t,e,n){var o=new z;return z.LookAtRHToRef(t,e,n,o),o},z.LookAtRHToRef=function(t,e,n,o){var r=Q.MathTmp.Vector3[0],i=Q.MathTmp.Vector3[1],s=Q.MathTmp.Vector3[2];t.subtractToRef(e,s),s.normalize(),d.Vector3.CrossToRef(n,s,r);var g=r.lengthSquared();0===g?r.x=1:r.normalizeFromLength(Math.sqrt(g)),d.Vector3.CrossToRef(s,r,i),i.normalize();var a=-d.Vector3.Dot(r,t),l=-d.Vector3.Dot(i,t),c=-d.Vector3.Dot(s,t);z.FromValuesToRef(r.x,i.x,s.x,0,r.y,i.y,s.y,0,r.z,i.z,s.z,0,a,l,c,1,o)},z.OrthoLH=function(t,e,n,o){var r=new z;return z.OrthoLHToRef(t,e,n,o,r),r},z.OrthoLHToRef=function(t,e,n,o,r){var i=2/t,s=2/e,g=2/(o-n),a=-(o+n)/(o-n);z.FromValuesToRef(i,0,0,0,0,s,0,0,0,0,g,0,0,0,a,1,r),r._updateIdentityStatus(1==i&&1==s&&1==g&&0==a)},z.OrthoOffCenterLH=function(t,e,n,o,r,i){var s=new z;return z.OrthoOffCenterLHToRef(t,e,n,o,r,i,s),s},z.OrthoOffCenterLHToRef=function(t,e,n,o,r,i,s){z.FromValuesToRef(2/(e-t),0,0,0,0,2/(o-n),0,0,0,0,2/(i-r),0,(t+e)/(t-e),(o+n)/(n-o),-(i+r)/(i-r),1,s),s._markAsUpdated()},z.OrthoOffCenterRH=function(t,e,n,o,r,i){var s=new z;return z.OrthoOffCenterRHToRef(t,e,n,o,r,i,s),s},z.OrthoOffCenterRHToRef=function(t,e,n,o,r,i,s){z.OrthoOffCenterLHToRef(t,e,n,o,r,i,s),s._m[10]*=-1},z.PerspectiveLH=function(t,e,n,o){var r=new z;return z.FromValuesToRef(2*n/t,0,0,0,0,2*n/e,0,0,0,0,(o+n)/(o-n),1,0,0,-2*o*n/(o-n),0,r),r._updateIdentityStatus(!1),r},z.PerspectiveFovLH=function(t,e,n,o){var r=new z;return z.PerspectiveFovLHToRef(t,e,n,o,r),r},z.PerspectiveFovLHToRef=function(t,e,n,o,r,i){void 0===i&&(i=!0);var s=n,g=o,a=1/Math.tan(.5*t);z.FromValuesToRef(i?a/e:a,0,0,0,0,i?a:a*e,0,0,0,0,(g+s)/(g-s),1,0,0,-2*g*s/(g-s),0,r),r._updateIdentityStatus(!1)},z.PerspectiveFovRH=function(t,e,n,o){var r=new z;return z.PerspectiveFovRHToRef(t,e,n,o,r),r},z.PerspectiveFovRHToRef=function(t,e,n,o,r,i){void 0===i&&(i=!0);var s=n,g=o,a=1/Math.tan(.5*t);z.FromValuesToRef(i?a/e:a,0,0,0,0,i?a:a*e,0,0,0,0,-(g+s)/(g-s),-1,0,0,-2*g*s/(g-s),0,r),r._updateIdentityStatus(!1)},z.PerspectiveFovWebVRToRef=function(t,e,n,o,r){void 0===r&&(r=!1);var i=r?-1:1,s=Math.tan(t.upDegrees*Math.PI/180),g=Math.tan(t.downDegrees*Math.PI/180),a=Math.tan(t.leftDegrees*Math.PI/180),l=Math.tan(t.rightDegrees*Math.PI/180),c=2/(a+l),I=2/(s+g),C=o._m;C[0]=c,C[1]=C[2]=C[3]=C[4]=0,C[5]=I,C[6]=C[7]=0,C[8]=(a-l)*c*.5,C[9]=-(s-g)*I*.5,C[10]=-n/(e-n),C[11]=1*i,C[12]=C[13]=C[15]=0,C[14]=-2*n*e/(n-e),o._markAsUpdated()},z.GetAsMatrix2x2=function(t){return[t._m[0],t._m[1],t._m[4],t._m[5]]},z.GetAsMatrix3x3=function(t){return[t._m[0],t._m[1],t._m[2],t._m[4],t._m[5],t._m[6],t._m[8],t._m[9],t._m[10]]},z.Transpose=function(t){var e=new z;return z.TransposeToRef(t,e),e},z.TransposeToRef=function(t,e){var n=e._m,o=t._m;n[0]=o[0],n[1]=o[4],n[2]=o[8],n[3]=o[12],n[4]=o[1],n[5]=o[5],n[6]=o[9],n[7]=o[13],n[8]=o[2],n[9]=o[6],n[10]=o[10],n[11]=o[14],n[12]=o[3],n[13]=o[7],n[14]=o[11],n[15]=o[15],e._updateIdentityStatus(t._isIdentity,t._isIdentityDirty)},z.Reflection=function(t){var e=new z;return z.ReflectionToRef(t,e),e},z.ReflectionToRef=function(t,e){t.normalize();var n=t.normal.x,o=t.normal.y,r=t.normal.z,i=-2*n,s=-2*o,g=-2*r;z.FromValuesToRef(i*n+1,s*n,g*n,0,i*o,s*o+1,g*o,0,i*r,s*r,g*r+1,0,i*t.d,s*t.d,g*t.d,1,e)},z.FromXYZAxesToRef=function(t,e,n,o){z.FromValuesToRef(t.x,t.y,t.z,0,e.x,e.y,e.z,0,n.x,n.y,n.z,0,0,0,0,1,o)},z.FromQuaternionToRef=function(t,e){var n=t.x*t.x,o=t.y*t.y,r=t.z*t.z,i=t.x*t.y,s=t.z*t.w,g=t.z*t.x,a=t.y*t.w,l=t.y*t.z,c=t.x*t.w;e._m[0]=1-2*(o+r),e._m[1]=2*(i+s),e._m[2]=2*(g-a),e._m[3]=0,e._m[4]=2*(i-s),e._m[5]=1-2*(r+n),e._m[6]=2*(l+c),e._m[7]=0,e._m[8]=2*(g+a),e._m[9]=2*(l-c),e._m[10]=1-2*(o+n),e._m[11]=0,e._m[12]=0,e._m[13]=0,e._m[14]=0,e._m[15]=1,e._markAsUpdated()},z.prototype._markAsUpdated=function(){this.updateFlag=z._updateFlagSeed++,this._isIdentity=!1,this._isIdentity3x2=!1,this._isIdentityDirty=!0,this._isIdentity3x2Dirty=!0},z.prototype.isIdentity=function(){if(this._isIdentityDirty){this._isIdentityDirty=!1;var t=this._m;this._isIdentity=1===t[0]&&0===t[1]&&0===t[2]&&0===t[3]&&0===t[4]&&1===t[5]&&0===t[6]&&0===t[7]&&0===t[8]&&0===t[9]&&1===t[10]&&0===t[11]&&0===t[12]&&0===t[13]&&0===t[14]&&1===t[15]}return this._isIdentity},z.prototype.isIdentityAs3x2=function(){return this._isIdentity3x2Dirty&&(this._isIdentity3x2Dirty=!1,1!==this._m[0]||1!==this._m[5]||1!==this._m[15]?this._isIdentity3x2=!1:0!==this._m[1]||0!==this._m[2]||0!==this._m[3]||0!==this._m[4]||0!==this._m[6]||0!==this._m[7]||0!==this._m[8]||0!==this._m[9]||0!==this._m[10]||0!==this._m[11]||0!==this._m[12]||0!==this._m[13]||0!==this._m[14]?this._isIdentity3x2=!1:this._isIdentity3x2=!0),this._isIdentity3x2},z.prototype.determinant=function(){if(!0===this._isIdentity)return 1;var t=this._m,e=t[0],n=t[1],o=t[2],r=t[3],i=t[4],s=t[5],g=t[6],a=t[7],l=t[8],c=t[9],I=t[10],C=t[11],d=t[12],B=t[13],Q=t[14],p=t[15],u=I*p-Q*C,F=c*p-B*C,U=c*Q-B*I,y=l*p-d*C,h=l*Q-I*d,b=l*B-d*c;return e*+(s*u-g*F+a*U)+n*-(i*u-g*y+a*h)+o*+(i*F-s*y+a*b)+r*-(i*U-s*h+g*b)},z.prototype.toArray=function(){return this._m},z.prototype.asArray=function(){return this._m},z.prototype.invert=function(){return this.invertToRef(this),this},z.prototype.reset=function(){return z.FromValuesToRef(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,this),this._updateIdentityStatus(!1),this},z.prototype.add=function(t){var e=new z;return this.addToRef(t,e),e},z.prototype.addToRef=function(t,e){for(var n=0;n<16;n++)e._m[n]=this._m[n]+t._m[n];return e._markAsUpdated(),this},z.prototype.addToSelf=function(t){for(var e=0;e<16;e++)this._m[e]+=t._m[e];return this._markAsUpdated(),this},z.prototype.invertToRef=function(t){if(!0===this._isIdentity)return z.IdentityToRef(t),this;var e=this._m,n=e[0],o=e[1],r=e[2],i=e[3],s=e[4],g=e[5],a=e[6],l=e[7],c=e[8],I=e[9],C=e[10],d=e[11],B=e[12],Q=e[13],p=e[14],u=e[15],F=C*u-p*d,U=I*u-Q*d,y=I*p-Q*C,h=c*u-B*d,b=c*p-C*B,A=c*Q-B*I,m=+(g*F-a*U+l*y),G=-(s*F-a*h+l*b),x=+(s*U-g*h+l*A),v=-(s*y-g*b+a*A),R=n*m+o*G+r*x+i*v;if(0==R)return t.copyFrom(this),this;var Z=1/R,f=a*u-p*l,L=g*u-Q*l,S=g*p-Q*a,V=s*u-B*l,E=s*p-B*a,X=s*Q-B*g,N=a*d-C*l,W=g*d-I*l,D=g*C-I*a,M=s*d-c*l,w=s*C-c*a,H=s*I-c*g;return z.FromValuesToRef(m*Z,-(o*F-r*U+i*y)*Z,+(o*f-r*L+i*S)*Z,-(o*N-r*W+i*D)*Z,G*Z,+(n*F-r*h+i*b)*Z,-(n*f-r*V+i*E)*Z,+(n*N-r*M+i*w)*Z,x*Z,-(n*U-o*h+i*A)*Z,+(n*L-o*V+i*X)*Z,-(n*W-o*M+i*H)*Z,v*Z,+(n*y-o*b+r*A)*Z,-(n*S-o*E+r*X)*Z,+(n*D-o*w+r*H)*Z,t),this},z.prototype.addAtIndex=function(t,e){return this._m[t]+=e,this._markAsUpdated(),this},z.prototype.multiplyAtIndex=function(t,e){return this._m[t]*=e,this._markAsUpdated(),this},z.prototype.setTranslationFromFloats=function(t,e,n){return this._m[12]=t,this._m[13]=e,this._m[14]=n,this._markAsUpdated(),this},z.prototype.setTranslation=function(t){return this.setTranslationFromFloats(t.x,t.y,t.z)},z.prototype.getTranslation=function(){return new d.Vector3(this._m[12],this._m[13],this._m[14])},z.prototype.getTranslationToRef=function(t){return t.x=this._m[12],t.y=this._m[13],t.z=this._m[14],this},z.prototype.removeRotationAndScaling=function(){var t=this.m;return z.FromValuesToRef(1,0,0,0,0,1,0,0,0,0,1,0,t[12],t[13],t[14],t[15],this),this._updateIdentityStatus(0===t[12]&&0===t[13]&&0===t[14]&&1===t[15]),this},z.prototype.multiply=function(t){var e=new z;return this.multiplyToRef(t,e),e},z.prototype.copyFrom=function(t){t.copyToArray(this._m);var e=t;return this._updateIdentityStatus(e._isIdentity,e._isIdentityDirty,e._isIdentity3x2,e._isIdentity3x2Dirty),this},z.prototype.copyToArray=function(t,e){void 0===e&&(e=0);for(var n=0;n<16;n++)t[e+n]=this._m[n];return this},z.prototype.multiplyToRef=function(t,e){return this._isIdentity?e.copyFrom(t):t._isIdentity?e.copyFrom(this):(this.multiplyToArray(t,e._m,0),e._markAsUpdated()),this},z.prototype.multiplyToArray=function(t,e,n){var o=this._m,r=t.m,i=o[0],s=o[1],g=o[2],a=o[3],l=o[4],c=o[5],I=o[6],C=o[7],d=o[8],B=o[9],Q=o[10],p=o[11],u=o[12],F=o[13],U=o[14],y=o[15],h=r[0],b=r[1],A=r[2],m=r[3],G=r[4],x=r[5],v=r[6],R=r[7],Z=r[8],f=r[9],L=r[10],S=r[11],V=r[12],E=r[13],X=r[14],N=r[15];return e[n]=i*h+s*G+g*Z+a*V,e[n+1]=i*b+s*x+g*f+a*E,e[n+2]=i*A+s*v+g*L+a*X,e[n+3]=i*m+s*R+g*S+a*N,e[n+4]=l*h+c*G+I*Z+C*V,e[n+5]=l*b+c*x+I*f+C*E,e[n+6]=l*A+c*v+I*L+C*X,e[n+7]=l*m+c*R+I*S+C*N,e[n+8]=d*h+B*G+Q*Z+p*V,e[n+9]=d*b+B*x+Q*f+p*E,e[n+10]=d*A+B*v+Q*L+p*X,e[n+11]=d*m+B*R+Q*S+p*N,e[n+12]=u*h+F*G+U*Z+y*V,e[n+13]=u*b+F*x+U*f+y*E,e[n+14]=u*A+F*v+U*L+y*X,e[n+15]=u*m+F*R+U*S+y*N,this},z.prototype.equals=function(t){var e=t;if(!e)return!1;if((this._isIdentity||e._isIdentity)&&!this._isIdentityDirty&&!e._isIdentityDirty)return this._isIdentity&&e._isIdentity;var n=this.m,o=e.m;return n[0]===o[0]&&n[1]===o[1]&&n[2]===o[2]&&n[3]===o[3]&&n[4]===o[4]&&n[5]===o[5]&&n[6]===o[6]&&n[7]===o[7]&&n[8]===o[8]&&n[9]===o[9]&&n[10]===o[10]&&n[11]===o[11]&&n[12]===o[12]&&n[13]===o[13]&&n[14]===o[14]&&n[15]===o[15]},z.prototype.clone=function(){var t=new z;return t.copyFrom(this),t},z.prototype.getClassName=function(){return"Matrix"},z.prototype.getHashCode=function(){for(var t=this._m[0]||0,e=1;e<16;e++)t=397*t^(this._m[e]||0);return t},z.prototype.decompose=function(t,e,n){if(this._isIdentity)return n&&n.setAll(0),t&&t.setAll(1),e&&e.copyFromFloats(0,0,0,1),!0;var o=this._m;n&&n.copyFromFloats(o[12],o[13],o[14]);var r=t||Q.MathTmp.Vector3[0];if(r.x=Math.sqrt(o[0]*o[0]+o[1]*o[1]+o[2]*o[2]),r.y=Math.sqrt(o[4]*o[4]+o[5]*o[5]+o[6]*o[6]),r.z=Math.sqrt(o[8]*o[8]+o[9]*o[9]+o[10]*o[10]),this.determinant()<=0&&(r.y*=-1),0===r.x||0===r.y||0===r.z)return e&&e.copyFromFloats(0,0,0,1),!1;if(e){var i=1/r.x,s=1/r.y,g=1/r.z;z.FromValuesToRef(o[0]*i,o[1]*i,o[2]*i,0,o[4]*s,o[5]*s,o[6]*s,0,o[8]*g,o[9]*g,o[10]*g,0,0,0,0,1,Q.MathTmp.Matrix[0]),B.Quaternion.FromRotationMatrixToRef(Q.MathTmp.Matrix[0],e)}return!0},z.prototype.getRow=function(t){if(t<0||3<t)return null;var e=4*t;return new o.Vector4(this._m[0+e],this._m[1+e],this._m[2+e],this._m[3+e])},z.prototype.setRow=function(t,e){return this.setRowFromFloats(t,e.x,e.y,e.z,e.w)},z.prototype.transpose=function(){return z.Transpose(this)},z.prototype.transposeToRef=function(t){return z.TransposeToRef(this,t),this},z.prototype.setRowFromFloats=function(t,e,n,o,r){if(t<0||3<t)return this;var i=4*t;return this._m[0+i]=e,this._m[1+i]=n,this._m[2+i]=o,this._m[3+i]=r,this._markAsUpdated(),this},z.prototype.scale=function(t){var e=new z;return this.scaleToRef(t,e),e},z.prototype.scaleToRef=function(t,e){for(var n=0;n<16;n++)e._m[n]=this._m[n]*t;return e._markAsUpdated(),this},z.prototype.scaleAndAddToRef=function(t,e){for(var n=0;n<16;n++)e._m[n]+=this._m[n]*t;return e._markAsUpdated(),this},z.prototype.toNormalMatrix=function(t){var e=Q.MathTmp.Matrix[0];this.invertToRef(e),e.transposeToRef(t);var n=t._m;z.FromValuesToRef(n[0],n[1],n[2],0,n[4],n[5],n[6],0,n[8],n[9],n[10],0,0,0,0,1,t)},z.prototype.getRotationMatrix=function(){var t=new z;return this.getRotationMatrixToRef(t),t},z.prototype.getRotationMatrixToRef=function(t){var e=Q.MathTmp.Vector3[0];if(!this.decompose(e))return z.IdentityToRef(t),this;var n=this._m,o=1/e.x,r=1/e.y,i=1/e.z;return z.FromValuesToRef(n[0]*o,n[1]*o,n[2]*o,0,n[4]*r,n[5]*r,n[6]*r,0,n[8]*i,n[9]*i,n[10]*i,0,0,0,0,1,t),this},z.prototype.toggleModelMatrixHandInPlace=function(){var t=this._m;t[2]*=-1,t[6]*=-1,t[8]*=-1,t[9]*=-1,t[14]*=-1,this._markAsUpdated()},z.prototype.toggleProjectionMatrixHandInPlace=function(){var t=this._m;t[8]*=-1,t[9]*=-1,t[10]*=-1,t[11]*=-1,this._markAsUpdated()},z.prototype._updateIdentityStatus=function(t,e,n,o){void 0===e&&(e=!1),void 0===n&&(n=!1),void 0===o&&(o=!0),this.updateFlag=z._updateFlagSeed++,this._isIdentity=t,this._isIdentity3x2=t||n,this._isIdentityDirty=!this._isIdentity&&e,this._isIdentity3x2Dirty=!this._isIdentity3x2&&o},z._updateFlagSeed=0,z._identityReadOnly=z.Identity(),z);function z(){this._isIdentity=!1,this._isIdentityDirty=!0,this._isIdentity3x2=!0,this._isIdentity3x2Dirty=!0,this._m=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this._updateIdentityStatus(!1)}e.Matrix=r},function(t,e,n){"use strict";var o=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,s=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,o);else for(var g=t.length-1;0<=g;g--)(r=t[g])&&(s=(i<3?r(s):3<i?r(e,n,s):r(e,n))||s);return 3<i&&s&&Object.defineProperty(e,n,s),s};Object.defineProperty(e,"__esModule",{value:!0});var r=n(8),i=o([r.EventConstructor()],s);function s(t,e){this.uuid=t,this.payload=e}e.UUIDEvent=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(12),r=n(5),i=n(7),s=(g.prototype.activate=function(t){t.eventManager.addListener(o.UUIDEvent,this,this.handleEvent),t.eventManager.addListener(i.ComponentAdded,this,this.componentAdded),t.eventManager.addListener(i.ComponentRemoved,this,this.componentRemoved),"undefined"!=typeof dcl&&dcl.subscribe("uuidEvent")},g.prototype.deactivate=function(){"undefined"!=typeof dcl&&dcl.unsubscribe("uuidEvent")},g.prototype.onAddEntity=function(t){for(var e in t.components){var n=t.components[e];n instanceof r.OnUUIDEvent&&(this.handlerMap[n.uuid]=n)}},g.prototype.onRemoveEntity=function(t){for(var e in t.components){var n=t.components[e];n instanceof r.OnUUIDEvent&&delete this.handlerMap[n.uuid]}},g.prototype.componentAdded=function(t){if(t.entity.isAddedToEngine()){var e=t.entity.components[t.componentName];e instanceof r.OnUUIDEvent&&(this.handlerMap[e.uuid]=e)}},g.prototype.componentRemoved=function(t){t.entity.isAddedToEngine()&&t.component instanceof r.OnUUIDEvent&&delete this.handlerMap[t.component.uuid]},g.prototype.handleEvent=function(t){if(t.uuid in this.handlerMap){var e=this.handlerMap[t.uuid];e&&e.callback&&"call"in e.callback&&e.callback(t.payload)}},g);function g(){this.handlerMap={}}e.UUIDEventSystem=s,e.uuidEventSystem=new s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(2),r=n(4),i=(I.Zero=function(){return new I(0,0)},I.One=function(){return new I(1,1)},I.Add=function(t,e){return new I(t.x,t.y).addInPlace(e)},I.FromArray=function(t,e){return void 0===e&&(e=0),new I(t[e],t[e+1])},I.FromArrayToRef=function(t,e,n){n.x=t[e],n.y=t[e+1]},I.CatmullRom=function(t,e,n,o,r){var i=r*r,s=r*i;return new I(.5*(2*e.x+(-t.x+n.x)*r+(2*t.x-5*e.x+4*n.x-o.x)*i+(-t.x+3*e.x-3*n.x+o.x)*s),.5*(2*e.y+(-t.y+n.y)*r+(2*t.y-5*e.y+4*n.y-o.y)*i+(-t.y+3*e.y-3*n.y+o.y)*s))},I.Clamp=function(t,e,n){var o=t.x;o=(o=o>n.x?n.x:o)<e.x?e.x:o;var r=t.y;return new I(o,r=(r=r>n.y?n.y:r)<e.y?e.y:r)},I.Hermite=function(t,e,n,o,r){var i=r*r,s=r*i,g=2*s-3*i+1,a=-2*s+3*i,l=s-2*i+r,c=s-i;return new I(t.x*g+n.x*a+e.x*l+o.x*c,t.y*g+n.y*a+e.y*l+o.y*c)},I.Lerp=function(t,e,n){return new I(t.x+(e.x-t.x)*n,t.y+(e.y-t.y)*n)},I.Dot=function(t,e){return t.x*e.x+t.y*e.y},I.Normalize=function(t){var e=new I(t.x,t.y);return e.normalize(),e},I.Minimize=function(t,e){return new I(t.x<e.x?t.x:e.x,t.y<e.y?t.y:e.y)},I.Maximize=function(t,e){return new I(t.x>e.x?t.x:e.x,t.y>e.y?t.y:e.y)},I.Transform=function(t,e){var n=I.Zero();return I.TransformToRef(t,e,n),n},I.TransformToRef=function(t,e,n){var o=e.m,r=t.x*o[0]+t.y*o[4]+o[12],i=t.x*o[1]+t.y*o[5]+o[13];n.x=r,n.y=i},I.PointInTriangle=function(t,e,n,o){var r=.5*(-n.y*o.x+e.y*(-n.x+o.x)+e.x*(n.y-o.y)+n.x*o.y),i=r<0?-1:1,s=(e.y*o.x-e.x*o.y+(o.y-e.y)*t.x+(e.x-o.x)*t.y)*i,g=(e.x*n.y-e.y*n.x+(e.y-n.y)*t.x+(n.x-e.x)*t.y)*i;return 0<s&&0<g&&s+g<2*r*i},I.Distance=function(t,e){return Math.sqrt(I.DistanceSquared(t,e))},I.DistanceSquared=function(t,e){var n=t.x-e.x,o=t.y-e.y;return n*n+o*o},I.Center=function(t,e){var n=I.Add(t,e);return n.scaleInPlace(.5),n},I.DistanceOfPointFromSegment=function(t,e,n){var o=I.DistanceSquared(e,n);if(0===o)return I.Distance(t,e);var r=n.subtract(e),i=Math.max(0,Math.min(1,I.Dot(t.subtract(e),r)/o)),s=e.add(r.multiplyByFloats(i,i));return I.Distance(t,s)},I.prototype.toString=function(){return"{X: "+this.x+" Y:"+this.y+"}"},I.prototype.getClassName=function(){return"Vector2"},I.prototype.getHashCode=function(){var t=this.x||0;return 397*t^(this.y||0)},I.prototype.toArray=function(t,e){return void 0===e&&(e=0),t[e]=this.x,t[e+1]=this.y,this},I.prototype.asArray=function(){var t=new Array;return this.toArray(t,0),t},I.prototype.copyFrom=function(t){return this.x=t.x,this.y=t.y,this},I.prototype.copyFromFloats=function(t,e){return this.x=t,this.y=e,this},I.prototype.set=function(t,e){return this.copyFromFloats(t,e)},I.prototype.add=function(t){return new I(this.x+t.x,this.y+t.y)},I.prototype.addToRef=function(t,e){return e.x=this.x+t.x,e.y=this.y+t.y,this},I.prototype.addInPlace=function(t){return this.x+=t.x,this.y+=t.y,this},I.prototype.addVector3=function(t){return new I(this.x+t.x,this.y+t.y)},I.prototype.subtract=function(t){return new I(this.x-t.x,this.y-t.y)},I.prototype.subtractToRef=function(t,e){return e.x=this.x-t.x,e.y=this.y-t.y,this},I.prototype.subtractInPlace=function(t){return this.x-=t.x,this.y-=t.y,this},I.prototype.multiplyInPlace=function(t){return this.x*=t.x,this.y*=t.y,this},I.prototype.multiply=function(t){return new I(this.x*t.x,this.y*t.y)},I.prototype.multiplyToRef=function(t,e){return e.x=this.x*t.x,e.y=this.y*t.y,this},I.prototype.multiplyByFloats=function(t,e){return new I(this.x*t,this.y*e)},I.prototype.divide=function(t){return new I(this.x/t.x,this.y/t.y)},I.prototype.divideToRef=function(t,e){return e.x=this.x/t.x,e.y=this.y/t.y,this},I.prototype.divideInPlace=function(t){return this.divideToRef(t,this)},I.prototype.negate=function(){return new I(-this.x,-this.y)},I.prototype.scaleInPlace=function(t){return this.x*=t,this.y*=t,this},I.prototype.scale=function(t){var e=new I(0,0);return this.scaleToRef(t,e),e},I.prototype.scaleToRef=function(t,e){return e.x=this.x*t,e.y=this.y*t,this},I.prototype.scaleAndAddToRef=function(t,e){return e.x+=this.x*t,e.y+=this.y*t,this},I.prototype.equals=function(t){return t&&this.x===t.x&&this.y===t.y},I.prototype.equalsWithEpsilon=function(t,e){return void 0===e&&(e=o.Epsilon),t&&r.Scalar.WithinEpsilon(this.x,t.x,e)&&r.Scalar.WithinEpsilon(this.y,t.y,e)},I.prototype.floor=function(){return new I(Math.floor(this.x),Math.floor(this.y))},I.prototype.fract=function(){return new I(this.x-Math.floor(this.x),this.y-Math.floor(this.y))},I.prototype.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},I.prototype.lengthSquared=function(){return this.x*this.x+this.y*this.y},I.prototype.normalize=function(){var t=this.length();if(0===t)return this;var e=1/t;return this.x*=e,this.y*=e,this},I.prototype.clone=function(){return new I(this.x,this.y)},I);function I(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.x=t,this.y=e}e.Vector2=i},function(t,e,n){"use strict";var o=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var o,r,i=n.call(t),s=[];try{for(;(void 0===e||0<e--)&&!(o=i.next()).done;)s.push(o.value)}catch(t){r={error:t}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}return s},a=this&&this.__spread||function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(o(arguments[e]));return t};Object.defineProperty(e,"__esModule",{value:!0});var r=n(7),i=n(0),s=n(8),l=n(27),c=n(1),g=(Object.defineProperty(I.prototype,"entities",{get:function(){return this._entities},enumerable:!0,configurable:!0}),Object.defineProperty(I.prototype,"disposableComponents",{get:function(){return this._disposableComponents},enumerable:!0,configurable:!0}),I.prototype.addEntity=function(t){var e=t.getParent();if(t.isAddedToEngine())return c.log("The entity is already in the engine. Please fix this"),t;for(var n in t.eventManager=this.eventManager,(t.engine=this)._entities[t.uuid]=t,this.checkRequirementsAndAdd(t),e?e.isAddedToEngine()||c.log("Engine: warning, added an entity with a parent not present in the engine"):t.setParent(this.rootEntity),t.alive=!0,t.children){var o=t.children[n];o&&(o.isAddedToEngine()||this.addEntity(o))}return t},I.prototype.removeEntity=function(t){var e=t.uuid;if(t.isAddedToEngine()){for(var n in t.components){var o=this._componentGroups[n];if(o)for(var r in o)o[r].removeEntity(t);delete this.entityLists[n][e]}for(var i=0;i<this.simpleSystems.length;i++){var s=this.simpleSystems[i];s.onRemoveEntity&&s.onRemoveEntity(t)}for(var i in t.children){var g=t.children[i];g&&this.removeEntity(g)}return t.alive=!1,t.eventManager=null,delete this._entities[e],!0}for(var n in c.log("Engine: Trying to remove non existent entity from engine."),t.isAddedToEngine()?c.log("Engine: Entity id: "+e):c.log('Engine: Entity "'+t.uuid+'" has not been added to any engine yet.'),c.log("Engine: Entity's components:"),t.components)c.log(n);return!1},I.prototype.addSystem=function(t,e){if(void 0===e&&(e=0),-1!==this.addedSystems.indexOf(t))return c.log("Engine: Trying to add a system that is already added. Aborting"),t;if(0<this.systems.length)for(var n=0;n<this.systems.length;n++){var o=this.systems[n],r=n===this.systems.length-1;if(o.priority>e){this.addedSystems.push(t),this.systems.splice(n,0,{system:t,priority:e});break}if(r){this.addedSystems.push(t),this.systems.splice(n+1,0,{system:t,priority:e});break}}else this.addedSystems.push(t),this.systems.splice(1,0,{system:t,priority:e});return this.registerSystem(t),t},I.prototype.removeSystem=function(t){var e=this.addedSystems.indexOf(t);if(-1===e)return!1;t.active=!1,t.deactivate&&t.deactivate(),this.addedSystems.splice(e,1);for(var n=0;n<this.systems.length;n++)this.systems[n].system===t&&this.systems.splice(n,1);return!0},I.prototype.update=function(t){for(var e in this.systems){var n=this.systems[e].system;if(n.active&&n.update)try{n.update(t)}catch(t){c.error(t)}}return this},I.prototype.getEntitiesWithComponent=function(t){var e="string"==typeof t?t:i.getComponentName(t);return e in this.entityLists?this.entityLists[e]:this.entityLists[e]={}},I.prototype.registerComponent=function(t){var e=i.getComponentId(t),n=i.getComponentName(t),o=i.getComponentClassId(t);this._disposableComponents[e]=t,null!==o&&(this.eventManager.fireEvent(new i.DisposableComponentCreated(e,n,o)),this.eventManager.fireEvent(new i.DisposableComponentUpdated(e,t)))},I.prototype.disposeComponent=function(t){var e=i.getComponentId(t);return delete this._disposableComponents[e]&&(this.eventManager.fireEvent(new i.DisposableComponentRemoved(e)),t.onDispose&&t.onDispose(),!0)},I.prototype.updateComponent=function(t){this.eventManager.fireEvent(new i.DisposableComponentUpdated(i.getComponentId(t),t))},I.prototype.getComponentGroup=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=new(l.ComponentGroup.bind.apply(l.ComponentGroup,a([void 0],t)));n.active=!0;for(var o=n.requiresNames,r=0;r<o.length;r++){var i=o[r],s=this._componentGroups[i];s||(this._componentGroups[i]=s=[]),-1===s.indexOf(n)&&s.push(n)}for(var g in this._entities)this.checkRequirements(this._entities[g],n);return n},I.prototype.removeComponentGroup=function(t){if(t.active){t.active=!1;for(var e=t.requiresNames,n=0;n<e.length;n++){var o=e[n],r=this._componentGroups[o];if(r){var i=r.indexOf(t);-1!==i&&r.splice(i,1)}}return!0}return!1},I.prototype.registerSystem=function(t){t.active=!0,t.activate&&t.activate(this),this.simpleSystems.push(t)},I.prototype.checkRequirementsAndAdd=function(t){if(t.isAddedToEngine()){for(var e in t.components){e in this.entityLists||(this.entityLists[e]={}),this.entityLists[e][t.uuid]=t;var n=this._componentGroups[e];if(n)for(var o in n)this.checkRequirements(t,n[o])}for(var r=0;r<this.simpleSystems.length;r++){var i=this.simpleSystems[r];i.onAddEntity&&i.onAddEntity(t)}}},I.prototype.checkRequirements=function(t,e){e.meetsRequirements(t)?e.hasEntity(t)||e.addEntity(t):e.hasEntity(t)&&e.removeEntity(t)},I.prototype.componentAddedHandler=function(t){var e,n=t.entity,o=t.componentName;if(n.isAddedToEngine()){this.entityLists[o]?this.entityLists[o][n.uuid]=n:this.entityLists[o]=((e={})[n.uuid]=n,e);var r=this._componentGroups[o];if(r)for(var i in r)this.checkRequirements(n,r[i])}},I.prototype.componentRemovedHandler=function(t){var e=t.entity,n=t.componentName;if(e.isAddedToEngine()){delete this.entityLists[n][e.uuid];var o=this._componentGroups[n];if(o)for(var r in o)this.checkRequirements(e,o[r])}},I);function I(t){this.eventManager=new s.EventManager,this.systems=[],this.entityLists={},this.addedSystems=[],this._entities={},this._disposableComponents={},this._componentGroups={},this.simpleSystems=[],this.eventManager.addListener(r.ComponentAdded,this,this.componentAddedHandler),this.eventManager.addListener(r.ComponentRemoved,this,this.componentRemovedHandler),this.rootEntity=t}e.Engine=g},function(t,e,n){"use strict";var o,r;Object.defineProperty(e,"__esModule",{value:!0}),(r=o=e.UIValueType||(e.UIValueType={}))[r.PERCENT=0]="PERCENT",r[r.PIXELS=1]="PIXELS";var i=(s.prototype.toString=function(){var t=this.value.toString();return this.type===o.PERCENT?t+="%":t+="px",t},s);function s(t){if(this.type=o.PIXELS,"string"==typeof t){var e=t;-1<e.indexOf("px")?this.type=o.PIXELS:-1<e.indexOf("%")&&(this.type=o.PERCENT),this.value=parseFloat(e)}else this.value=t}e.UIValue=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(0),s=n(7),g=n(1),o=(r.prototype.addComponentOrReplace=function(t){if("function"==typeof t)throw new Error("You passed a function or class as a component, an instance of component is expected");if("object"!=typeof t)throw new Error("You passed a "+typeof t+", an instance of component is expected");var e=i.getComponentName(t);if(this.components[e]){if(this.components[e]===t)return t;this.removeComponent(this.components[e],!1)}return this.addComponent(t)},r.prototype.hasComponent=function(t){var e=typeof t;if("string"!=e&&"object"!=e&&"function"!=e)throw new Error("Entity#has(component): component is not a class, name or instance");if(null==t)return!1;var n="string"==e?t:i.getComponentName(t),o=this.components[n];return!!o&&("object"==e?o===t:"function"!=e||o instanceof t)},r.prototype.getComponent=function(t){var e=typeof t;if("string"!=e&&"function"!=e)throw new Error("Entity#get(component): component is not a class or name");var n="string"==e?t:i.getComponentName(t),o=this.components[n];if(!o)throw new Error('Can not get component "'+n+'" from entity "'+this.identifier+'"');if("function"!=e)return o;if(o instanceof t)return o;throw new Error('Can not get component "'+n+'" from entity "'+this.identifier+'" (by instance)')},r.prototype.getComponentOrNull=function(t){var e=typeof t;if("string"!=e&&"function"!=e)throw new Error("Entity#getOrNull(component): component is not a class or name");var n="string"==e?t:i.getComponentName(t),o=this.components[n];return o?"function"==e?o instanceof t?o:null:o:null},r.prototype.getComponentOrCreate=function(t){if("function"!=typeof t)throw new Error("Entity#getOrCreate(component): component is not a class");var e=this.getComponentOrNull(t);return e||(e=new t,i.getComponentName(e),this.addComponentOrReplace(e)),e},r.prototype.addComponent=function(t){if("object"!=typeof t)throw new Error("Entity#add(component): You passed a function or class as a component, an instance of component is expected");var e=i.getComponentName(t),n=i.getComponentClassId(t);if(this.components[e])throw new Error('A component of type "'+e+'" is already present in entity "'+this.identifier+'"');this.components[e]=t,this.eventManager&&this.eventManager.fireEvent(new s.ComponentAdded(this,e,n));var o=t;return"function"==typeof o.addedToEntity&&o.addedToEntity(this),t},r.prototype.removeComponent=function(t,e){void 0===e&&(e=!0);var n=typeof t;if("string"!=n&&"function"!=n&&"object"!=n)throw new Error("Entity#remove(component): component is not a class, class or name");var o="string"==n?t:i.getComponentName(t),r=this.components[o];if(r){if("function"==n)return r instanceof t?(delete this.components[o],void(r&&(e&&this.eventManager&&this.eventManager.fireEvent(new s.ComponentRemoved(this,o,r)),"function"==typeof r.removedFromEntity&&r.removedFromEntity(this)))):void g.log('Entity Warning: Trying to remove wrong (by constructor) component "'+o+'" from entity "'+this.identifier+'"');delete this.components[o],r&&(e&&this.eventManager&&this.eventManager.fireEvent(new s.ComponentRemoved(this,o,r)),"function"==typeof r.removedFromEntity&&r.removedFromEntity(this))}else g.log('Entity Warning: Trying to remove inexisting component "'+o+'" from entity "'+this.identifier+'"')},r.prototype.isAddedToEngine=function(){return!!(this.engine&&this.uuid in this.engine.entities)},r.prototype.setParent=function(t){var e=!t&&this.engine?this.engine.rootEntity:t,n=this.getParent();if(t===this)throw new Error('Failed to set parent for entity "'+this.identifier+"\": An entity can't set itself as a its own parent");if(t===n)return this;var o=this.getCircularAncestor(t);if(o)throw new Error('Failed to set parent for entity "'+this.identifier+'": Circular parent references are not allowed (See entity "'+o+'")');return n&&delete n.children[this.uuid],"0"!==t.uuid&&(!t.isAddedToEngine()&&this.isAddedToEngine()&&this.engine.removeEntity(this),t.isAddedToEngine()&&!this.isAddedToEngine()&&t.engine.addEntity(this)),this._parent=e||null,this.registerAsChild(),this.eventManager&&this.engine&&this.eventManager.fireEvent(new s.ParentChanged(this,e)),this},r.prototype.getParent=function(){return this._parent},Object.defineProperty(r.prototype,"identifier",{get:function(){return this.name||this.uuid},enumerable:!0,configurable:!0}),r.prototype.getCircularAncestor=function(t){for(var e=this.engine?this.engine.rootEntity:null,n=t;n&&n!==e;){var o=n.getParent();if(o===this)return n.uuid;n=o}return null},r.prototype.registerAsChild=function(){var t=this.getParent();this.uuid&&t&&(t.children[this.uuid]=this)},r);function r(t){this.name=t,this.children={},this.eventManager=null,this.alive=!1,this.uuid=g.newId("E"),this.components={},this.engine=null,this._parent=null}e.Entity=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(1),r=Promise.resolve().then.bind(Promise.resolve());e.executeTask=function(t){var e=r(t);return e.isComplete=!1,e.then(function(t){e.isComplete=!0,e.result=t,e.didFail=!1}).catch(function(t){e.isComplete=!0,e.error=t,e.didFail=!0,o.error("executeTask: FAILED "+t.toString(),t)}),e}},function(t,e,n){"use strict";var o=this&&this.__awaiter||function(i,s,g,a){return new(g=g||Promise)(function(t,e){function n(t){try{r(a.next(t))}catch(t){e(t)}}function o(t){try{r(a.throw(t))}catch(t){e(t)}}function r(e){e.done?t(e.value):new g(function(t){t(e.value)}).then(n,o)}r((a=a.apply(i,s||[])).next())})},r=this&&this.__generator||function(n,o){var r,i,s,t,g={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return t={next:e(0),throw:e(1),return:e(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(e){return function(t){return function(e){if(r)throw new TypeError("Generator is already executing.");for(;g;)try{if(r=1,i&&(s=2&e[0]?i.return:e[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,e[1])).done)return s;switch(i=0,s&&(e=[2&e[0],s.value]),e[0]){case 0:case 1:s=e;break;case 4:return g.label++,{value:e[1],done:!1};case 5:g.label++,i=e[1],e=[0];continue;case 7:e=g.ops.pop(),g.trys.pop();continue;default:if(!(s=0<(s=g.trys).length&&s[s.length-1])&&(6===e[0]||2===e[0])){g=0;continue}if(3===e[0]&&(!s||e[1]>s[0]&&e[1]<s[3])){g.label=e[1];break}if(6===e[0]&&g.label<s[1]){g.label=s[1],s=e;break}if(s&&g.label<s[2]){g.label=s[2],g.ops.push(e);break}s[2]&&g.ops.pop(),g.trys.pop();continue}e=o.call(n,g)}catch(t){e=[6,t],i=0}finally{r=s=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}},c=this&&this.__values||function(t){var e="function"==typeof Symbol&&t[Symbol.iterator],n=0;return e?e.call(t):{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}};Object.defineProperty(e,"__esModule",{value:!0});var i=n(18),s=(g.prototype.initalize=function(t,e,n,o){return void 0===e&&(e=!1),this.mask=t,this.skipNextObservers=e,this.target=n,this.currentTarget=o,this},g);function g(t,e,n,o){void 0===e&&(e=!1),this.initalize(t,e,n,o)}e.ObserverEventState=s;var a=function(t,e,n){void 0===n&&(n=null),this.callback=t,this.mask=e,this.scope=n,this.unregisterOnNextCall=!1,this._willBeUnregistered=!1};e.Observer=a;var l=(I.Watch=function(t,e,n,o){var r,i;void 0===n&&(n=-1),void 0===o&&(o=null);var s=new I;s._observers=new Array,s._observables=t;try{for(var g=c(t),a=g.next();!a.done;a=g.next()){var l=a.value.add(e,n,!1,o);l&&s._observers.push(l)}}catch(t){r={error:t}}finally{try{a&&!a.done&&(i=g.return)&&i.call(g)}finally{if(r)throw r.error}}return s},I.prototype.dispose=function(){if(this._observers&&this._observables)for(var t=0;t<this._observers.length;t++)this._observables[t].remove(this._observers[t]);this._observers=null,this._observables=null},I);function I(){this._observers=null,this._observables=null}e.MultiObserver=l;var C=(d.prototype.add=function(t,e,n,o,r){if(void 0===e&&(e=-1),void 0===n&&(n=!1),void 0===o&&(o=null),void 0===r&&(r=!1),!t)return null;var i=new a(t,e,o);return i.unregisterOnNextCall=r,n?this._observers.unshift(i):this._observers.push(i),this._onObserverAdded&&this._onObserverAdded(i),i},d.prototype.addOnce=function(t){return this.add(t,void 0,void 0,void 0,!0)},d.prototype.remove=function(t){return!!t&&-1!==this._observers.indexOf(t)&&(this._deferUnregister(t),!0)},d.prototype.removeCallback=function(t,e){for(var n=0;n<this._observers.length;n++)if(this._observers[n].callback===t&&(!e||e===this._observers[n].scope))return this._deferUnregister(this._observers[n]),!0;return!1},d.prototype.notifyObservers=function(t,e,n,o){var r,i;if(void 0===e&&(e=-1),!this._observers.length)return!0;var s=this._eventState;s.mask=e,s.target=n,s.currentTarget=o,s.skipNextObservers=!1,s.lastReturnValue=t;try{for(var g=c(this._observers),a=g.next();!a.done;a=g.next()){var l=a.value;if(!l._willBeUnregistered&&(l.mask&e&&(l.scope?s.lastReturnValue=l.callback.apply(l.scope,[t,s]):s.lastReturnValue=l.callback(t,s),l.unregisterOnNextCall&&this._deferUnregister(l)),s.skipNextObservers))return!1}}catch(t){r={error:t}}finally{try{a&&!a.done&&(i=g.return)&&i.call(g)}finally{if(r)throw r.error}}return!0},d.prototype.notifyObserversWithPromise=function(n,t,e,o){var r=this;void 0===t&&(t=-1);var i=Promise.resolve(n);if(!this._observers.length)return i;var s=this._eventState;return s.mask=t,s.target=e,s.currentTarget=o,s.skipNextObservers=!1,this._observers.forEach(function(e){s.skipNextObservers||e._willBeUnregistered||e.mask&t&&(i=e.scope?i.then(function(t){return s.lastReturnValue=t,e.callback.apply(e.scope,[n,s])}):i.then(function(t){return s.lastReturnValue=t,e.callback(n,s)}),e.unregisterOnNextCall&&r._deferUnregister(e))}),i.then(function(){return n})},d.prototype.notifyObserver=function(t,e,n){void 0===n&&(n=-1);var o=this._eventState;o.mask=n,o.skipNextObservers=!1,t.callback(e,o)},d.prototype.hasObservers=function(){return 0<this._observers.length},d.prototype.clear=function(){this._observers=new Array,this._onObserverAdded=null},d.prototype.clone=function(){var t=new d;return t._observers=this._observers.slice(0),t},d.prototype.hasSpecificMask=function(t){var e,n;void 0===t&&(t=-1);try{for(var o=c(this._observers),r=o.next();!r.done;r=o.next()){var i=r.value;if(i.mask&t||i.mask===t)return!0}}catch(t){e={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(e)throw e.error}}return!1},d.prototype._deferUnregister=function(e){var t=this;e.unregisterOnNextCall=!1,e._willBeUnregistered=!0,i.executeTask(function(){return o(t,void 0,void 0,function(){return r(this,function(t){return[2,this._remove(e)]})})})},d.prototype._remove=function(t){if(!t)return!1;var e=this._observers.indexOf(t);return-1!==e&&(this._observers.splice(e,1),!0)},d);function d(t){this._observers=new Array,this._onObserverAdded=null,this._eventState=new s(0),t&&(this._onObserverAdded=t)}e.Observable=C},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(2),r=n(4),i=n(3),s=(g.Add=function(t,e){return new g(t.x,t.y,t.z,t.w).addInPlace(e)},g.FromArray=function(t,e){return void 0===e&&(e=0),new g(t[e],t[e+1],t[e+2],t[e+3])},g.FromArrayToRef=function(t,e,n){n.x=t[e],n.y=t[e+1],n.z=t[e+2],n.w=t[e+3]},g.FromFloatArrayToRef=function(t,e,n){g.FromArrayToRef(t,e,n)},g.FromFloatsToRef=function(t,e,n,o,r){r.x=t,r.y=e,r.z=n,r.w=o},g.Zero=function(){return new g(0,0,0,0)},g.One=function(){return new g(1,1,1,1)},g.Normalize=function(t){var e=g.Zero();return g.NormalizeToRef(t,e),e},g.NormalizeToRef=function(t,e){e.copyFrom(t),e.normalize()},g.Minimize=function(t,e){var n=new g(t.x,t.y,t.z,t.w);return n.minimizeInPlace(e),n},g.Maximize=function(t,e){var n=new g(t.x,t.y,t.z,t.w);return n.maximizeInPlace(e),n},g.Distance=function(t,e){return Math.sqrt(g.DistanceSquared(t,e))},g.DistanceSquared=function(t,e){var n=t.x-e.x,o=t.y-e.y,r=t.z-e.z,i=t.w-e.w;return n*n+o*o+r*r+i*i},g.Center=function(t,e){var n=g.Add(t,e);return n.scaleInPlace(.5),n},g.TransformNormal=function(t,e){var n=g.Zero();return g.TransformNormalToRef(t,e,n),n},g.TransformNormalToRef=function(t,e,n){var o=e.m,r=t.x*o[0]+t.y*o[4]+t.z*o[8],i=t.x*o[1]+t.y*o[5]+t.z*o[9],s=t.x*o[2]+t.y*o[6]+t.z*o[10];n.x=r,n.y=i,n.z=s,n.w=t.w},g.TransformNormalFromFloatsToRef=function(t,e,n,o,r,i){var s=r.m;i.x=t*s[0]+e*s[4]+n*s[8],i.y=t*s[1]+e*s[5]+n*s[9],i.z=t*s[2]+e*s[6]+n*s[10],i.w=o},g.prototype.toString=function(){return"{X: "+this.x+" Y:"+this.y+" Z:"+this.z+" W:"+this.w+"}"},g.prototype.getClassName=function(){return"Vector4"},g.prototype.getHashCode=function(){var t=this.x||0;return 397*(t=397*(t=397*t^(this.y||0))^(this.z||0))^(this.w||0)},g.prototype.asArray=function(){var t=new Array;return this.toArray(t,0),t},g.prototype.toArray=function(t,e){return void 0===e&&(e=0),t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t[e+3]=this.w,this},g.prototype.addInPlace=function(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w,this},g.prototype.add=function(t){return new g(this.x+t.x,this.y+t.y,this.z+t.z,this.w+t.w)},g.prototype.addToRef=function(t,e){return e.x=this.x+t.x,e.y=this.y+t.y,e.z=this.z+t.z,e.w=this.w+t.w,this},g.prototype.subtractInPlace=function(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this.w-=t.w,this},g.prototype.subtract=function(t){return new g(this.x-t.x,this.y-t.y,this.z-t.z,this.w-t.w)},g.prototype.subtractToRef=function(t,e){return e.x=this.x-t.x,e.y=this.y-t.y,e.z=this.z-t.z,e.w=this.w-t.w,this},g.prototype.subtractFromFloats=function(t,e,n,o){return new g(this.x-t,this.y-e,this.z-n,this.w-o)},g.prototype.subtractFromFloatsToRef=function(t,e,n,o,r){return r.x=this.x-t,r.y=this.y-e,r.z=this.z-n,r.w=this.w-o,this},g.prototype.negate=function(){return new g(-this.x,-this.y,-this.z,-this.w)},g.prototype.scaleInPlace=function(t){return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this},g.prototype.scale=function(t){return new g(this.x*t,this.y*t,this.z*t,this.w*t)},g.prototype.scaleToRef=function(t,e){return e.x=this.x*t,e.y=this.y*t,e.z=this.z*t,e.w=this.w*t,this},g.prototype.scaleAndAddToRef=function(t,e){return e.x+=this.x*t,e.y+=this.y*t,e.z+=this.z*t,e.w+=this.w*t,this},g.prototype.equals=function(t){return t&&this.x===t.x&&this.y===t.y&&this.z===t.z&&this.w===t.w},g.prototype.equalsWithEpsilon=function(t,e){return void 0===e&&(e=o.Epsilon),t&&r.Scalar.WithinEpsilon(this.x,t.x,e)&&r.Scalar.WithinEpsilon(this.y,t.y,e)&&r.Scalar.WithinEpsilon(this.z,t.z,e)&&r.Scalar.WithinEpsilon(this.w,t.w,e)},g.prototype.equalsToFloats=function(t,e,n,o){return this.x===t&&this.y===e&&this.z===n&&this.w===o},g.prototype.multiplyInPlace=function(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this.w*=t.w,this},g.prototype.multiply=function(t){return new g(this.x*t.x,this.y*t.y,this.z*t.z,this.w*t.w)},g.prototype.multiplyToRef=function(t,e){return e.x=this.x*t.x,e.y=this.y*t.y,e.z=this.z*t.z,e.w=this.w*t.w,this},g.prototype.multiplyByFloats=function(t,e,n,o){return new g(this.x*t,this.y*e,this.z*n,this.w*o)},g.prototype.divide=function(t){return new g(this.x/t.x,this.y/t.y,this.z/t.z,this.w/t.w)},g.prototype.divideToRef=function(t,e){return e.x=this.x/t.x,e.y=this.y/t.y,e.z=this.z/t.z,e.w=this.w/t.w,this},g.prototype.divideInPlace=function(t){return this.divideToRef(t,this)},g.prototype.minimizeInPlace=function(t){return t.x<this.x&&(this.x=t.x),t.y<this.y&&(this.y=t.y),t.z<this.z&&(this.z=t.z),t.w<this.w&&(this.w=t.w),this},g.prototype.maximizeInPlace=function(t){return t.x>this.x&&(this.x=t.x),t.y>this.y&&(this.y=t.y),t.z>this.z&&(this.z=t.z),t.w>this.w&&(this.w=t.w),this},g.prototype.floor=function(){return new g(Math.floor(this.x),Math.floor(this.y),Math.floor(this.z),Math.floor(this.w))},g.prototype.fract=function(){return new g(this.x-Math.floor(this.x),this.y-Math.floor(this.y),this.z-Math.floor(this.z),this.w-Math.floor(this.w))},g.prototype.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},g.prototype.lengthSquared=function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},g.prototype.normalize=function(){var t=this.length();return 0===t?this:this.scaleInPlace(1/t)},g.prototype.toVector3=function(){return new i.Vector3(this.x,this.y,this.z)},g.prototype.clone=function(){return new g(this.x,this.y,this.z,this.w)},g.prototype.copyFrom=function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=t.w,this},g.prototype.copyFromFloats=function(t,e,n,o){return this.x=t,this.y=e,this.z=n,this.w=o,this},g.prototype.set=function(t,e,n,o){return this.copyFromFloats(t,e,n,o)},g.prototype.setAll=function(t){return this.x=this.y=this.z=this.w=t,this},g);function g(t,e,n,o){this.x=t,this.y=e,this.z=n,this.w=o}e.Vector4=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=(r.BetweenTwoPoints=function(t,e){var n=e.subtract(t);return new r(Math.atan2(n.y,n.x))},r.FromRadians=function(t){return new r(t)},r.FromDegrees=function(t){return new r(t*Math.PI/180)},r.prototype.degrees=function(){return 180*this._radians/Math.PI},r.prototype.radians=function(){return this._radians},r);function r(t){this._radians=t,this._radians<0&&(this._radians+=2*Math.PI)}e.Angle=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});function o(t,e,n){this.startPoint=t,this.midPoint=e,this.endPoint=n;var o=Math.pow(e.x,2)+Math.pow(e.y,2),r=(Math.pow(t.x,2)+Math.pow(t.y,2)-o)/2,i=(o-Math.pow(n.x,2)-Math.pow(n.y,2))/2,s=(t.x-e.x)*(e.y-n.y)-(e.x-n.x)*(t.y-e.y);this.centerPoint=new I.Vector2((r*(e.y-n.y)-i*(t.y-e.y))/s,((t.x-e.x)*i-(e.x-n.x)*r)/s),this.radius=this.centerPoint.subtract(this.startPoint).length(),this.startAngle=c.Angle.BetweenTwoPoints(this.centerPoint,this.startPoint);var g=this.startAngle.degrees(),a=c.Angle.BetweenTwoPoints(this.centerPoint,this.midPoint).degrees(),l=c.Angle.BetweenTwoPoints(this.centerPoint,this.endPoint).degrees();180<a-g&&(a-=360),a-g<-180&&(a+=360),180<l-a&&(l-=360),l-a<-180&&(l+=360),this.orientation=a-g<0?C.Orientation.CW:C.Orientation.CCW,this.angle=c.Angle.FromDegrees(this.orientation===C.Orientation.CW?g-l:l-g)}var c=n(21),I=n(14),C=n(2);e.Arc2=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(4),o=n(2),i=(s.FromHexString=function(t){if("#"!==t.substring(0,1)||9!==t.length)return new s(0,0,0,0);var e=parseInt(t.substring(1,3),16),n=parseInt(t.substring(3,5),16),o=parseInt(t.substring(5,7),16),r=parseInt(t.substring(7,9),16);return s.FromInts(e,n,o,r)},s.Lerp=function(t,e,n){var o=new s(0,0,0,0);return s.LerpToRef(t,e,n,o),o},s.LerpToRef=function(t,e,n,o){o.r=t.r+(e.r-t.r)*n,o.g=t.g+(e.g-t.g)*n,o.b=t.b+(e.b-t.b)*n,o.a=t.a+(e.a-t.a)*n},s.Red=function(){return new s(1,0,0,1)},s.Green=function(){return new s(0,1,0,1)},s.Blue=function(){return new s(0,0,1,1)},s.Black=function(){return new s(0,0,0,1)},s.White=function(){return new s(1,1,1,1)},s.Purple=function(){return new s(.5,0,.5,1)},s.Magenta=function(){return new s(1,0,1,1)},s.Yellow=function(){return new s(1,1,0,1)},s.Gray=function(){return new s(.5,.5,.5,1)},s.Teal=function(){return new s(0,1,1,1)},s.Clear=function(){return new s(0,0,0,0)},s.FromColor3=function(t,e){return void 0===e&&(e=1),new s(t.r,t.g,t.b,e)},s.FromArray=function(t,e){return void 0===e&&(e=0),new s(t[e],t[e+1],t[e+2],t[e+3])},s.FromInts=function(t,e,n,o){return new s(t/255,e/255,n/255,o/255)},s.CheckColors4=function(t,e){if(t.length!==3*e)return t;for(var n=[],o=0;o<t.length;o+=3){var r=o/3*4;n[r]=t[o],n[1+r]=t[o+1],n[2+r]=t[o+2],n[3+r]=1}return n},s.prototype.addInPlace=function(t){return this.r+=t.r,this.g+=t.g,this.b+=t.b,this.a+=t.a,this},s.prototype.asArray=function(){var t=new Array;return this.toArray(t,0),t},s.prototype.toArray=function(t,e){return void 0===e&&(e=0),t[e]=this.r,t[e+1]=this.g,t[e+2]=this.b,t[e+3]=this.a,this},s.prototype.add=function(t){return new s(this.r+t.r,this.g+t.g,this.b+t.b,this.a+t.a)},s.prototype.subtract=function(t){return new s(this.r-t.r,this.g-t.g,this.b-t.b,this.a-t.a)},s.prototype.subtractToRef=function(t,e){return e.r=this.r-t.r,e.g=this.g-t.g,e.b=this.b-t.b,e.a=this.a-t.a,this},s.prototype.scale=function(t){return new s(this.r*t,this.g*t,this.b*t,this.a*t)},s.prototype.scaleToRef=function(t,e){return e.r=this.r*t,e.g=this.g*t,e.b=this.b*t,e.a=this.a*t,this},s.prototype.scaleAndAddToRef=function(t,e){return e.r+=this.r*t,e.g+=this.g*t,e.b+=this.b*t,e.a+=this.a*t,this},s.prototype.clampToRef=function(t,e,n){return void 0===t&&(t=0),void 0===e&&(e=1),n.r=r.Scalar.Clamp(this.r,t,e),n.g=r.Scalar.Clamp(this.g,t,e),n.b=r.Scalar.Clamp(this.b,t,e),n.a=r.Scalar.Clamp(this.a,t,e),this},s.prototype.multiply=function(t){return new s(this.r*t.r,this.g*t.g,this.b*t.b,this.a*t.a)},s.prototype.multiplyToRef=function(t,e){return e.r=this.r*t.r,e.g=this.g*t.g,e.b=this.b*t.b,e.a=this.a*t.a,e},s.prototype.toString=function(){return"{R: "+this.r+" G:"+this.g+" B:"+this.b+" A:"+this.a+"}"},s.prototype.getClassName=function(){return"Color4"},s.prototype.getHashCode=function(){var t=this.r||0;return 397*(t=397*(t=397*t^(this.g||0))^(this.b||0))^(this.a||0)},s.prototype.clone=function(){return new s(this.r,this.g,this.b,this.a)},s.prototype.copyFrom=function(t){return this.r=t.r,this.g=t.g,this.b=t.b,this.a=t.a,this},s.prototype.copyFromFloats=function(t,e,n,o){return this.r=t,this.g=e,this.b=n,this.a=o,this},s.prototype.set=function(t,e,n,o){return this.copyFromFloats(t,e,n,o)},s.prototype.toHexString=function(){var t=255*this.r|0,e=255*this.g|0,n=255*this.b|0,o=255*this.a|0;return"#"+r.Scalar.ToHex(t)+r.Scalar.ToHex(e)+r.Scalar.ToHex(n)+r.Scalar.ToHex(o)},s.prototype.toLinearSpace=function(){var t=new s;return this.toLinearSpaceToRef(t),t},s.prototype.toLinearSpaceToRef=function(t){return t.r=Math.pow(this.r,o.ToLinearSpace),t.g=Math.pow(this.g,o.ToLinearSpace),t.b=Math.pow(this.b,o.ToLinearSpace),t.a=this.a,this},s.prototype.toGammaSpace=function(){var t=new s;return this.toGammaSpaceToRef(t),t},s.prototype.toGammaSpaceToRef=function(t){return t.r=Math.pow(this.r,o.ToGammaSpace),t.g=Math.pow(this.g,o.ToGammaSpace),t.b=Math.pow(this.b,o.ToGammaSpace),t.a=this.a,this},s);function s(t,e,n,o){void 0===t&&(t=0),void 0===e&&(e=0),void 0===n&&(n=0),void 0===o&&(o=1),this.r=t,this.g=e,this.b=n,this.a=o}e.Color4=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(3),g=n(11),a=n(9),o=(l.FromArray=function(t){return new l(t[0],t[1],t[2],t[3])},l.FromPoints=function(t,e,n){var o=new l(0,0,0,0);return o.copyFromPoints(t,e,n),o},l.FromPositionAndNormal=function(t,e){var n=new l(0,0,0,0);return e.normalize(),n.normal=e,n.d=-(e.x*t.x+e.y*t.y+e.z*t.z),n},l.SignedDistanceToPlaneFromPositionAndNormal=function(t,e,n){var o=-(e.x*t.x+e.y*t.y+e.z*t.z);return r.Vector3.Dot(n,e)+o},l.prototype.asArray=function(){return[this.normal.x,this.normal.y,this.normal.z,this.d]},l.prototype.clone=function(){return new l(this.normal.x,this.normal.y,this.normal.z,this.d)},l.prototype.getClassName=function(){return"Plane"},l.prototype.getHashCode=function(){var t=this.normal.getHashCode();return 397*t^(this.d||0)},l.prototype.normalize=function(){var t=Math.sqrt(this.normal.x*this.normal.x+this.normal.y*this.normal.y+this.normal.z*this.normal.z),e=0;return 0!==t&&(e=1/t),this.normal.x*=e,this.normal.y*=e,this.normal.z*=e,this.d*=e,this},l.prototype.transform=function(t){var e=a.MathTmp.Matrix[0];g.Matrix.TransposeToRef(t,e);var n=e.m,o=this.normal.x,r=this.normal.y,i=this.normal.z,s=this.d;return new l(o*n[0]+r*n[1]+i*n[2]+s*n[3],o*n[4]+r*n[5]+i*n[6]+s*n[7],o*n[8]+r*n[9]+i*n[10]+s*n[11],o*n[12]+r*n[13]+i*n[14]+s*n[15])},l.prototype.dotCoordinate=function(t){return this.normal.x*t.x+this.normal.y*t.y+this.normal.z*t.z+this.d},l.prototype.copyFromPoints=function(t,e,n){var o,r=e.x-t.x,i=e.y-t.y,s=e.z-t.z,g=n.x-t.x,a=n.y-t.y,l=n.z-t.z,c=i*l-s*a,I=s*g-r*l,C=r*a-i*g,d=Math.sqrt(c*c+I*I+C*C);return o=0!==d?1/d:0,this.normal.x=c*o,this.normal.y=I*o,this.normal.z=C*o,this.d=-(this.normal.x*t.x+this.normal.y*t.y+this.normal.z*t.z),this},l.prototype.isFrontFacingTo=function(t,e){return r.Vector3.Dot(this.normal,t)<=e},l.prototype.signedDistanceTo=function(t){return r.Vector3.Dot(t,this.normal)+this.d},l);function l(t,e,n,o){this.normal=new r.Vector3(t,e,n),this.d=o}e.Plane=o},function(t,e,n){"use strict";var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__assign||function(){return(i=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)},s=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,s=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,o);else for(var g=t.length-1;0<=g;g--)(r=t[g])&&(s=(i<3?r(s):3<i?r(e,n,s):r(e,n))||s);return 3<i&&s&&Object.defineProperty(e,n,s),s};Object.defineProperty(e,"__esModule",{value:!0});var g,a=n(0),l=n(1),c={looping:!0,speed:1,weight:1},I=(g=a.ObservableComponent,r(C,g),C.prototype.setParams=function(t){return this.looping=void 0!==t.looping?t.looping:this.looping,this.speed=t.speed||this.speed,this},C.prototype.toJSON=function(){var t=JSON.parse(JSON.stringify(g.prototype.toJSON.call(this)));return this.shouldReset&&(this.shouldReset=!1),t},C.prototype.play=function(){this.playing=!0},C.prototype.pause=function(){this.playing=!1},C.prototype.reset=function(){this.shouldReset=!0},C.prototype.stop=function(){this.reset(),this.pause()},s([a.ObservableComponent.readonly],C.prototype,"clip",void 0),s([a.ObservableComponent.field],C.prototype,"looping",void 0),s([a.ObservableComponent.field],C.prototype,"weight",void 0),s([a.ObservableComponent.field],C.prototype,"playing",void 0),s([a.ObservableComponent.field],C.prototype,"shouldReset",void 0),s([a.ObservableComponent.field],C.prototype,"speed",void 0),s([a.ObservableComponent.readonly],C.prototype,"name",void 0),C);function C(t,e){void 0===e&&(e=c);var n=g.call(this)||this;return n.isAnimationClip=!0,n.looping=c.looping,n.weight=c.weight,n.playing=!1,n.shouldReset=!1,n.speed=c.speed,n.name=l.newId("AnimClip"),n.clip=t,n.setParams(i({},e)),n}e.AnimationState=I},function(t,n,e){"use strict";function o(t){for(var e in t)n.hasOwnProperty(e)||(n[e]=t[e])}Object.defineProperty(n,"__esModule",{value:!0}),o(e(15)),o(e(0)),o(e(17)),o(e(7)),o(e(18)),o(e(1)),o(e(19)),o(e(16)),o(e(8));var r=e(28),i=e(15),s=new(e(17).Entity)("scene");s.uuid="0";var g=new i.Engine(s);n.engine=g,e(0).DisposableComponent.engine=g,"undefined"!=typeof dcl&&g.addSystem(new r.DecentralandSynchronizationSystem(dcl),1/0);var a=e(13);g.addSystem(a.uuidEventSystem),o(e(37)),o(e(5)),o(e(13)),o(e(12)),o(e(38)),o(e(6)),o(e(25)),o(e(39)),o(e(40)),o(e(41)),o(e(42)),o(e(43)),o(e(44))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(0),o=(r.prototype.hasEntity=function(t){return!!t.isAddedToEngine()&&-1!==this.entities.indexOf(t)},r.prototype.addEntity=function(t){if(!t.isAddedToEngine())throw new TypeError("ComponentGroup: Cannot add a entity that is not added to the engine");-1===this.entities.indexOf(t)&&this.entities.push(t)},r.prototype.removeEntity=function(t){var e=this.entities.indexOf(t);-1!==e&&this.entities.splice(e,1)},r.prototype.componentRemoved=function(t,e){-1!==this._requiresNames.indexOf(e)&&this.removeEntity(t)},r.prototype.meetsRequirements=function(t){for(var e=0;e<this._requiresNames.length;e++)if(!(this._requiresNames[e]in t.components))return!1;return!0},r);function r(){for(var o=[],t=0;t<arguments.length;t++)o[t]=arguments[t];if(this.entities=[],this.active=!1,this._requiresNames=[],!o)throw new Error("ComponentGroup: Could not load the requires list");if(!(o instanceof Array))throw new Error("ComponentGroup: requires list is not an Array");Object.defineProperty(this,"requires",{get:function(){return o.slice()}}),Object.defineProperty(this,"requiresNames",{get:function(){return this._requiresNames.slice()}});for(var e=function(e){var t=o[e],n=null;if(!t)throw new Error("ComponentGroup: the required component at location "+e+" is invalid");try{n=i.getComponentName(t)}catch(t){throw new Error("ComponentGroup: the required component at location "+e+" is not registered as a @Component. Remember to provide the class of the component, not the name")}if(r._requiresNames.some(function(t){return t===n}))throw new Error("ComponentGroup: the required component list has a repeated name "+n);r._requiresNames.push(n)},r=this,n=0;n<o.length;n++)e(n)}e.ComponentGroup=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(7),r=n(12),a=n(0),i=(s.prototype.activate=function(n){var e=this;(this.engine=n).eventManager.addListener(o.ComponentAdded,this,this.componentAdded),n.eventManager.addListener(o.ComponentRemoved,this,this.componentRemoved),n.eventManager.addListener(a.DisposableComponentCreated,this,this.disposableComponentCreated),n.eventManager.addListener(a.DisposableComponentRemoved,this,this.disposableComponentRemoved),n.eventManager.addListener(a.DisposableComponentUpdated,this,this.disposableComponentUpdated),n.eventManager.addListener(o.ParentChanged,this,this.parentChanged);var t=n.rootEntity.uuid;this.dcl.addEntity(t),this.dcl.onUpdate(function(t){n.update(t),e.presentEntities()}),this.dcl.onEvent(function(t){switch(t.type){case"uuidEvent":var e=t.data;n.eventManager.fireEvent(new r.UUIDEvent(e.uuid,e.payload))}})},s.prototype.onAddEntity=function(t){if(t&&t.isAddedToEngine()){var e=t.uuid,n=t.getParent();for(var o in this.dcl.addEntity(e),n&&this.dcl.setParent(e,n.uuid),this.cachedComponents[e]={},t.components){var r=t.components[o],i=a.getComponentClassId(r);if(null!==i)if(a.isDisposableComponent(r))this.dcl.attachEntityComponent(t.uuid,o,a.getComponentId(r));else{var s=JSON.stringify(r);this.dcl.updateEntityComponent(e,o,i,s),this.cachedComponents[e][o]=s}}}},s.prototype.onRemoveEntity=function(t){if(t.isAddedToEngine()){var e=t.uuid;this.dcl.removeEntity(e),delete this.cachedComponents[e]}},s.prototype.presentEntities=function(){for(var t in this.engine.entities){var e=this.engine.entities[t],n=e.uuid;for(var o in e.components){var r=e.components[o],i=a.getComponentClassId(r);if(null!==i&&!a.isDisposableComponent(r)){var s=JSON.stringify(r);this.cachedComponents[n][o]!==s&&(this.dcl.updateEntityComponent(e.uuid,o,i,s),this.cachedComponents[n][o]=s)}}}for(var g in this.engine.disposableComponents)(r=this.engine.disposableComponents[g])instanceof a.ObservableComponent&&r.dirty&&(this.dcl.componentUpdated(g,JSON.stringify(r)),r.dirty=!1)},s.prototype.componentAdded=function(t){if(t.entity.isAddedToEngine()){var e=t.entity.components[t.componentName];if(a.isDisposableComponent(e))this.dcl.attachEntityComponent(t.entity.uuid,t.componentName,a.getComponentId(e));else if(null!==t.classId){var n=JSON.stringify(e);this.dcl.updateEntityComponent(t.entity.uuid,t.componentName,t.classId,n),this.cachedComponents[t.entity.uuid][t.componentName]=n}}},s.prototype.componentRemoved=function(t){t.entity.isAddedToEngine()&&this.dcl.removeEntityComponent(t.entity.uuid,t.componentName)},s.prototype.disposableComponentCreated=function(t){this.dcl.componentCreated(t.componentId,t.componentName,t.classId)},s.prototype.disposableComponentRemoved=function(t){this.dcl.componentDisposed(t.componentId)},s.prototype.disposableComponentUpdated=function(t){this.dcl.componentUpdated(t.componentId,JSON.stringify(t.component))},s.prototype.parentChanged=function(t){this.dcl.setParent(t.entity.uuid,t.parent.uuid)},s);function s(t){this.dcl=t,this.cachedComponents={}}e.DecentralandSynchronizationSystem=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(3),r=(i.X=new o.Vector3(1,0,0),i.Y=new o.Vector3(0,1,0),i.Z=new o.Vector3(0,0,1),i);function i(){}e.Axis=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=(r.Interpolate=function(t,e,n,o,r){for(var i=1-3*o+3*e,s=3*o-6*e,g=3*e,a=t,l=0;l<5;l++){var c=a*a;a-=1/(3*i*c+2*s*a+g)*(c*a*i+s*c+g*a-t),a=Math.min(1,Math.max(0,a))}return 3*Math.pow(1-a,2)*a*n+3*(1-a)*Math.pow(a,2)*r+Math.pow(a,3)},r);function r(){}e.BezierCurve=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(2),r=n(23),i=n(4),s=(g.FromHexString=function(t){if("#"!==t.substring(0,1)||7!==t.length)return new g(0,0,0);var e=parseInt(t.substring(1,3),16),n=parseInt(t.substring(3,5),16),o=parseInt(t.substring(5,7),16);return g.FromInts(e,n,o)},g.FromArray=function(t,e){return void 0===e&&(e=0),new g(t[e],t[e+1],t[e+2])},g.FromInts=function(t,e,n){return new g(t/255,e/255,n/255)},g.Lerp=function(t,e,n){var o=new g(0,0,0);return g.LerpToRef(t,e,n,o),o},g.LerpToRef=function(t,e,n,o){o.r=t.r+(e.r-t.r)*n,o.g=t.g+(e.g-t.g)*n,o.b=t.b+(e.b-t.b)*n},g.Red=function(){return new g(1,0,0)},g.Green=function(){return new g(0,1,0)},g.Blue=function(){return new g(0,0,1)},g.Black=function(){return new g(0,0,0)},g.White=function(){return new g(1,1,1)},g.Purple=function(){return new g(.5,0,.5)},g.Magenta=function(){return new g(1,0,1)},g.Yellow=function(){return new g(1,1,0)},g.Gray=function(){return new g(.5,.5,.5)},g.Teal=function(){return new g(0,1,1)},g.Random=function(){return new g(Math.random(),Math.random(),Math.random())},g.prototype.toString=function(){return"{R: "+this.r+" G:"+this.g+" B:"+this.b+"}"},g.prototype.getClassName=function(){return"Color3"},g.prototype.getHashCode=function(){var t=this.r||0;return 397*(t=397*t^(this.g||0))^(this.b||0)},g.prototype.toArray=function(t,e){return void 0===e&&(e=0),t[e]=this.r,t[e+1]=this.g,t[e+2]=this.b,this},g.prototype.toColor4=function(t){return void 0===t&&(t=1),new r.Color4(this.r,this.g,this.b,t)},g.prototype.asArray=function(){var t=new Array;return this.toArray(t,0),t},g.prototype.toLuminance=function(){return.3*this.r+.59*this.g+.11*this.b},g.prototype.multiply=function(t){return new g(this.r*t.r,this.g*t.g,this.b*t.b)},g.prototype.multiplyToRef=function(t,e){return e.r=this.r*t.r,e.g=this.g*t.g,e.b=this.b*t.b,this},g.prototype.equals=function(t){return t&&this.r===t.r&&this.g===t.g&&this.b===t.b},g.prototype.equalsFloats=function(t,e,n){return this.r===t&&this.g===e&&this.b===n},g.prototype.scale=function(t){return new g(this.r*t,this.g*t,this.b*t)},g.prototype.scaleToRef=function(t,e){return e.r=this.r*t,e.g=this.g*t,e.b=this.b*t,this},g.prototype.scaleAndAddToRef=function(t,e){return e.r+=this.r*t,e.g+=this.g*t,e.b+=this.b*t,this},g.prototype.clampToRef=function(t,e,n){return void 0===t&&(t=0),void 0===e&&(e=1),n.r=i.Scalar.Clamp(this.r,t,e),n.g=i.Scalar.Clamp(this.g,t,e),n.b=i.Scalar.Clamp(this.b,t,e),this},g.prototype.add=function(t){return new g(this.r+t.r,this.g+t.g,this.b+t.b)},g.prototype.addToRef=function(t,e){return e.r=this.r+t.r,e.g=this.g+t.g,e.b=this.b+t.b,this},g.prototype.subtract=function(t){return new g(this.r-t.r,this.g-t.g,this.b-t.b)},g.prototype.subtractToRef=function(t,e){return e.r=this.r-t.r,e.g=this.g-t.g,e.b=this.b-t.b,this},g.prototype.clone=function(){return new g(this.r,this.g,this.b)},g.prototype.copyFrom=function(t){return this.r=t.r,this.g=t.g,this.b=t.b,this},g.prototype.copyFromFloats=function(t,e,n){return this.r=t,this.g=e,this.b=n,this},g.prototype.set=function(t,e,n){return this.copyFromFloats(t,e,n)},g.prototype.toHexString=function(){var t=255*this.r|0,e=255*this.g|0,n=255*this.b|0;return"#"+i.Scalar.ToHex(t)+i.Scalar.ToHex(e)+i.Scalar.ToHex(n)},g.prototype.toLinearSpace=function(){var t=new g;return this.toLinearSpaceToRef(t),t},g.prototype.toLinearSpaceToRef=function(t){return t.r=Math.pow(this.r,o.ToLinearSpace),t.g=Math.pow(this.g,o.ToLinearSpace),t.b=Math.pow(this.b,o.ToLinearSpace),this},g.prototype.toGammaSpace=function(){var t=new g;return this.toGammaSpaceToRef(t),t},g.prototype.toGammaSpaceToRef=function(t){return t.r=Math.pow(this.r,o.ToGammaSpace),t.g=Math.pow(this.g,o.ToGammaSpace),t.b=Math.pow(this.b,o.ToGammaSpace),this},g.prototype.toJSON=function(){return{r:this.r,g:this.g,b:this.b}},g);function g(t,e,n){void 0===t&&(t=0),void 0===e&&(e=0),void 0===n&&(n=0),this.r=t,this.g=e,this.b=n}e.Color3=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var c=n(3),o=(I.CreateQuadraticBezier=function(t,e,n,o){o=2<o?o:3;for(var r=new Array,i=function(t,e,n,o){return(1-t)*(1-t)*e+2*t*(1-t)*n+t*t*o},s=0;s<=o;s++)r.push(new c.Vector3(i(s/o,t.x,e.x,n.x),i(s/o,t.y,e.y,n.y),i(s/o,t.z,e.z,n.z)));return new I(r)},I.CreateCubicBezier=function(t,e,n,o,r){r=3<r?r:4;for(var i=new Array,s=function(t,e,n,o,r){return(1-t)*(1-t)*(1-t)*e+3*t*(1-t)*(1-t)*n+3*t*t*(1-t)*o+t*t*t*r},g=0;g<=r;g++)i.push(new c.Vector3(s(g/r,t.x,e.x,n.x,o.x),s(g/r,t.y,e.y,n.y,o.y),s(g/r,t.z,e.z,n.z,o.z)));return new I(i)},I.CreateHermiteSpline=function(t,e,n,o,r){for(var i=new Array,s=1/r,g=0;g<=r;g++)i.push(c.Vector3.Hermite(t,e,n,o,g*s));return new I(i)},I.CreateCatmullRomSpline=function(t,e,n){var o=new Array,r=1/e,i=0;if(n){for(var s=t.length,g=0;g<s;g++)for(var a=i=0;a<e;a++)o.push(c.Vector3.CatmullRom(t[g%s],t[(g+1)%s],t[(g+2)%s],t[(g+3)%s],i)),i+=r;o.push(o[0])}else{var l=new Array;for(l.push(t[0].clone()),Array.prototype.push.apply(l,t),l.push(t[t.length-1].clone()),g=g=0;g<l.length-3;g++)for(a=i=0;a<e;a++)o.push(c.Vector3.CatmullRom(l[g],l[g+1],l[g+2],l[g+3],i)),i+=r;g--,o.push(c.Vector3.CatmullRom(l[g],l[g+1],l[g+2],l[g+3],i))}return new I(o)},I.prototype.getPoints=function(){return this._points},I.prototype.length=function(){return this._length},I.prototype.continue=function(t){for(var e=this._points[this._points.length-1],n=this._points.slice(),o=t.getPoints(),r=1;r<o.length;r++)n.push(o[r].subtract(o[0]).add(e));return new I(n)},I.prototype._computeLength=function(t){for(var e=0,n=1;n<t.length;n++)e+=t[n].subtract(t[n-1]).length();return e},I);function I(t){this._length=0,this._points=t,this._length=this._computeLength(t)}e.Curve3=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(24),r=(i.GetPlanes=function(t){for(var e=[],n=0;n<6;n++)e.push(new o.Plane(0,0,0,0));return i.GetPlanesToRef(t,e),e},i.GetNearPlaneToRef=function(t,e){var n=t.m;e.normal.x=n[3]+n[2],e.normal.y=n[7]+n[6],e.normal.z=n[11]+n[10],e.d=n[15]+n[14],e.normalize()},i.GetFarPlaneToRef=function(t,e){var n=t.m;e.normal.x=n[3]-n[2],e.normal.y=n[7]-n[6],e.normal.z=n[11]-n[10],e.d=n[15]-n[14],e.normalize()},i.GetLeftPlaneToRef=function(t,e){var n=t.m;e.normal.x=n[3]+n[0],e.normal.y=n[7]+n[4],e.normal.z=n[11]+n[8],e.d=n[15]+n[12],e.normalize()},i.GetRightPlaneToRef=function(t,e){var n=t.m;e.normal.x=n[3]-n[0],e.normal.y=n[7]-n[4],e.normal.z=n[11]-n[8],e.d=n[15]-n[12],e.normalize()},i.GetTopPlaneToRef=function(t,e){var n=t.m;e.normal.x=n[3]-n[1],e.normal.y=n[7]-n[5],e.normal.z=n[11]-n[9],e.d=n[15]-n[13],e.normalize()},i.GetBottomPlaneToRef=function(t,e){var n=t.m;e.normal.x=n[3]+n[1],e.normal.y=n[7]+n[5],e.normal.z=n[11]+n[9],e.d=n[15]+n[13],e.normalize()},i.GetPlanesToRef=function(t,e){i.GetNearPlaneToRef(t,e[0]),i.GetFarPlaneToRef(t,e[1]),i.GetLeftPlaneToRef(t,e[2]),i.GetRightPlaneToRef(t,e[3]),i.GetTopPlaneToRef(t,e[4]),i.GetBottomPlaneToRef(t,e[5])},i);function i(){}e.Frustum=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var B=n(14),Q=n(22),p=n(2),o=(r.StartingAt=function(t,e){return new r(t,e)},r.prototype.addLineTo=function(t,e){if(this.closed)return this;var n=new B.Vector2(t,e),o=this._points[this._points.length-1];return this._points.push(n),this._length+=n.subtract(o).length(),this},r.prototype.addArcTo=function(t,e,n,o,r){if(void 0===r&&(r=36),this.closed)return this;var i=this._points[this._points.length-1],s=new B.Vector2(t,e),g=new B.Vector2(n,o),a=new Q.Arc2(i,s,g),l=a.angle.radians()/r;a.orientation===p.Orientation.CW&&(l*=-1);for(var c=a.startAngle.radians()+l,I=0;I<r;I++){var C=Math.cos(c)*a.radius+a.centerPoint.x,d=Math.sin(c)*a.radius+a.centerPoint.y;this.addLineTo(C,d),c+=l}return this},r.prototype.close=function(){return this.closed=!0,this},r.prototype.length=function(){var t=this._length;if(!this.closed){var e=this._points[this._points.length-1];t+=this._points[0].subtract(e).length()}return t},r.prototype.getPoints=function(){return this._points},r.prototype.getPointAtLengthPosition=function(t){if(t<0||1<t)return B.Vector2.Zero();for(var e=t*this.length(),n=0,o=0;o<this._points.length;o++){var r=(o+1)%this._points.length,i=this._points[o],s=this._points[r].subtract(i),g=s.length()+n;if(n<=e&&e<=g){var a=s.normalize(),l=e-n;return new B.Vector2(i.x+a.x*l,i.y+a.y*l)}n=g}return B.Vector2.Zero()},r);function r(t,e){this.closed=!1,this._points=new Array,this._length=0,this._points.push(new B.Vector2(t,e))}e.Path2=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var l=n(3),s=n(2),g=n(4),o=(r.prototype.getCurve=function(){return this._curve},r.prototype.getTangents=function(){return this._tangents},r.prototype.getNormals=function(){return this._normals},r.prototype.getBinormals=function(){return this._binormals},r.prototype.getDistances=function(){return this._distances},r.prototype.update=function(t,e){void 0===e&&(e=null);for(var n=0;n<t.length;n++)this._curve[n].x=t[n].x,this._curve[n].y=t[n].y,this._curve[n].z=t[n].z;return this._compute(e),this},r.prototype._compute=function(t){var e=this._curve.length;this._tangents[0]=this._getFirstNonNullVector(0),this._raw||this._tangents[0].normalize(),this._tangents[e-1]=this._curve[e-1].subtract(this._curve[e-2]),this._raw||this._tangents[e-1].normalize();var n,o,r,i,s=this._tangents[0],g=this._normalVector(this._curve[0],s,t);this._normals[0]=g,this._raw||this._normals[0].normalize(),this._binormals[0]=l.Vector3.Cross(s,this._normals[0]),this._raw||this._binormals[0].normalize(),this._distances[0]=0;for(var a=1;a<e;a++)n=this._getLastNonNullVector(a),a<e-1&&(o=this._getFirstNonNullVector(a),this._tangents[a]=n.add(o),this._tangents[a].normalize()),this._distances[a]=this._distances[a-1]+n.length(),r=this._tangents[a],i=this._binormals[a-1],this._normals[a]=l.Vector3.Cross(i,r),this._raw||this._normals[a].normalize(),this._binormals[a]=l.Vector3.Cross(r,this._normals[a]),this._raw||this._binormals[a].normalize()},r.prototype._getFirstNonNullVector=function(t){for(var e=1,n=this._curve[t+e].subtract(this._curve[t]);0===n.length()&&t+e+1<this._curve.length;)e++,n=this._curve[t+e].subtract(this._curve[t]);return n},r.prototype._getLastNonNullVector=function(t){for(var e=1,n=this._curve[t].subtract(this._curve[t-e]);0===n.length()&&e+1<t;)e++,n=this._curve[t].subtract(this._curve[t-e]);return n},r.prototype._normalVector=function(t,e,n){var o,r,i=e.length();(0===i&&(i=1),null==n)?(r=g.Scalar.WithinEpsilon(Math.abs(e.y)/i,1,s.Epsilon)?g.Scalar.WithinEpsilon(Math.abs(e.x)/i,1,s.Epsilon)?g.Scalar.WithinEpsilon(Math.abs(e.z)/i,1,s.Epsilon)?l.Vector3.Zero():new l.Vector3(0,0,1):new l.Vector3(1,0,0):new l.Vector3(0,-1,0),o=l.Vector3.Cross(e,r)):(o=l.Vector3.Cross(e,n),l.Vector3.CrossToRef(o,e,o));return o.normalize(),o},r);function r(t,e,n){void 0===e&&(e=null),this.path=t,this._curve=new Array,this._distances=new Array,this._tangents=new Array,this._normals=new Array,this._binormals=new Array;for(var o=0;o<t.length;o++)this._curve[o]=t[o].clone();this._raw=n||!1,this._compute(e)}e.Path3D=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=(Object.defineProperty(r.prototype,"surface",{get:function(){return this.width*this.height},enumerable:!0,configurable:!0}),r.Zero=function(){return new r(0,0)},r.Lerp=function(t,e,n){return new r(t.width+(e.width-t.width)*n,t.height+(e.height-t.height)*n)},r.prototype.toString=function(){return"{W: "+this.width+", H: "+this.height+"}"},r.prototype.getClassName=function(){return"Size"},r.prototype.getHashCode=function(){var t=this.width||0;return 397*t^(this.height||0)},r.prototype.copyFrom=function(t){this.width=t.width,this.height=t.height},r.prototype.copyFromFloats=function(t,e){return this.width=t,this.height=e,this},r.prototype.set=function(t,e){return this.copyFromFloats(t,e)},r.prototype.multiplyByFloats=function(t,e){return new r(this.width*t,this.height*e)},r.prototype.clone=function(){return new r(this.width,this.height)},r.prototype.equals=function(t){return!!t&&this.width===t.width&&this.height===t.height},r.prototype.add=function(t){return new r(this.width+t.width,this.height+t.height)},r.prototype.subtract=function(t){return new r(this.width-t.width,this.height-t.height)},r);function r(t,e){this.width=t,this.height=e}e.Size=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AVATAR_OBSERVABLE="AVATAR_OBSERVABLE"},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(6),r=(Object.defineProperty(i,"instance",{get:function(){return i._instance||(i._instance=new i),i._instance},enumerable:!0,configurable:!0}),i.prototype.positionChanged=function(t){this.lastEventPosition=t.position},i.prototype.rotationChanged=function(t){this.lastEventRotation=t.quaternion},i);function i(){var e=this;this.position=new o.Vector3,this.rotation=new o.Quaternion,this.lastEventPosition={x:0,y:0,z:0},this.lastEventRotation={x:0,y:0,z:0,w:1},"undefined"!=typeof dcl&&(dcl.subscribe("positionChanged"),dcl.subscribe("rotationChanged"),dcl.onEvent(function(t){switch(t.type){case"positionChanged":e.positionChanged(t.data);break;case"rotationChanged":e.rotationChanged(t.data)}})),Object.defineProperty(this.position,"x",{get:function(){return e.lastEventPosition.x}}),Object.defineProperty(this.position,"y",{get:function(){return e.lastEventPosition.y}}),Object.defineProperty(this.position,"z",{get:function(){return e.lastEventPosition.z}}),Object.defineProperty(this.rotation,"x",{get:function(){return e.lastEventRotation.x}}),Object.defineProperty(this.rotation,"y",{get:function(){return e.lastEventRotation.y}}),Object.defineProperty(this.rotation,"z",{get:function(){return e.lastEventRotation.z}}),Object.defineProperty(this.rotation,"w",{get:function(){return e.lastEventRotation.w}})}e.Camera=r},function(t,e,n){"use strict";var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),s=this&&this.__assign||function(){return(s=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)},i=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,s=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,o);else for(var g=t.length-1;0<=g;g--)(r=t[g])&&(s=(i<3?r(s):3<i?r(e,n,s):r(e,n))||s);return 3<i&&s&&Object.defineProperty(e,n,s),s};Object.defineProperty(e,"__esModule",{value:!0});var g,a,l=n(6),c=n(0);(a=g=e.Pointer||(e.Pointer={})).PRIMARY="PRIMARY",a.SECONDARY="SECONDARY";function I(t){if(!((this.callback=t)&&"apply"in t&&"call"in t))throw new Error("Callback is not a function");F.ensureInstance()}e.PointerEventComponent=I;var C,d=(r(B,C=I),i([c.Component("pointerDown")],B));function B(){return null!==C&&C.apply(this,arguments)||this}e.OnPointerDown=d;var Q,p=(r(u,Q=I),i([c.Component("pointerUp")],u));function u(){return null!==Q&&Q.apply(this,arguments)||this}e.OnPointerUp=p;var F=(Object.defineProperty(U,"instance",{get:function(){return U.ensureInstance(),U._instance},enumerable:!0,configurable:!0}),Object.defineProperty(U.prototype,"state",{get:function(){return this.internalState},enumerable:!0,configurable:!0}),U.ensureInstance=function(){U._instance||(U._instance=new U)},U.prototype.subscribe=function(t,e){var n=this;return this.subscriptions[t].push(e),function(){return n.unsubscribe(t,e)}},U.prototype.unsubscribe=function(t,e){var n=this.subscriptions[t].indexOf(e);return-1<n&&this.subscriptions[t].splice(n,1)},U.prototype.getPointerById=function(t){return 1===t?g.PRIMARY:g.SECONDARY},U.prototype.handlePointerUp=function(t){var e=this.getPointerById(t.pointerId),n=s({},t,{pointer:e,direction:(new l.Vector3).copyFrom(t.direction),origin:(new l.Vector3).copyFrom(t.origin),hit:t.hit?s({},t.hit,{hitPoint:(new l.Vector3).copyFrom(t.hit.hitPoint),normal:(new l.Vector3).copyFrom(t.hit.normal),worldNormal:(new l.Vector3).copyFrom(t.hit.worldNormal)}):void 0});this.internalState[g.PRIMARY].BUTTON_DOWN=!1;for(var o=0;o<this.subscriptions.BUTTON_UP.length;o++)this.subscriptions.BUTTON_UP[o](n);if(n.hit&&n.hit.entityId&&c.DisposableComponent.engine){var r=c.DisposableComponent.engine.entities[n.hit.entityId],i=r&&r.getComponentOrNull(p);i&&i.callback(n)}},U.prototype.handlePointerDown=function(t){var e=this.getPointerById(t.pointerId),n=s({},t,{pointer:e,direction:(new l.Vector3).copyFrom(t.direction),origin:(new l.Vector3).copyFrom(t.origin),hit:t.hit?s({},t.hit,{hitPoint:(new l.Vector3).copyFrom(t.hit.hitPoint),normal:(new l.Vector3).copyFrom(t.hit.normal),worldNormal:(new l.Vector3).copyFrom(t.hit.worldNormal)}):void 0});this.internalState[g.PRIMARY].BUTTON_DOWN=!0;for(var o=0;o<this.subscriptions.BUTTON_DOWN.length;o++)this.subscriptions.BUTTON_DOWN[o](n);if(n.hit&&n.hit.entityId&&c.DisposableComponent.engine){var r=c.DisposableComponent.engine.entities[n.hit.entityId],i=r&&r.getComponentOrNull(d);i&&i.callback(n)}},U);function U(){var t,e=this;this.subscriptions={BUTTON_DOWN:[],BUTTON_UP:[]},this.internalState=((t={})[g.PRIMARY]={BUTTON_DOWN:!1},t[g.SECONDARY]={BUTTON_DOWN:!1},t),"undefined"!=typeof dcl&&(dcl.subscribe("pointerUp"),dcl.subscribe("pointerDown"),dcl.onEvent(function(t){"pointerUp"===t.type?e.handlePointerUp(t.data):"pointerDown"===t.type&&e.handlePointerDown(t.data)}))}e.Input=F},function(t,e,n){"use strict";var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,s=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,o);else for(var g=t.length-1;0<=g;g--)(r=t[g])&&(s=(i<3?r(s):3<i?r(e,n,s):r(e,n))||s);return 3<i&&s&&Object.defineProperty(e,n,s),s};Object.defineProperty(e,"__esModule",{value:!0});var s,g=n(0),a=n(5),l=(s=g.ObservableComponent,r(c,s),i([g.ObservableComponent.readonly],c.prototype,"url",void 0),i([g.ObservableComponent.field],c.prototype,"loop",void 0),i([g.ObservableComponent.field],c.prototype,"loadingCompleteEventId",void 0),i([g.ObservableComponent.field],c.prototype,"volume",void 0),i([g.DisposableComponent("engine.AudioClip",a.CLASS_ID.AUDIO_CLIP)],c));function c(t){var e=s.call(this)||this;return e.loop=!1,e.volume=1,e.url=t,e}e.AudioClip=l;var I,C=(I=g.ObservableComponent,r(d,I),d.prototype.playOnce=function(){return this.playing=!0,this.dirty=!0,this.data.nonce=Math.random(),this},i([g.ObservableComponent.readonly],d.prototype,"audioClipId",void 0),i([g.ObservableComponent.field],d.prototype,"loop",void 0),i([g.ObservableComponent.field],d.prototype,"volume",void 0),i([g.ObservableComponent.field],d.prototype,"playing",void 0),i([g.ObservableComponent.field],d.prototype,"pitch",void 0),i([g.Component("engine.AudioSource",a.CLASS_ID.AUDIO_SOURCE)],d));function d(t){var e=I.call(this)||this;if(e.audioClip=t,e.loop=!1,e.volume=1,e.playing=!0,e.pitch=1,!(t instanceof l))throw new Error("Trying to create AudioSource(AudioClip) with an invalid AudioClip");return e.audioClipId=g.getComponentId(t),e}e.AudioSource=C},function(t,e,n){"use strict";var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,s=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,o);else for(var g=t.length-1;0<=g;g--)(r=t[g])&&(s=(i<3?r(s):3<i?r(e,n,s):r(e,n))||s);return 3<i&&s&&Object.defineProperty(e,n,s),s};Object.defineProperty(e,"__esModule",{value:!0});var s,g=n(0),a=n(5);(s=e.Gizmo||(e.Gizmo={})).MOVE="MOVE",s.ROTATE="ROTATE",s.SCALE="SCALE",s.NONE="NONE";var l,c=(l=a.OnUUIDEvent,r(I,l),i([g.ObservableComponent.readonly],I.prototype,"type",void 0),i([g.Component("engine.gizmoEvent",a.CLASS_ID.UUID_CALLBACK)],I));function I(){var t=null!==l&&l.apply(this,arguments)||this;return t.type="gizmoEvent",t}e.OnGizmoEvent=c;var C,d=(C=g.ObservableComponent,r(B,C),i([g.ObservableComponent.field],B.prototype,"position",void 0),i([g.ObservableComponent.field],B.prototype,"rotation",void 0),i([g.ObservableComponent.field],B.prototype,"scale",void 0),i([g.ObservableComponent.field],B.prototype,"cycle",void 0),i([g.ObservableComponent.field],B.prototype,"selectedGizmo",void 0),i([g.ObservableComponent.field],B.prototype,"localReference",void 0),i([g.Component("engine.gizmos",a.CLASS_ID.GIZMOS)],B));function B(){var t=null!==C&&C.apply(this,arguments)||this;return t.position=!0,t.rotation=!0,t.scale=!0,t.cycle=!0,t.localReference=!1,t}e.Gizmos=d},function(t,e,n){"use strict";var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,s=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,o);else for(var g=t.length-1;0<=g;g--)(r=t[g])&&(s=(i<3?r(s):3<i?r(e,n,s):r(e,n))||s);return 3<i&&s&&Object.defineProperty(e,n,s),s};Object.defineProperty(e,"__esModule",{value:!0});var s,g=n(0),a=n(5),l=n(6),c=(s=g.ObservableComponent,r(I,s),Object.defineProperty(I.prototype,"parent",{get:function(){return this._parent},enumerable:!0,configurable:!0}),Object.defineProperty(I.prototype,"parentComponent",{get:function(){return this.data.parentComponent},enumerable:!0,configurable:!0}),i([g.ObservableComponent.field],I.prototype,"name",void 0),i([g.ObservableComponent.field],I.prototype,"visible",void 0),i([g.ObservableComponent.field],I.prototype,"opacity",void 0),i([g.ObservableComponent.field],I.prototype,"hAlign",void 0),i([g.ObservableComponent.field],I.prototype,"vAlign",void 0),i([g.ObservableComponent.uiValue],I.prototype,"width",void 0),i([g.ObservableComponent.uiValue],I.prototype,"height",void 0),i([g.ObservableComponent.uiValue],I.prototype,"positionX",void 0),i([g.ObservableComponent.uiValue],I.prototype,"positionY",void 0),i([g.ObservableComponent.field],I.prototype,"isPointerBlocker",void 0),I);function I(t){var e=s.call(this)||this;return e.name=null,e.visible=!0,e.opacity=1,e.hAlign="center",e.vAlign="center",e.width="100px",e.height="50px",e.positionX="0px",e.positionY="0px",e.isPointerBlocker=!0,t&&(e._parent=t,e.data.parentComponent=g.getComponentId(t)),e}e.UIShape=c;var C,d=(r(B,C=c),i([g.DisposableComponent("engine.shape",a.CLASS_ID.UI_FULLSCREEN_SHAPE)],B));function B(){return C.call(this,null)||this}e.UIFullScreen=d;var Q,p=(r(u,Q=c),i([g.DisposableComponent("engine.shape",a.CLASS_ID.UI_WORLD_SPACE_SHAPE)],u));function u(){return Q.call(this,null)||this}e.UIWorldSpace=p;var F,U=(r(y,F=c),i([g.DisposableComponent("engine.shape",a.CLASS_ID.UI_SCREEN_SPACE_SHAPE)],y));function y(){return F.call(this,null)||this}e.UICanvas=U;var h,b,A,m=(r(G,b=c),i([g.ObservableComponent.field],G.prototype,"adaptWidth",void 0),i([g.ObservableComponent.field],G.prototype,"adaptHeight",void 0),i([g.ObservableComponent.field],G.prototype,"thickness",void 0),i([g.ObservableComponent.field],G.prototype,"color",void 0),i([g.ObservableComponent.field],G.prototype,"alignmentUsesSize",void 0),i([g.DisposableComponent("engine.shape",a.CLASS_ID.UI_CONTAINER_RECT)],G));function G(){var t=null!==b&&b.apply(this,arguments)||this;return t.adaptWidth=!1,t.adaptHeight=!1,t.thickness=0,t.color=l.Color4.Clear(),t.alignmentUsesSize=!0,t}e.UIContainerRect=m,(A=h=e.UIStackOrientation||(e.UIStackOrientation={}))[A.VERTICAL=0]="VERTICAL",A[A.HORIZONTAL=1]="HORIZONTAL";var x,v=(r(R,x=c),i([g.ObservableComponent.field],R.prototype,"adaptWidth",void 0),i([g.ObservableComponent.field],R.prototype,"adaptHeight",void 0),i([g.ObservableComponent.field],R.prototype,"color",void 0),i([g.ObservableComponent.field],R.prototype,"stackOrientation",void 0),i([g.ObservableComponent.field],R.prototype,"spacing",void 0),i([g.DisposableComponent("engine.shape",a.CLASS_ID.UI_CONTAINER_STACK)],R));function R(){var t=null!==x&&x.apply(this,arguments)||this;return t.adaptWidth=!0,t.adaptHeight=!0,t.color=l.Color4.Clear(),t.stackOrientation=h.VERTICAL,t.spacing=0,t}e.UIContainerStack=v;var Z,f=(r(L,Z=c),i([g.ObservableComponent.field],L.prototype,"fontSize",void 0),i([g.ObservableComponent.field],L.prototype,"fontWeight",void 0),i([g.ObservableComponent.field],L.prototype,"thickness",void 0),i([g.ObservableComponent.field],L.prototype,"cornerRadius",void 0),i([g.ObservableComponent.field],L.prototype,"color",void 0),i([g.ObservableComponent.field],L.prototype,"background",void 0),i([g.ObservableComponent.field],L.prototype,"paddingTop",void 0),i([g.ObservableComponent.field],L.prototype,"paddingRight",void 0),i([g.ObservableComponent.field],L.prototype,"paddingBottom",void 0),i([g.ObservableComponent.field],L.prototype,"paddingLeft",void 0),i([g.ObservableComponent.field],L.prototype,"shadowBlur",void 0),i([g.ObservableComponent.field],L.prototype,"shadowOffsetX",void 0),i([g.ObservableComponent.field],L.prototype,"shadowOffsetY",void 0),i([g.ObservableComponent.field],L.prototype,"shadowColor",void 0),i([g.ObservableComponent.field],L.prototype,"text",void 0),i([g.DisposableComponent("engine.shape",a.CLASS_ID.UI_BUTTON_SHAPE)],L));function L(){var t=null!==Z&&Z.apply(this,arguments)||this;return t.fontSize=10,t.fontWeight="normal",t.thickness=0,t.cornerRadius=0,t.color=l.Color4.White(),t.background=l.Color4.White(),t.paddingTop=0,t.paddingRight=0,t.paddingBottom=0,t.paddingLeft=0,t.shadowBlur=0,t.shadowOffsetX=0,t.shadowOffsetY=0,t.shadowColor=l.Color4.Black(),t.text="button",t}e.UIButton=f;var S,V=(r(E,S=c),i([g.ObservableComponent.field],E.prototype,"outlineWidth",void 0),i([g.ObservableComponent.field],E.prototype,"outlineColor",void 0),i([g.ObservableComponent.field],E.prototype,"color",void 0),i([g.ObservableComponent.field],E.prototype,"fontSize",void 0),i([g.ObservableComponent.field],E.prototype,"fontAutoSize",void 0),i([g.ObservableComponent.field],E.prototype,"fontWeight",void 0),i([g.ObservableComponent.field],E.prototype,"value",void 0),i([g.ObservableComponent.field],E.prototype,"lineSpacing",void 0),i([g.ObservableComponent.field],E.prototype,"lineCount",void 0),i([g.ObservableComponent.field],E.prototype,"adaptWidth",void 0),i([g.ObservableComponent.field],E.prototype,"adaptHeight",void 0),i([g.ObservableComponent.field],E.prototype,"textWrapping",void 0),i([g.ObservableComponent.field],E.prototype,"shadowBlur",void 0),i([g.ObservableComponent.field],E.prototype,"shadowOffsetX",void 0),i([g.ObservableComponent.field],E.prototype,"shadowOffsetY",void 0),i([g.ObservableComponent.field],E.prototype,"shadowColor",void 0),i([g.ObservableComponent.field],E.prototype,"hTextAlign",void 0),i([g.ObservableComponent.field],E.prototype,"vTextAlign",void 0),i([g.ObservableComponent.field],E.prototype,"paddingTop",void 0),i([g.ObservableComponent.field],E.prototype,"paddingRight",void 0),i([g.ObservableComponent.field],E.prototype,"paddingBottom",void 0),i([g.ObservableComponent.field],E.prototype,"paddingLeft",void 0),i([g.DisposableComponent("engine.shape",a.CLASS_ID.UI_TEXT_SHAPE)],E));function E(){var t=null!==S&&S.apply(this,arguments)||this;return t.outlineWidth=0,t.outlineColor=l.Color4.White(),t.color=l.Color4.White(),t.fontSize=10,t.fontAutoSize=!1,t.fontWeight="normal",t.value="",t.lineSpacing=0,t.lineCount=0,t.adaptWidth=!1,t.adaptHeight=!1,t.textWrapping=!1,t.shadowBlur=0,t.shadowOffsetX=0,t.shadowOffsetY=0,t.shadowColor=l.Color4.Black(),t.hTextAlign="left",t.vTextAlign="bottom",t.paddingTop=0,t.paddingRight=0,t.paddingBottom=0,t.paddingLeft=0,t}e.UIText=V;var X,N=(r(W,X=c),i([g.ObservableComponent.field],W.prototype,"color",void 0),i([g.ObservableComponent.field],W.prototype,"thickness",void 0),i([g.ObservableComponent.field],W.prototype,"fontSize",void 0),i([g.ObservableComponent.field],W.prototype,"fontWeight",void 0),i([g.ObservableComponent.field],W.prototype,"value",void 0),i([g.ObservableComponent.field],W.prototype,"placeholderColor",void 0),i([g.ObservableComponent.field],W.prototype,"placeholder",void 0),i([g.ObservableComponent.field],W.prototype,"margin",void 0),i([g.ObservableComponent.field],W.prototype,"maxWidth",void 0),i([g.ObservableComponent.field],W.prototype,"hTextAlign",void 0),i([g.ObservableComponent.field],W.prototype,"vTextAlign",void 0),i([g.ObservableComponent.field],W.prototype,"autoStretchWidth",void 0),i([g.ObservableComponent.field],W.prototype,"background",void 0),i([g.ObservableComponent.field],W.prototype,"focusedBackground",void 0),i([g.ObservableComponent.field],W.prototype,"shadowBlur",void 0),i([g.ObservableComponent.field],W.prototype,"shadowOffsetX",void 0),i([g.ObservableComponent.field],W.prototype,"shadowOffsetY",void 0),i([g.ObservableComponent.field],W.prototype,"shadowColor",void 0),i([g.ObservableComponent.field],W.prototype,"paddingTop",void 0),i([g.ObservableComponent.field],W.prototype,"paddingRight",void 0),i([g.ObservableComponent.field],W.prototype,"paddingBottom",void 0),i([g.ObservableComponent.field],W.prototype,"paddingLeft",void 0),i([a.OnUUIDEvent.uuidEvent],W.prototype,"onTextSubmit",void 0),i([a.OnUUIDEvent.uuidEvent],W.prototype,"onChanged",void 0),i([a.OnUUIDEvent.uuidEvent],W.prototype,"onFocus",void 0),i([a.OnUUIDEvent.uuidEvent],W.prototype,"onBlur",void 0),i([g.DisposableComponent("engine.shape",a.CLASS_ID.UI_INPUT_TEXT_SHAPE)],W));function W(){var t=null!==X&&X.apply(this,arguments)||this;return t.color=l.Color4.Clear(),t.thickness=1,t.fontSize=10,t.fontWeight="normal",t.value="",t.placeholderColor=l.Color4.White(),t.placeholder="",t.margin=10,t.maxWidth=100,t.hTextAlign="left",t.vTextAlign="bottom",t.autoStretchWidth=!0,t.background=l.Color4.Black(),t.focusedBackground=l.Color4.Black(),t.shadowBlur=0,t.shadowOffsetX=0,t.shadowOffsetY=0,t.shadowColor=l.Color4.White(),t.paddingTop=0,t.paddingRight=0,t.paddingBottom=0,t.paddingLeft=0,t.onTextSubmit=null,t.onChanged=null,t.onFocus=null,t.onBlur=null,t}e.UIInputText=N;var D,M=(r(w,D=c),i([g.ObservableComponent.field],w.prototype,"sourceLeft",void 0),i([g.ObservableComponent.field],w.prototype,"sourceTop",void 0),i([g.ObservableComponent.field],w.prototype,"sourceWidth",void 0),i([g.ObservableComponent.field],w.prototype,"sourceHeight",void 0),i([g.ObservableComponent.component],w.prototype,"source",void 0),i([g.ObservableComponent.field],w.prototype,"paddingTop",void 0),i([g.ObservableComponent.field],w.prototype,"paddingRight",void 0),i([g.ObservableComponent.field],w.prototype,"paddingBottom",void 0),i([g.ObservableComponent.field],w.prototype,"paddingLeft",void 0),i([g.ObservableComponent.field],w.prototype,"sizeInPixels",void 0),i([a.OnUUIDEvent.uuidEvent],w.prototype,"onClick",void 0),i([a.OnUUIDEvent.uuidEvent],w.prototype,"onEnter",void 0),i([g.DisposableComponent("engine.shape",a.CLASS_ID.UI_IMAGE_SHAPE)],w));function w(t,e){var n=D.call(this,t)||this;return n.sourceLeft=0,n.sourceTop=0,n.sourceWidth=1,n.sourceHeight=1,n.paddingTop=0,n.paddingRight=0,n.paddingBottom=0,n.paddingLeft=0,n.sizeInPixels=!0,n.onClick=null,n.onEnter=null,n.source=e,n}e.UIImage=M;var H,z=(r(Y,H=c),i([g.ObservableComponent.field],Y.prototype,"valueX",void 0),i([g.ObservableComponent.field],Y.prototype,"valueY",void 0),i([g.ObservableComponent.field],Y.prototype,"borderColor",void 0),i([g.ObservableComponent.field],Y.prototype,"backgroundColor",void 0),i([g.ObservableComponent.field],Y.prototype,"isHorizontal",void 0),i([g.ObservableComponent.field],Y.prototype,"isVertical",void 0),i([g.ObservableComponent.field],Y.prototype,"paddingTop",void 0),i([g.ObservableComponent.field],Y.prototype,"paddingRight",void 0),i([g.ObservableComponent.field],Y.prototype,"paddingBottom",void 0),i([g.ObservableComponent.field],Y.prototype,"paddingLeft",void 0),i([a.OnUUIDEvent.uuidEvent],Y.prototype,"onChanged",void 0),i([g.DisposableComponent("engine.shape",a.CLASS_ID.UI_SLIDER_SHAPE)],Y));function Y(){var t=null!==H&&H.apply(this,arguments)||this;return t.valueX=0,t.valueY=0,t.borderColor=l.Color4.White(),t.backgroundColor=l.Color4.Clear(),t.isHorizontal=!1,t.isVertical=!1,t.paddingTop=0,t.paddingRight=0,t.paddingBottom=0,t.paddingLeft=0,t.onChanged=null,t}e.UIScrollRect=z},function(t,e,n){"use strict";var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,s=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,o);else for(var g=t.length-1;0<=g;g--)(r=t[g])&&(s=(i<3?r(s):3<i?r(e,n,s):r(e,n))||s);return 3<i&&s&&Object.defineProperty(e,n,s),s};Object.defineProperty(e,"__esModule",{value:!0});var s,g=n(0),a=n(13),l=n(5),c=(s=l.OnUUIDEvent,r(I,s),i([g.ObservableComponent.readonly],I.prototype,"type",void 0),i([g.Component("engine.onFocus",l.CLASS_ID.UUID_CALLBACK)],I));function I(t){var e=s.call(this,t)||this;return e.type="onFocus",a.uuidEventSystem.handlerMap[e.uuid]=e}e.OnFocus=c;var C,d=(C=l.OnUUIDEvent,r(B,C),i([g.ObservableComponent.readonly],B.prototype,"type",void 0),i([g.Component("engine.onTextSubmit",l.CLASS_ID.UUID_CALLBACK)],B));function B(t){var e=C.call(this,t)||this;return e.type="onTextSubmit",a.uuidEventSystem.handlerMap[e.uuid]=e}e.OnTextSubmit=d;var Q,p=(Q=l.OnUUIDEvent,r(u,Q),i([g.ObservableComponent.readonly],u.prototype,"type",void 0),i([g.Component("engine.onBlur",l.CLASS_ID.UUID_CALLBACK)],u));function u(t){var e=Q.call(this,t)||this;return e.type="onBlur",a.uuidEventSystem.handlerMap[e.uuid]=e}e.OnBlur=p;var F,U=(F=l.OnUUIDEvent,r(y,F),i([g.ObservableComponent.readonly],y.prototype,"type",void 0),i([g.Component("engine.onClick",l.CLASS_ID.UUID_CALLBACK)],y));function y(t){var e=F.call(this,t)||this;return e.type="onClick",a.uuidEventSystem.handlerMap[e.uuid]=e}e.OnClick=U;var h,b=(h=l.OnUUIDEvent,r(A,h),i([g.ObservableComponent.readonly],A.prototype,"type",void 0),i([g.Component("engine.onEnter",l.CLASS_ID.UUID_CALLBACK)],A));function A(t){var e=h.call(this,t)||this;return e.type="onEnter",a.uuidEventSystem.handlerMap[e.uuid]=e}e.OnEnter=b;var m,G=(m=l.OnUUIDEvent,r(x,m),i([g.ObservableComponent.readonly],x.prototype,"type",void 0),i([g.Component("engine.onChange",l.CLASS_ID.UUID_CALLBACK)],x));function x(t){var e=m.call(this,t)||this;return e.type="onChange",a.uuidEventSystem.handlerMap[e.uuid]=e}e.OnChanged=G},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(19),r=n(1),i=null,s=null,g=null;function a(){return g=g||new o.Observable}e.getMessageObserver=a;var l=(c.prototype.on=function(n,o){return a().add(function(t){try{var e=JSON.parse(t.message);e.message===n&&o(e.payload,t.sender)}catch(t){dcl.error("Error parsing comms message "+t.message,t)}})},c.prototype.sendRaw=function(t){this.messageQueue.push(t),this.connected&&this.flush()},c.prototype.emit=function(t,e){var n=JSON.stringify({message:t,payload:e});this.sendRaw(n),a().notifyObservers({message:n,sender:"self"})},c.prototype.flush=function(){var e=this;if(0!==this.messageQueue.length&&this.connected&&i&&!this.flushing){var t=this.messageQueue.shift();this.flushing=!0,dcl.callRpc(i.rpcHandle,"send",[t]).then(function(t){e.flushing=!1,e.flush()},function(t){e.flushing=!1,r.error("Error flushing MessageBus",t)})}},c);function c(){var e=this;this.messageQueue=[],this.connected=!1,this.flushing=!1,function(){if(!s){(s=dcl.loadModule("@decentraland/CommunicationsController")).then(function(t){i=t});var e=a();dcl.subscribe("comms"),dcl.onEvent(function(t){"comms"===t.type&&(dcl.log("Receiving comms message ",t.data),e.notifyObservers(t.data))})}return s}().then(function(t){e.connected=!0,e.flush()})}e.MessageBus=l}])),function(t){"use strict";var l=1,c=2,g=[],a={baseUrl:""},I={};function e(i,t,s){var e=arguments.length;1===e?(s=i,t=["require","exports","module"],i=null):2===e&&("[object Array]"===a.toString.call(i)?(s=t,t=i,i=null):(s=t,t=["require","exports","module"])),i?C(t,function(){var t,e;I[i]&&(t=I[i].handlers,e=I[i].context);var n=I[i]="function"==typeof s?s.apply(null,g.slice.call(arguments,0))||I[i]||{}:s;n.dclamd=c,n.context=e;for(var o=0,r=t?t.length:0;o<r;o++)t[o](n)},i):g.push([t,s])}function C(n,o,r){var i=[],s=0,g=!1;if("string"==typeof n){if(I[n]&&I[n].dclamd===c)return I[n];throw new Error(n+" has not been defined. Please include it as a dependency in "+r+"'s define()")}for(var a=n.length,t=function(e){switch(n[e]){case"require":var t=function(t,e){return C(t,e,r)};t.toUrl=function(t){return B(t,r)},i[e]=t,s++;break;case"exports":i[e]=I[r]||(I[r]={}),s++;break;case"module":i[e]={id:r,uri:B(r)},s++;break;case I[r]?I[r].context:"":i[e]=I[I[r].context],s++;break;default:!function(t,r,e){{if(t=e?B(t,e):t,I[t])return I[t].dclamd===l?r&&I[t].handlers.push(r):r&&r(I[t]);I[t]={name:t,dclamd:l,handlers:[r],context:e}}0===t.indexOf("@")&&"undefined"!=typeof dcl&&dcl.loadModule(t).then(function(t){var e={};for(var n in t.methods){var o=t.methods[n];e[o.name]=d(t.rpcHandle,o)}r(e)})}(n[e],function(t){i[e]=t,++s===a&&o&&(g=!0,o.apply(null,i)),I[n[e]]&&(I[n[e]].dclamd=c)},r)}},e=0;e<a;e++)t(e);!g&&s===a&&o&&o.apply(null,i)}function d(t,e){return function(){return dcl.callRpc(t,e.name,g.slice.call(arguments,0))}}function B(t,e){var n=!1;switch(t){case"require":case"exports":case"module":return t}var o=(e||a.baseUrl).split("/");o.pop();for(var r=t.split("/"),i=r.length;--i;)switch(t[0]){case"..":o.pop();case".":case"":r.shift(),n=!0}return(o.length&&n?o.join("/")+"/":"")+r.join("/")}t.config=function(t){if("object"==typeof t)for(var e in t)t.hasOwnProperty(e)&&(a[e]=t[e])},t.define=e,(e=t.define||(t.define={})).amd={},t.require=C,"undefined"!=typeof dcl&&dcl.onStart(function(){var t=[];for(var e in I)I[e]&&I[e].dclamd===l&&t.push(I[e]);if(t.length)throw new Error("These modules didn't load: "+t.map(function(t){return t.name}).join(", "))}),C.toUrl=B}(loader=loader||{}),global="undefined"!=typeof global?global:"undefined"!=typeof self?self:void 0!==this?this:null,!global)throw new Error("unknown global context");global.define=loader.define,global.dclamd=loader,eval('var __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar __values = (this && this.__values) || function (o) {\r\n    var m = typeof Symbol === "function" && o[Symbol.iterator], i = 0;\r\n    if (m) return m.call(o);\r\n    return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n};\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nvar __metadata = (this && this.__metadata) || function (k, v) {\r\n    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);\r\n};\r\ndefine("components/flashdome/domeSettings", ["require", "exports"], function (require, exports) {\r\n    "use strict";\r\n    Object.defineProperty(exports, "__esModule", { value: true });\r\n    var fn = "domeSettings";\r\n    //log(fn + " called")\r\n    //import { DCLUtils } from "../utils/dclUtils"\r\n    var generatorTypes;\r\n    (function (generatorTypes) {\r\n        generatorTypes["SINGLE"] = "Single";\r\n        generatorTypes["DOUBLE"] = "Double";\r\n        generatorTypes["FIBONACCI"] = "Fibonacci";\r\n        generatorTypes["CIRCLE"] = "Circle";\r\n        //SPIRAL = 4,\r\n        //SCATTER = 6\r\n    })(generatorTypes || (generatorTypes = {}));\r\n    var tileTypes;\r\n    (function (tileTypes) {\r\n        tileTypes["DOT"] = "DotTile";\r\n        tileTypes["PLANE"] = "PlaneTile";\r\n        //CUBE    = "CubeTile"\r\n        //... import GLTB and use it as a tile\r\n    })(tileTypes || (tileTypes = {}));\r\n    exports.domeSettings = {\r\n        parcel: { \'w\': 4, \'h\': 4 },\r\n        height: 10,\r\n        //center: this.centerPos(this.parcel),\r\n        // Still unused...each generator has it\'s own settings\r\n        //TODO - hook some of the generators parameters to global dome settings - if radius is set here, use this one\r\n        //radius: 2,          \r\n        //createFromRadius: true,     // maybe have a switch between create from \r\n        //tilesMin: 1,\r\n        //tilesMax: 1,\r\n        // >>>>>>  change these  <<<<<<<< \r\n        generator: generatorTypes.CIRCLE,\r\n        tile: tileTypes.DOT,\r\n        // don\'t touch these 2\r\n        generatorTypes: generatorTypes,\r\n        tileTypes: tileTypes,\r\n        // default DCL logo colors - taken from here https://decentraland.org/images/logo.svg\r\n        dclColors: {\r\n            red: "#FF2D55",\r\n            orange: "#FC9965",\r\n            yellow: "#FFBC5B",\r\n            yellowSun: "#FFC95B",\r\n            purple: "#A524B3",\r\n            gradients: {\r\n                purpleToRed: ["#A524B3", "#FF2D55"],\r\n                redToYellow: ["#FF2D55", "#FFBC5B"],\r\n            }\r\n        }\r\n    };\r\n    function centerPos(obj) {\r\n        log("domeSettings.centerPos ");\r\n        return { x: (obj.w / 2), z: (obj.h / 2) };\r\n    }\r\n});\r\ndefine("components/flashdome/tiles/tile", ["require", "exports"], function (require, exports) {\r\n    "use strict";\r\n    Object.defineProperty(exports, "__esModule", { value: true });\r\n    var fn = "Tile Super";\r\n    //log(fn + " called")\r\n    var Tile = /** @class */ (function (_super) {\r\n        __extends(Tile, _super);\r\n        //private _position:Vector3\r\n        function Tile() {\r\n            return _super.call(this) || this;\r\n            //log(fn + ".constructor this: ", this);\r\n            //log(fn + ".constructor Entity: ", Entity);\r\n            //log(fn + ".constructor this.eventManager: ", this.eventManager);\r\n        }\r\n        Object.defineProperty(Tile.prototype, "position", {\r\n            get: function () { return this.getComponent(Transform).position; },\r\n            set: function (pos) { this.getComponentOrCreate(Transform).position = pos; },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        return Tile;\r\n    }(Entity));\r\n    exports.Tile = Tile;\r\n});\r\ndefine("components/utils/dclUtils", ["require", "exports", "components/flashdome/domeSettings"], function (require, exports, domeSettings_1) {\r\n    "use strict";\r\n    Object.defineProperty(exports, "__esModule", { value: true });\r\n    // a series of utilites for decentraland\r\n    var fn = "DCLUtils";\r\n    //log(fn + " called")\r\n    var DCLUtils = /** @class */ (function () {\r\n        function DCLUtils() {\r\n        }\r\n        /**\r\n         * vert simple wrapper that returns the parcels center\r\n         * TODO make it so that it detects the real underlying parcel size...for now there is no way of importing the scene.json file\r\n         * @param parcelsW? optional\r\n         * @param parcelsH? optiona\r\n         */\r\n        DCLUtils.getParcelCenter = function (parcelsW, parcelsH) {\r\n            // if no parameters are passed automatically retrieve it from domeSettings\r\n            if (!parcelsW || !parcelsH) {\r\n                parcelsW = domeSettings_1.domeSettings.parcel.w;\r\n                parcelsH = domeSettings_1.domeSettings.parcel.h;\r\n            }\r\n            var parcelSize = 16; //meters per parcel\r\n            var cx = (parcelsW / 2) * parcelSize;\r\n            var cz = (parcelsH / 2) * parcelSize;\r\n            var parcelCenter = new Vector3(cx, 0, cz); //<Vector3>{x: cx, y:0, z: cz}\r\n            log(fn + ".getParcelCenter: ", parcelCenter);\r\n            return parcelCenter;\r\n        };\r\n        /**\r\n         * debugging DCL is very slow and log doesn\'t allow to always read the properties of an object\r\n         * this utility function traces out all the relevant keys\r\n         */\r\n        DCLUtils.traceKeys = function () {\r\n            log(fn + ".traceKeys");\r\n            //log("engine: ", engine)  //[object object]\r\n            //log("engine: " + engine)  //[object object]\r\n            console.log("engine: ", engine); // outputs the object before everything else\r\n            log("engine.keys: ", Object.keys(engine));\r\n            /* outputs a lot of info - objects are read as [object] and functions are traced as text\r\n            for (let k in engine){\r\n                log("k:" + k + " - " + engine[k])\r\n            }\r\n            */\r\n            log("Tile clicked Object.keys(Vector3): ", Object.keys(Vector3));\r\n            log("Tile clicked Object.keys(Color3): ", Object.keys(Color3));\r\n            //console.log("Vector3: ", Vector3) // not very useful spits out the function code\r\n        };\r\n        return DCLUtils;\r\n    }());\r\n    exports.DCLUtils = DCLUtils;\r\n});\r\n// I Needed a way to create dynamic groups \r\n// to group entites created at each round of a for loop\r\n// and since the default methods doesn\'t allow to intentionally create a group by filtering through certain of it\'s properties\r\n// as illustrated here https://decentralandteam.slack.com/archives/CFK920GJZ/p1561399185149300\r\n// and here https://decentralandteam.slack.com/archives/CFK920GJZ/p1561399297151400\r\ndefine("components/utils/EntityGroups", ["require", "exports"], function (require, exports) {\r\n    "use strict";\r\n    Object.defineProperty(exports, "__esModule", { value: true });\r\n    // default group methods\r\n    // getComponentGroup https://github.com/decentraland/ecs-reference/blob/master/docs-latest/decentraland-ecs.engine.getcomponentgroup.md\r\n    // getEntitiesWithComponent //https://github.com/decentraland/ecs-reference/blob/master/docs-latest/decentraland-ecs.engine.getentitieswithcomponent.md\r\n    // usage example\r\n    // create a group named "group_c", with all entitis that have the (custom) component "tileGroup"\r\n    // and whose property tileGroup.groupN   == 0\r\n    // let c = 0\r\n    // Groups.createGroupWithComponentsAndCondition("tileGroup", "groupN", "=="+c, "group"+c)\r\n    var EntityGroups = /** @class */ (function () {\r\n        function EntityGroups() {\r\n        }\r\n        Object.defineProperty(EntityGroups, "groups", {\r\n            // simple getter - no setter (only createGroup)\r\n            get: function () {\r\n                return EntityGroups._groups;\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        EntityGroups.createGroup = function (groupName, entities) {\r\n            this._groups = (this.groups == undefined) ? new Array() : this.groups;\r\n            this._groups[groupName] = entities;\r\n            return this.getGroup(groupName);\r\n            log("created group: " + groupName + " : ", this._groups[groupName]);\r\n        };\r\n        EntityGroups.getGroup = function (groupName) {\r\n            return this._groups[groupName];\r\n        };\r\n        /**\r\n         * a way to dinamically create groups of entities that meet certain criteria\r\n         * example usage:\r\n         * Groups.createGroupWithComponentsAndCondition("tileGroup", "groupN", "=="+c, "group"+c)\r\n         * or\r\n         * Groups.createGroupWithComponentsAndCondition("Transform", "position.x", " > 10", "entitiesWithXGraterThan10") // Todo still to prove wither it needs a string "Transform" or "transform"\r\n         * @param componentName a string representing your custome component name (the one in lowercase created with the @Component eg "tileGroup")\r\n         * @param property a string of the property that you want to filter for\r\n         * @param condition a string of the condition that the property has to meet eg "== 1"  or  " < 10"\r\n         * @param groupName a string to give this group a specific name that you can later retrieve with EntityGroups.getGroup(groupName)\r\n         */\r\n        EntityGroups.createGroupWithComponentsAndCondition = function (componentName, property, condition, groupName) {\r\n            //log("createGroupWithComponentsAndCondition componentName: " + componentName )\r\n            var tempGroup = new Array();\r\n            for (var entityId in engine.entityLists[componentName]) {\r\n                //log("entityId: ", entityId) //entity = the id of the entity "Ed"\r\n                var entity = engine.entities[entityId];\r\n                var component = entity.getComponent(componentName);\r\n                if (eval(component[property] + condition)) {\r\n                    tempGroup.push(entity);\r\n                }\r\n            }\r\n            // done looping add it to the groups\r\n            this.createGroup(groupName, tempGroup);\r\n            log("done creating group: ", tempGroup);\r\n            return this.getGroup(groupName);\r\n        };\r\n        EntityGroups._groups = new Array();\r\n        return EntityGroups;\r\n    }());\r\n    exports.default = EntityGroups;\r\n});\r\n/**\r\n * this class allows all custom systems that extend it, to be passed as a parameter either\r\n * 1 - a single Entity  object\r\n *\r\n * 2 - a group of entites produced by the dcl classic api   engine.getComponentGroup(TileGroup);\r\n *\r\n * or 3 - a string indicating the name of group of entities produced with my custom  EntityGroups class src/components/utils/EntityGroups.ts,\r\n * and stored in EntityGroups.groups\r\n */\r\ndefine("components/flashdome/systems/groupAwareSystem", ["require", "exports", "components/utils/EntityGroups"], function (require, exports, EntityGroups_1) {\r\n    "use strict";\r\n    Object.defineProperty(exports, "__esModule", { value: true });\r\n    var GroupAwareSystem = /** @class */ (function () {\r\n        function GroupAwareSystem(_group) {\r\n            this.group = {};\r\n            //debugger\r\n            if (typeof _group == "string") {\r\n                // group created with EntityGroups\r\n                this.group["entities"] = EntityGroups_1.default.getGroup(_group);\r\n            }\r\n            else if (!_group.entities) {\r\n                // Single Entity:  \r\n                // if it\'s an object but doesn\'t have the entities property it\'s likely this is a single Entity\r\n                this.group["entities"] = [_group];\r\n            }\r\n            else {\r\n                // a group that has the entities object which means that it has been created\r\n                // with the DCL api:   engine.getComponentGroup(TileGroup)\r\n                this.group = _group;\r\n            }\r\n        }\r\n        return GroupAwareSystem;\r\n    }());\r\n    exports.GroupAwareSystem = GroupAwareSystem;\r\n});\r\n/**\r\n *  GROUP ROTATOR\r\n *\r\n *  a simple System that rotates an entity or group of entites\r\n *  you can customize\r\n *  - the rotation axis,\r\n *  - the rotation direction (clockwise or counterclockwise)\r\n *  - the rotation speed\r\n *\r\n * ///// TODO - improvements\r\n * - define rotation speed in second per rotation\r\n * - define number of max rotations to take before it should be stopped\r\n * - fire events at the end of each rotation and at the end of the given rotation numbers\r\n */\r\ndefine("components/flashdome/systems/groupRotator", ["require", "exports", "components/flashdome/systems/groupAwareSystem"], function (require, exports, groupAwareSystem_1) {\r\n    "use strict";\r\n    Object.defineProperty(exports, "__esModule", { value: true });\r\n    var fn = "GroupRotator";\r\n    var GroupRotator = /** @class */ (function (_super) {\r\n        __extends(GroupRotator, _super);\r\n        /**\r\n         *\r\n         * @param _group either a string for a group name, a single Entity or a group of entities\r\n         * @param clockwise\r\n         * @param _speed\r\n         * @param _axis\r\n         */\r\n        function GroupRotator(_group, clockwise, _speed, _axis) {\r\n            var _this = \r\n            // the super class handles the first parameter either a string, a single Entity or a group of entities\r\n            _super.call(this, _group) || this;\r\n            _this.speed = 200; // rotation multiplier \r\n            _this.axis = Vector3.Forward(); // the axis arount which to rotate the entities or entity\r\n            log(fn + ". constructor this.group: ", _this.group);\r\n            if (_speed)\r\n                _this.speed = _speed;\r\n            if (_axis)\r\n                _this.axis = _axis;\r\n            // to change the direction you need to switch the rotation axis upside down with Vector3.negate()\r\n            _this.direction = (!clockwise) ? -1 : 1;\r\n            if (_this.direction == -1)\r\n                _this.axis = _axis.negate();\r\n            return _this;\r\n            //log(fn + ".constructor   this.direction: ", this.direction)\r\n        }\r\n        /* to run once when you activate the system\r\n        activate () {\r\n    \n        }\r\n        */\r\n        GroupRotator.prototype.update = function (dt) {\r\n            var e_1, _a;\r\n            try {\r\n                for (var _b = __values(this.group.entities), _c = _b.next(); !_c.done; _c = _b.next()) {\r\n                    var entity = _c.value;\r\n                    var transform = entity.getComponent(Transform);\r\n                    //let rotAmount = dt * this.speed * this.direction  // this works for direction = 1 but not -1 \r\n                    var rotAmount = dt * this.speed;\r\n                    var rotAxis = this.axis;\r\n                    //log(fn + " update dt " + dt + " rotAmount: ", rotAmount)\r\n                    //debugger\r\n                    transform.rotate(rotAxis, rotAmount);\r\n                }\r\n            }\r\n            catch (e_1_1) { e_1 = { error: e_1_1 }; }\r\n            finally {\r\n                try {\r\n                    if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\r\n                }\r\n                finally { if (e_1) throw e_1.error; }\r\n            }\r\n        };\r\n        return GroupRotator;\r\n    }(groupAwareSystem_1.GroupAwareSystem));\r\n    exports.GroupRotator = GroupRotator;\r\n});\r\ndefine("components/flashdome/systems/proximityScaler", ["require", "exports", "components/flashdome/systems/groupAwareSystem"], function (require, exports, groupAwareSystem_2) {\r\n    "use strict";\r\n    Object.defineProperty(exports, "__esModule", { value: true });\r\n    var fn = "ProximityScaler";\r\n    var ProximityScaler = /** @class */ (function (_super) {\r\n        __extends(ProximityScaler, _super);\r\n        /**\r\n         *\r\n         * @param _group either a string for a group name, a single Entity or a group of entities\r\n         * @param axis\r\n         * @param scaleMin\r\n         * @param scaleMax\r\n         */\r\n        function ProximityScaler(_group, scaleMin, scaleMax, axis, activationDistance) {\r\n            var _this = \r\n            // the super class handles the first parameter either a string, a single Entity or a group of entities\r\n            _super.call(this, _group) || this;\r\n            //public group = {}                                 // defined by super \r\n            _this.axis = Vector3.Up(); // the axis to scale\r\n            _this.scaleMin = 0.5; // the default minimum scale\r\n            _this.scaleMax = 2; // the default maxium scale \r\n            _this.activationDistance = 5; // distance from camera position in m that will start to activate the effect \r\n            log(fn + ". constructor this.group: ", _this.group);\r\n            _this.scaleMin = scaleMin || _this.scaleMin;\r\n            _this.scaleMax = scaleMax || _this.scaleMax;\r\n            _this.axis = axis || _this.axis;\r\n            _this.activationDistance = activationDistance || _this.activationDistance;\r\n            _this.camera = Camera.instance;\r\n            log(fn + ".constructor   this.direction: ", _this.direction);\r\n            return _this;\r\n        }\r\n        /* to run once when you activate the system\r\n        activate () {\r\n            ///TODO possibly calculate the global position in relation to all parent tree\r\n        }\r\n        */\r\n        ProximityScaler.prototype.update = function (dt) {\r\n            var e_2, _a;\r\n            try {\r\n                //let userPos = camera.position\r\n                for (var _b = __values(this.group.entities), _c = _b.next(); !_c.done; _c = _b.next()) {\r\n                    var entity = _c.value;\r\n                    var componentT = entity.getComponent(Transform);\r\n                    var parentT = entity.getParent().getComponent(Transform);\r\n                    // find the distance from the current position to the camera position\r\n                    // put int global coordinates by substracting the parent position\r\n                    // TODO: I\'m calculating only one parent, but there could be many - todo implement a LocalToGlobal method\r\n                    var ttGlobalPos = componentT.position.subtract(parentT.position);\r\n                    var distance1 = Vector3.Distance(ttGlobalPos, this.camera.position); // gives the square rooted value       44\r\n                    var distance = this.distance(ttGlobalPos, this.camera.position); // returns the non square rooted value 1955\r\n                    log(fn + " update ttGlobalPos: " + ttGlobalPos + " - camera.position: " + this.camera.position + " - distance: " + distance + " - Vector3.distance: " + distance1);\r\n                    debugger;\r\n                    // TODO - actvation distance not squared + aslo make it activate only if the camera pos is UNDER the dome == within it\'s radius\r\n                    if (distance < this.activationDistance) {\r\n                        // find the percentage of this distance based on the range scaleMin > scaleMax\r\n                        // TODO see if Scalar.PercentToRange, and Scalar.RangeToPercent can be helpful\r\n                        var posInDistanceRange = distance / this.activationDistance;\r\n                        var scaleSize = this.valueToRange(posInDistanceRange, 0, this.activationDistance, this.scaleMin, this.scaleMax);\r\n                        log(fn + " update valueToRange: " + scaleSize);\r\n                        componentT.scale.scale(scaleSize);\r\n                    }\r\n                    //log(fn + " update dt " + dt + " rotAmount: ", rotAmount)\r\n                    //debugger\r\n                    //transform.rotate(rotAxis, rotAmount)\r\n                }\r\n            }\r\n            catch (e_2_1) { e_2 = { error: e_2_1 }; }\r\n            finally {\r\n                try {\r\n                    if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\r\n                }\r\n                finally { if (e_2) throw e_2.error; }\r\n            }\r\n        };\r\n        // Get distance\r\n        /**\r\n         * Get Distance\r\n         * copied from here https://github.com/decentraland-scenes/Gnark-patrol/blob/ae2d12598e95369bab8eebf76de798feb989e193/src/game.ts#L155\r\n         * optimized to avoid having to use th square root\r\n         * - TODO compare with Vector3.Distance(pos1, pos2)\r\n         * - TODO refactor into DCLUtils\r\n         * Note:\r\n         * This function really returns distance squared, as it\'s a lot more efficient to calculate.\r\n         * The square root operation is expensive and isn\'t really necessary if we compare the result to squared values.\r\n         * We also use {x,z} not {x,y}. The y-coordinate is how high up it is.\r\n         * @param pos1 Vector3\r\n         * @param pos2 Vector3 - usuall the camera.position\r\n         */\r\n        ProximityScaler.prototype.distance = function (pos1, pos2) {\r\n            var a = pos1.x - pos2.x;\r\n            var b = pos1.z - pos2.z;\r\n            return a * a + b * b;\r\n        };\r\n        /**\r\n         * TODO see if there are API to get this already\r\n         * eg in Scalar https://github.com/decentraland/ecs-reference/blob/master/docs-latest/decentraland-ecs.scalar.md\r\n         * there are many possible useful functions   PercentToRange, RangeToPercent, Lerp, Denormalize, Clamp\r\n         * @param posA\r\n         * @param Amin\r\n         * @param Amax\r\n         * @param Bmin\r\n         * @param Bmax\r\n         */\r\n        ProximityScaler.prototype.valueToRange = function (posA, Amin, Amax, Bmin, Bmax) {\r\n            var newVal = (((posA - Amin) * (Bmax - Bmin)) / (Amax - Amin)) + Bmin;\r\n            /* or more readable;\r\n            var rangeA = (Amax - Amin);\r\n            var rangeB = (Bmax - Bmin);\r\n            var newVal = ( ((posA - Amin) * rangeB) / rangeA )) + Bmin;\r\n            */\r\n            return newVal;\r\n        };\r\n        return ProximityScaler;\r\n    }(groupAwareSystem_2.GroupAwareSystem));\r\n    exports.ProximityScaler = ProximityScaler;\r\n});\r\ndefine("components/flashdome/systems/index", ["require", "exports", "components/flashdome/systems/groupRotator", "components/flashdome/systems/proximityScaler", "components/flashdome/systems/groupAwareSystem"], function (require, exports, groupRotator_1, proximityScaler_1, groupAwareSystem_3) {\r\n    "use strict";\r\n    Object.defineProperty(exports, "__esModule", { value: true });\r\n    exports.GroupRotator = groupRotator_1.GroupRotator;\r\n    exports.ProximityScaler = proximityScaler_1.ProximityScaler;\r\n    exports.GroupAwareSystem = groupAwareSystem_3.GroupAwareSystem;\r\n});\r\n// this is the basic class that all generators should extend\r\n// generators are the curves that change the overall shape of the dome\r\ndefine("components/flashdome/generators/generator", ["require", "exports", "components/flashdome/domeSettings"], function (require, exports, domeSettings_2) {\r\n    "use strict";\r\n    Object.defineProperty(exports, "__esModule", { value: true });\r\n    var fn = "Generator";\r\n    //log(fn)\r\n    //Abstract classes allow to force subclasses to implement a certain method\r\n    var Generator = /** @class */ (function () {\r\n        /**\r\n         * requires different arguments but I\'m using the compact version to simplify adding them\r\n         * read in the constructor the order of the parameters\r\n         * @param args _settings:any, _domeEntity:Entity\r\n         */\r\n        function Generator(args) {\r\n            this.settings = args.settings || domeSettings_2.domeSettings;\r\n            this.dome = args.dome;\r\n            this.groups = new Array();\r\n            log(fn + ".constructor this dome: ", this.dome);\r\n        }\r\n        /* UNSOLVED how to access the iterator ...args  in typescript so I turned it into an object\r\n       constructor(...args: any ) {\r\n           //let args = Array.values(_args)//arguments //Array.from(_args)\r\n           this.settings = args[0] // settings\r\n           this.dome     = args[1]  // dome Entity\r\n           //this.settings = args.next()\r\n           //this.settings = args.next()\r\n           debugger\r\n   \n           [this.settings, this.dome] = args\r\n           log(fn + ".constructor")\r\n           log(fn + ".constructor this dome: ", this.dome);\r\n           \n           //this.tileType = this.setTileType();\r\n       }\r\n       */\r\n        //DEV simple function to verify which generator has been called\r\n        Generator.prototype.getName = function () { return this.name; };\r\n        ;\r\n        return Generator;\r\n    }());\r\n    exports.Generator = Generator;\r\n});\r\ndefine("components/flashdome/tiles/dotTile", ["require", "exports", "components/flashdome/tiles/tile"], function (require, exports, tile_1) {\r\n    "use strict";\r\n    Object.defineProperty(exports, "__esModule", { value: true });\r\n    var fn = "DotTile";\r\n    var tileSettings = {\r\n        position: new Vector3(1, 0, 1),\r\n        scale: new Vector3(1, 0.02, 1),\r\n        size: new Size(2, 2),\r\n        radius: 1 // the cilinder has a default radius of 1 - which makes its width=height=2m\r\n    };\r\n    // this is basically an Entity and has all of it\'s properties\r\n    var DotTile = /** @class */ (function (_super) {\r\n        __extends(DotTile, _super);\r\n        function DotTile(_name) {\r\n            var _this = _super.call(this) || this;\r\n            _this.name = _name || fn;\r\n            //log(fn + ".constructor _name: "+ _name + " - this.name: " + this.name);\r\n            _this.size = tileSettings.size;\r\n            //log(fn + ".constructor this: ", this);\r\n            _this.createTile();\r\n            return _this;\r\n        }\r\n        DotTile.prototype.createTile = function (transform) {\r\n            //log(fn + ".createTile this: ", this);\r\n            // no need to create new Entity since this class is already one\r\n            // set basic Transform if it\'s not passed as a parameter\r\n            var t = transform || new Transform({\r\n                position: tileSettings.position,\r\n                scale: tileSettings.scale,\r\n            });\r\n            // add a transform to the entity    \r\n            this.addComponent(new Transform(t));\r\n            //log(fn + ".createTile position: ", this.getComponent(Transform).position);\r\n            // add the material to color it - \r\n            // !!!!!!  NO! let the generator assign a common material otherwise you will incur in Unloading scene at 0,0 due to exceeded limits\r\n            //this.addComponent(new Material());          \r\n            //this.getComponent(Material).albedoColor = Color3.Blue();\r\n            //Cilinder\r\n            var cilShape = new CylinderShape();\r\n            cilShape.radiusTop = 1;\r\n            cilShape.arc = 180; // ACHTUNG-BUG: this does not work\r\n            this.addComponent(cilShape); // add a shape to the entity\r\n            /* BEHAVIOR\r\n            // quick test to see duplicates... move this one\r\n            this.addComponent(\r\n                new OnClick(e => {\r\n                    log("Tile clicked e: ", e);\r\n                    log("Tile clicked Vector3: ", Vector3);\r\n                    log("Tile clicked Object.keys(Vector3): ", Object.keys(Vector3));\r\n                    log("Tile clicked Object.keys(position): ", Object.keys(this.getComponent(Transform).position));\r\n                    log("Tile clicked position.hasOwnProperty(\'add\')): ", this.getComponent(Transform).position.hasOwnProperty(\'add\'));\r\n                    log("Tile clicked position.hasOwnProperty(\'addInPlace\')): ", this.getComponent(Transform).position.hasOwnProperty(\'addInPlace\'));\r\n                    \n                    //tile.getComponent(Transform).position.set(1,2,1)                      // position set works\r\n                    //tile.getComponent(Transform).position.add(new Vector3(1,0, 1))        // position .add doesn\'t\r\n                    this.getComponent(Transform).position.addInPlace(new Vector3(1,0, 1))   // addInPlace works too\r\n    \n                })\r\n            )*/\r\n            engine.addEntity(this); // add the entity to the engine\r\n            return this;\r\n        };\r\n        return DotTile;\r\n    }(tile_1.Tile));\r\n    exports.default = DotTile;\r\n});\r\ndefine("components/flashdome/tiles/planeTile", ["require", "exports", "components/flashdome/tiles/tile"], function (require, exports, tile_2) {\r\n    "use strict";\r\n    Object.defineProperty(exports, "__esModule", { value: true });\r\n    var fn = "PlaneTile";\r\n    var tileSettings = {\r\n        position: new Vector3(1, 0, 1),\r\n        // These should be the real dimensions, but they cause a problem with circles1Gen so I cheated to have size that work\r\n        // it\'s mainly the size that is causing problems... small size numbers < 1.7 will cause infinity\r\n        //scale: new Vector3(1,0.03,1),    // flatten the box to a thin plane\r\n        //size: new Size(1,1),             // the primitive object has 1m x 1m but the Size object only has 2 variables TODO-maybe create your own\r\n        // these are the sizes that work\r\n        scale: new Vector3(2, 0.03, 2),\r\n        size: new Size(1.8, 1.8),\r\n    };\r\n    // this is basically an Entity and has all of it\'s properties\r\n    var PlaneTile = /** @class */ (function (_super) {\r\n        __extends(PlaneTile, _super);\r\n        function PlaneTile(_name) {\r\n            var _this = _super.call(this) || this;\r\n            //log(fn + ".constructor this: ", this);\r\n            //log(fn + ".constructor Entity: ", Entity);\r\n            _this.name = _name || fn;\r\n            _this.size = tileSettings.size;\r\n            _this.createTile();\r\n            return _this;\r\n        }\r\n        PlaneTile.prototype.createTile = function (transform) {\r\n            var t = transform || new Transform({\r\n                position: tileSettings.position,\r\n                scale: tileSettings.scale,\r\n            });\r\n            this.addComponent(t); // add a transform to the entity\r\n            var shape = new BoxShape();\r\n            this.addComponent(shape); // add a shape to the entity\r\n            //this.addComponent(new Material());      // add the material to color it\r\n            //this.getComponent(Material).albedoColor = Color3.Red();\r\n            engine.addEntity(this); // add the entity to the engine\r\n            return this;\r\n        };\r\n        return PlaneTile;\r\n    }(tile_2.Tile));\r\n    exports.default = PlaneTile;\r\n});\r\ndefine("components/flashdome/tiles/index", ["require", "exports", "components/flashdome/tiles/tile", "components/flashdome/tiles/dotTile", "components/flashdome/tiles/planeTile"], function (require, exports, tile_3, dotTile_1, planeTile_1) {\r\n    "use strict";\r\n    Object.defineProperty(exports, "__esModule", { value: true });\r\n    var fn = "tileIndex";\r\n    exports.Tile = tile_3.Tile;\r\n    exports.DotTile = dotTile_1.default;\r\n    exports.PlaneTile = planeTile_1.default;\r\n});\r\n// this is a simple way to debug the shape\r\n// it simply puts a single entity at the center of the plot, so that you can manipulate it as a single item without \r\ndefine("components/flashdome/generators/singleEntityGen", ["require", "exports", "components/flashdome/generators/generator"], function (require, exports, generator_1) {\r\n    "use strict";\r\n    Object.defineProperty(exports, "__esModule", { value: true });\r\n    var fn = "SingleEntityGen";\r\n    //log(fn)\r\n    var SingleEntityGen = /** @class */ (function (_super) {\r\n        __extends(SingleEntityGen, _super);\r\n        function SingleEntityGen(args) {\r\n            var _this = _super.call(this, args) || this;\r\n            // utility function to rotate trough different code settings by clicking on the tile\r\n            // TODO convert into an iterator and have this.clickHandler.next()\r\n            _this.clickCount = 0;\r\n            _this.name = "SingleEntityGen";\r\n            log(fn + ".constructor");\r\n            return _this;\r\n            //log(fn + ".constructor 2 this.settings: ", this.settings);\r\n        }\r\n        SingleEntityGen.prototype.generateCurve = function (tileObj) {\r\n            var _this = this;\r\n            this.tileType = tileObj;\r\n            log(fn + ".generateCurve with tileObj: ", tileObj);\r\n            log(fn + ".generateCurve with this.tileType: ", this.tileType);\r\n            // 1 - Create the tile(s)\r\n            var t1 = new this.tileType(); // Works even if Typescript complains :) yay!\r\n            this.tile = t1;\r\n            // add it as a children of dome\r\n            t1.setParent(this.dome);\r\n            log(fn + ".generateCurve added tile as a children of dome - verifying dome.children: ", this.dome.children);\r\n            // POSITION - use default tile position\r\n            //let pos = DCLUtils.getParcelCenter(this.settings.parcel.w, this.settings.parcel.h);   // center\r\n            //let pos = new Vector3(0.5, 0, 0.5)                                                    // to visually measure it\'s size\r\n            //log(fn + ".generateCurve position from DCLUtils.getParcelCenter(): ", pos)\r\n            //t1.getComponent(Transform).position = pos;\r\n            // MATERIAL\r\n            t1.getComponent(Material).albedoColor = Color3.FromHexString(this.settings.dclColors.red);\r\n            //let gradientRY = this.settings.dclColors.gradients.redToYellow  \r\n            //let gradientRP = this.settings.dclColors.gradients.purpleToRed\r\n            //t1.getComponent(Material).albedoColor = Color3.Lerp( Color3.FromHexString(gradientRY[0]), Color3.FromHexString(gradientRY[1]), 0.5);\r\n            var clickCount = 0;\r\n            // set a sample behavior - simply moves on click\r\n            t1.addComponent(new OnClick(function (e) {\r\n                //log("Tile clicked Size: ", t1.size)\r\n                _this.clickHandler();\r\n                //tile.getComponent(Transform).position.set(1,2,1)                      // position set works\r\n                //tile.getComponent(Transform).position.add(new Vector3(1,0, 1))        // position .add doesn\'t\r\n                //t1.getComponent(Transform).position.addInPlace(new Vector3(1,0, 1))   // addInPlace works too\r\n            }));\r\n        };\r\n        SingleEntityGen.prototype.clickHandler = function () {\r\n            log(fn + "clickHandler clickCount 1: " + this.clickCount);\r\n            var c = this.clickCount;\r\n            var t = this.tile;\r\n            var tc;\r\n            var gradientRY = this.settings.dclColors.gradients.redToYellow;\r\n            var gradientRP = this.settings.dclColors.gradients.purpleToRed;\r\n            log("Color3.Yellow(): ", Color3.Yellow());\r\n            log("Color3.FromHexString(gradientRY[0]): ", Color3.FromHexString(gradientRY[0]));\r\n            // experiments - if else more compact\r\n            var maxC = 6; //number of click experiments after which cycle through\r\n            if (c == 0)\r\n                tc = Color3.FromHexString(this.settings.dclColors.orange);\r\n            else if (c == 1)\r\n                tc = Color3.FromHexString(this.settings.dclColors.red);\r\n            else if (c == 2)\r\n                tc = Color3.FromHexString(this.settings.dclColors.yellow);\r\n            else if (c == 3)\r\n                tc = Color3.FromHexString(this.settings.dclColors.yellowSun);\r\n            else if (c == 4)\r\n                tc = Color3.FromHexString(this.settings.dclColors.purple);\r\n            else if (c == 5)\r\n                tc = Color3.Lerp(Color3.FromHexString(gradientRY[0]), Color3.FromHexString(gradientRY[1]), 0.5);\r\n            else if (c == 6)\r\n                tc = Color3.Lerp(Color3.FromHexString(gradientRP[0]), Color3.FromHexString(gradientRP[1]), 0.5);\r\n            // assign it at the end\r\n            this.tile.getComponent(Material).albedoColor = tc;\r\n            // cycle through experiments\r\n            this.clickCount = (c > maxC) ? 0 : (c + 1);\r\n            log(fn + "clickHandler clickCount2: " + this.clickCount);\r\n        };\r\n        return SingleEntityGen;\r\n    }(generator_1.Generator));\r\n    exports.default = SingleEntityGen;\r\n});\r\ndefine("components/flashdome/generators/doubleEntityGen", ["require", "exports", "components/flashdome/generators/generator"], function (require, exports, generator_2) {\r\n    "use strict";\r\n    Object.defineProperty(exports, "__esModule", { value: true });\r\n    var fn = "DoubleEntityGen";\r\n    // Generator Settings as a simple editable object\r\n    var S = {\r\n        maxTiles: 4\r\n    };\r\n    var DoubleEntityGen = /** @class */ (function (_super) {\r\n        __extends(DoubleEntityGen, _super);\r\n        //constructor(_settings:any, _domeEntity:Entity){\r\n        //constructor(...args: any[]){    // unsolved how to access the iterator withour Array.from\r\n        function DoubleEntityGen(args) {\r\n            var _this = this;\r\n            log(fn + ".constructor 1");\r\n            _this = _super.call(this, args) || this;\r\n            _this.name = "DoubleEntityGen";\r\n            return _this;\r\n            //log(fn + ".constructor 2 this.settings: ", this.settings);\r\n        }\r\n        // V2 in a for loop\r\n        DoubleEntityGen.prototype.generateCurve = function (tileObj) {\r\n            log(fn + ".generateCurve with tileObj: ", tileObj);\r\n            // Create the tile(s)\r\n            this.tileType = tileObj;\r\n            var t = 0; // important declare it outside of the scope otherwise it will be undefined\r\n            var _loop_1 = function () {\r\n                log(fn + ".generateCurve t: " + t);\r\n                // create the tile\r\n                var tile = new this_1.tileType(String("tile_" + t)); // Works even if Typescript complains :) yay!\r\n                // change it\'s position\r\n                var position = new Vector3(1, 1, 1 * t); // every tile put it 1m apart in the z axis\r\n                tile.setParent(this_1.dome);\r\n                tile.getComponent(Transform).position = position;\r\n                tile.getComponent(Material).albedoColor = Color3.Random(); // Green()\r\n                // set a sample behavior - simply moves on click\r\n                tile.addComponent(new OnClick(function (e) {\r\n                    log("Tile clicked e: ", e);\r\n                    log(fn + " - tile clicked name: " + tile.name + " - z: " + tile.getComponent(Transform).position.z);\r\n                    tile.getComponent(Transform).position.addInPlace(new Vector3(1, 0, 0));\r\n                }));\r\n            };\r\n            var this_1 = this;\r\n            for (t = 0; t <= S.maxTiles; t++) {\r\n                _loop_1();\r\n            }\r\n            debugger;\r\n        };\r\n        return DoubleEntityGen;\r\n    }(generator_2.Generator));\r\n    exports.default = DoubleEntityGen;\r\n});\r\ndefine("components/flashdome/customCoponents", ["require", "exports"], function (require, exports) {\r\n    "use strict";\r\n    Object.defineProperty(exports, "__esModule", { value: true });\r\n    /**\r\n     * simple custom component to flag and group together a series of tiles of the dome\r\n     */\r\n    var TileGroup = /** @class */ (function () {\r\n        function TileGroup(groupN, groupName, groupColor) {\r\n            this.spinning = true;\r\n            this.groupN = groupN;\r\n            this.groupName = groupName;\r\n            this.groupColor = groupColor;\r\n        }\r\n        TileGroup = __decorate([\r\n            Component(\'tileGroup\'),\r\n            __metadata("design:paramtypes", [Number, String, Color3])\r\n        ], TileGroup);\r\n        return TileGroup;\r\n    }());\r\n    exports.TileGroup = TileGroup;\r\n});\r\n// TODO - BUG why it doesn\'t work anymore with tiles that have size 1,1 (like PlaneTile) - I\'ve cheated and put that fake size in PlaneTile to make it work \r\n//      // it\'s mainly the size that is causing problems... small tileSize numbers < 1.7 will cause infinity in some fractions that use it\r\n// TODO clean all the algorithms and convert to a geodesic dome rather than hacking together all the positions of the tiles with the double for loop\r\ndefine("components/flashdome/generators/circles1Gen", ["require", "exports", "components/flashdome/generators/generator", "components/utils/dclUtils", "components/flashdome/customCoponents", "components/utils/EntityGroups", "components/flashdome/systems/index"], function (require, exports, generator_3, dclUtils_1, customCoponents_1, EntityGroups_2, systems) {\r\n    "use strict";\r\n    Object.defineProperty(exports, "__esModule", { value: true });\r\n    var fn = "Circles1Gen";\r\n    //log(fn)\r\n    // Generator Settings as a simple editable object\r\n    var S = {\r\n        radius: 2,\r\n        tileDistance: 0.5,\r\n        circlesDistance: -1,\r\n        domeRadiusMax: 16,\r\n        //circles: 3,                     // number of concentric circles\r\n        heightMax: 15,\r\n        heightMin: 3,\r\n        heightOffset: -5,\r\n        lookAtCenter: new Vector3(0, -2, 0),\r\n        // System parameters            //goo combos (dome, tile): (5, 50)\r\n        rotSpeedDome: 5,\r\n        rotSpeedTile: 50,\r\n        alternateRotCircles: true,\r\n        proximitySensor: false // ***** enable that each tile responds to user presence ***** UNFINISHED\r\n        ,\r\n        tileScaleMin: 0.2,\r\n        tileScaleMax: 0.5,\r\n    };\r\n    var Circles1Gen = /** @class */ (function (_super) {\r\n        __extends(Circles1Gen, _super);\r\n        function Circles1Gen(args) {\r\n            var _this = _super.call(this, args) || this;\r\n            _this.name = fn;\r\n            log(fn + ".constructor");\r\n            return _this;\r\n        }\r\n        Circles1Gen.prototype.generateCurve = function (tileObj) {\r\n            this.tileType = tileObj;\r\n            log(fn + ".generateCurve with tileObj: ", tileObj);\r\n            // I need an instance of a tile to get it\'s size\r\n            // but immediateley delete it since you don\'t need it anymore \r\n            var t0 = new tileObj();\r\n            var tileSize = t0.size;\r\n            engine.removeEntity(t0);\r\n            log(fn + ".generateCurve tileSize: ", tileSize);\r\n            //V1 - set the number of circles vs setting domeRadius and diving by the width and distance\r\n            // Achtung there is a condition when tileSize.width (= 1) + S.circlesDistance (-1) that (circles / 0) will be infinity\r\n            var circleLength = (tileSize.width + S.circlesDistance);\r\n            if (circleLength == 0)\r\n                circleLength = tileSize.width + (0.1 * S.circlesDistance); // solve infinity\r\n            var circles = Math.round(S.domeRadiusMax / circleLength); //(tileSize.width + S.circlesDistance)\r\n            this.circles = circles;\r\n            log(fn + ".generateCurve circles in dome :" + circles);\r\n            var radius = S.radius || this.settings.radius; // starting radius of the circle in m\r\n            var startRadius = radius;\r\n            var center = dclUtils_1.DCLUtils.getParcelCenter();\r\n            var angleInc, circleH;\r\n            var lastTile; // horrible hack to get the last children\'s height\r\n            //loop through the circles\r\n            for (var c = 0; c < circles; c++) {\r\n                ////////////////////////////    TILE POSITIONS\r\n                // TODO use the Angle class https://github.com/decentraland/ecs-reference/blob/master/docs-latest/decentraland-ecs.angle.md\r\n                //Angle.FromDegrees(degreesHere).radians()\r\n                //Angle.FromRadians(radiansHere).degrees()\r\n                // finding the angle increment that will put each tile side by side without spacing between them nor overlap\r\n                // this works for round tiles as I\'m assuming that the distance between the center of 2 tiles is tileSize.width\r\n                // it might not work for other tiles sizes, but it\'s a workable approximation\r\n                // this distance on the circle, creates an isosceles triangle because two sides are the radius, \r\n                // and the angle between them can be solved with the cosine formula https://en.wikipedia.org/wiki/Law_of_cosines \r\n                // solving for the angle alpha as here https://math.stackexchange.com/questions/185829/how-do-you-find-an-angle-between-two-points-on-the-edge-of-a-circle\r\n                var distance = tileSize.width + (tileSize.width * (S.tileDistance / 2));\r\n                var distance2 = Math.pow(distance, 2);\r\n                //radius = startRadius + ((tileSize.width + S.circlesDistance) * c)     // adapt the radius to the given circle\r\n                radius = startRadius + (circleLength * c);\r\n                var r2 = Math.pow(2 * radius, 2);\r\n                angleInc = Math.acos((r2 - distance2) / r2); // the first angleInc is ideal but we want an int number of tiles in a circle, not a float\r\n                var tilesPerCircle = Math.ceil((2 * Math.PI) / angleInc); // round to a full number of tile per circle\r\n                angleInc = (2 * Math.PI) / tilesPerCircle; // now find the angleInc to rounded number of dots per circle\r\n                log("\\n\\n\\n" + fn + ".generateCurve Circle: " + c + " with Radius: " + radius + " - tile distance: " + distance);\r\n                log(fn + ".generateCurve Circle: " + c + "  - angleInc 1: " + angleInc + " -  tilesPerCircle: " + tilesPerCircle);\r\n                // circle height TODO FINISH and clean the algorithm (maybe even changing x and z of a sphere rather than calculating circles and heights)\r\n                //let heightRange = (S.heightMax - S.heightMin)           // 15-3 = 12\r\n                //circleH = 15                                          // V1 - fixed height\r\n                //circleH = S.heightMax - ((heightRange / circles) * c) // V2 - this creates a linear height variation - not right\r\n                //circleH = Math.sqrt( Math.pow(S.domeRadiusMax + S.heightMin, 2) - Math.pow(radius, 2) ) - S.heightMin // V3   if you put -8 positions it to zero >> make it dependent on C\r\n                circleH = Math.sqrt(Math.pow(S.domeRadiusMax + S.heightMin, 2) - Math.pow(radius, 2)) + S.heightOffset; //V4 works with a hack\r\n                ////////////////////////////   MATERIAL \r\n                // unfinished material exploration\r\n                // circle color - gradient from inner circle to bottom circle\r\n                var gradient = this.settings.dclColors.gradients.redToYellow;\r\n                var circlePercentage = c / circles;\r\n                var circleColor = Color3.Lerp(Color3.FromHexString(gradient[0]), Color3.FromHexString(gradient[1]), circlePercentage);\r\n                //let circleColor = Color3.FromHexString(this.settings.dclColors.red)\r\n                log(fn + ".generateCurve Circle: " + c + "/" + circles + " = circlePercentage: " + circlePercentage + " - circleColor: " + circleColor);\r\n                // assign a commong material to all tiles in a circle so that you don\'t exceed the limits\r\n                var circleMaterial = new Material();\r\n                circleMaterial.albedoColor = circleColor;\r\n                circleMaterial.metallic = 1;\r\n                circleMaterial.ambientColor = Color3.FromHexString(this.settings.dclColors.yellowSun);\r\n                //circleMaterial.directIntensity = 1 //default 1\r\n                //circleMaterial.disableLighting = true;\r\n                circleMaterial.environmentIntensity = 0.5;\r\n                circleMaterial.emissiveColor = Color3.FromHexString(this.settings.dclColors.yellowSun); // not very emissive\r\n                circleMaterial.emissiveIntensity = 0.1; // not very emissive\r\n                //circleMaterial.emissiveTexture = new Texture("materials/dcl_logo.svg")  //doesn´t work\r\n                //circleMaterial.alpha = 0.5;\r\n                //const logoTexture = new Texture("materials/dcl_logo.svg")\r\n                //circleMaterial.albedoTexture = logoTexture\r\n                // loop through all the angles for this circle and position the tiles\r\n                var a = 0;\r\n                var count = 1;\r\n                //while (a < 2*Math.PI) {       /// this works to clearly separate the angles\r\n                while (count <= tilesPerCircle) {\r\n                    //log ("\\n\\n" + fn + "generateCurve a: " + a)\r\n                    var x = (Math.cos(a) * radius); // + center.x  // offset to center not needed because I moved dome\r\n                    var z = (Math.sin(a) * radius); // + center.z\r\n                    var y = circleH; // all tiles inside of a circle will have the same height                           \r\n                    var countStr = "tile_c" + c + "_" + count.toString();\r\n                    var t = new tileObj(countStr); //BB << maybe this is the one that is generating always the same?\r\n                    //let t = new this.tileType(countStr);\r\n                    var tt = t.getComponent(Transform);\r\n                    tt.position = new Vector3(x, y, z);\r\n                    // the target position is not the center of the parcel only because every tile is a children of the dome Entity\r\n                    // that has been moved to the center. TODO - find a universal way to do localToGlobal and GlobalToLocal\r\n                    var targetPos = S.lookAtCenter || new Vector3(0, 0, 0); // DCLUtils.getParcelCenter()\r\n                    // face the lower side to the target (center of the scene)\r\n                    // Interweaver solution - if you only use lookAt it will always point the main forward vector to the target (the side of the cylinder or tile)\r\n                    // in order to point the lower face of the tile, you need to also rotate the main face (in this case 90 degrees around either the X axis)\r\n                    // but you need to do it after the lookAt transformation AND ADDING to it...not substituting it\r\n                    // if you use rotation.setEuler it won\'t work because as Interweaver tought me\r\n                    //  `setEuler` and `lookAt` are both \'overwrite\' functions that ignore whatever\'s in there already.\r\n                    tt.lookAt(targetPos, Vector3.Up());\r\n                    tt.rotation = tt.rotation.multiply(Quaternion.Euler(90, 0, 0));\r\n                    // assign one unique material per circle in order to save space > otherwise I get "Unloading scene at 0,0 due to exceeded limits" >>  https://docs.decentraland.org/development-guide/materials/#reuse-materials\r\n                    t.addComponent(circleMaterial);\r\n                    // add customComponent to group them by circle\r\n                    t.addComponent(new customCoponents_1.TileGroup(c, "circle_" + c, circleMaterial.albedoColor));\r\n                    /* useful for debugging - click on a tile to move it and see if there are others undeneath it\r\n                    t.addComponent(\r\n                        new OnClick(e => {\r\n                            var ent = this.dome.children[e.entityId]\r\n                            log("Tile clicked entity name: " + ent.name + " - position: ", ent.getComponent(Transform).position );\r\n                            //console.log("Tile clicked e: ", e);\r\n                            t.getComponent(Transform).position.addInPlace(new Vector3(1,0, 1))\r\n                        })\r\n                    )\r\n                    */\r\n                    // set it to a child of the dome\r\n                    t.setParent(this.dome);\r\n                    //engine.addEntity(t); // this automatically done by the new tileObj()\r\n                    // done - increment angle for the next round and tile\r\n                    a += angleInc;\r\n                    //log(fn + ".generateCurve angle:" + a +" - x: " + x + " - z: " + z );\r\n                    count++;\r\n                }\r\n                // finished creating one of the circles - add these tiles to a group\r\n                // I need a custom dynamic group class because the current methods don\'t allow me to create a group for components whose tileGroup.groupN == 0 (or 1, or the circleNumber)\r\n                // getComponentGroup https://github.com/decentraland/ecs-reference/blob/master/docs-latest/decentraland-ecs.engine.getcomponentgroup.md\r\n                // getEntitiesWithComponent //https://github.com/decentraland/ecs-reference/blob/master/docs-latest/decentraland-ecs.engine.getentitieswithcomponent.md\r\n                //this.groups["circle_" + c] = engine.getEntitiesWithComponent("TileGroup.groupN") \r\n                var groupName = "group" + c;\r\n                this.groups[groupName] = EntityGroups_2.default.createGroupWithComponentsAndCondition("tileGroup", "groupN", "==" + c, groupName);\r\n            }\r\n            // done creating all tiles, create a group with ALL tiles\r\n            this.groups["allTiles"] = engine.getComponentGroup(customCoponents_1.TileGroup);\r\n            log(fn + ".generateCurve - DONE GENERATING CURVE this.dome: ", this.dome.children);\r\n            log(fn + ".generateCurve this.groups: ", this.groups);\r\n            this.addSystems();\r\n        };\r\n        //TODO find a way to do this dynamically and activate or disable certain systems through the settings\r\n        Circles1Gen.prototype.addSystems = function () {\r\n            log(fn + ".addSystems generatorSettings: ", S);\r\n            log(fn + ".addSystems domeSettings: ", this.dome);\r\n            log(fn + ".addSystems params rotSpeedDome: " + S.rotSpeedDome + " \\t - rotSpeedTile: " + S.rotSpeedTile);\r\n            // rotate the whole dome super slow S.rotSpeedDome\r\n            if (S.rotSpeedDome > 0) {\r\n                engine.addSystem(new systems.GroupRotator(this.dome, false, S.rotSpeedDome, Vector3.Up()));\r\n            }\r\n            //* experiment rotate each circle in different directions\r\n            if (S.alternateRotCircles == true) {\r\n                var dir = false;\r\n                for (var c = 0; c < this.circles; c++) {\r\n                    var g = "group" + c; //use the group Name rather than the group object     //this.groups["group"+c];\r\n                    dir = !dir; //at each circle rotate in a different direction\r\n                    var priority = 1 * c;\r\n                    engine.addSystem(new systems.GroupRotator(g, dir, S.rotSpeedTile, new Vector3(1, 0, 1))); //Vector3.Forward() ) ) // this works to flip all tiles  \r\n                }\r\n            }\r\n            // TODO - Interactive System : follow the camera\r\n            if (S.proximitySensor) {\r\n                var g = engine.getComponentGroup(customCoponents_1.TileGroup);\r\n                engine.addSystem(new systems.ProximityScaler(g));\r\n            }\r\n        };\r\n        return Circles1Gen;\r\n    }(generator_3.Generator));\r\n    exports.default = Circles1Gen;\r\n});\r\n/// Fibonacci Generator - UNFINISHED do not use yet\r\n//TODO - right now x is increasing by very little amounts and z is always 0\r\ndefine("components/flashdome/generators/fibonacciGen", ["require", "exports", "components/flashdome/generators/generator"], function (require, exports, generator_4) {\r\n    "use strict";\r\n    Object.defineProperty(exports, "__esModule", { value: true });\r\n    var fn = "FibonacciGenerator";\r\n    //log(fn)\r\n    // Generator Settings\r\n    var goldenRatio = (1 / 1.618033989);\r\n    var S = {\r\n        G: goldenRatio,\r\n        GA: 360 - 360 * goldenRatio,\r\n        radius: 2,\r\n        rgrowth: 1.005,\r\n        maxTiles: 30 // Nr of iterations = Nr of Tiles that will be attached            \r\n    };\r\n    var FibonacciGen = /** @class */ (function (_super) {\r\n        __extends(FibonacciGen, _super);\r\n        function FibonacciGen(args) {\r\n            var _this = _super.call(this, args) || this;\r\n            _this.name = "FibonacciGen";\r\n            log(fn + ".constructor S: ", S); // verifying I can read the settings\r\n            return _this;\r\n        }\r\n        FibonacciGen.prototype.generateCurve = function (tileObj) {\r\n            log(fn + ".generateCurve with tileObj: ", tileObj);\r\n            var rot = 0; // the angle that the tile should be offset by. it is increased by S.GA every iteration\r\n            var curN = S.maxTiles;\r\n            var rad = S.radius;\r\n            var x, y, z, percentage;\r\n            var t;\r\n            var gradientRY = this.settings.dclColors.gradients.redToYellow;\r\n            var gradientRP = this.settings.dclColors.gradients.purpleToRed;\r\n            //for (let i = curN; i > 0 ;i-- ) {\r\n            while (curN > 0) {\r\n                curN--;\r\n                // increase rotation making sure it\'s in the 0-360 angle\r\n                rot += S.GA;\r\n                rot -= (rot / 360) * 360;\r\n                //log("\\n" + curN + " - rot: " + rot);\r\n                //set the new radius\r\n                rad *= S.rgrowth;\r\n                //calculate the new x and z positions\r\n                x = Math.cos(rot * Math.PI / 180) * rad;\r\n                z = Math.sin(rot * Math.PI / 180) * rad;\r\n                y = 0.1; //TODO - first do flat on the floor, then take care of elevation and tile rotation\r\n                log("\\n" + curN + " - rot: " + rot + " - x: " + x + " - z: " + z);\r\n                // now we are ready to create the tile and position it\r\n                t = new tileObj(); // Works even if Typescript complains :) yay!\r\n                t.getComponent(Transform).position.set(x, y, z);\r\n                // color it as a percentage of the distance from the end so that you know what you are looking at\r\n                percentage = (curN / S.maxTiles);\r\n                t.getComponent(Material).albedoColor = Color3.Lerp(Color3.FromHexString(gradientRY[0]), Color3.FromHexString(gradientRY[1]), percentage);\r\n                // set the dome as parent\r\n                t.setParent(this.dome);\r\n            }\r\n            console.log("this.dome: ", this.dome); // trace to see if it has all the childred\r\n        };\r\n        return FibonacciGen;\r\n    }(generator_4.Generator));\r\n    exports.default = FibonacciGen;\r\n});\r\n// index that exports all available generators in one single convenient file import\r\n// syntax ref https://stackoverflow.com/questions/40702842/how-to-import-all-modules-from-a-directory-in-typescript\r\ndefine("components/flashdome/generators/index", ["require", "exports", "components/flashdome/generators/generator", "components/flashdome/generators/singleEntityGen", "components/flashdome/generators/doubleEntityGen", "components/flashdome/generators/circles1Gen", "components/flashdome/generators/fibonacciGen"], function (require, exports, generator_5, singleEntityGen_1, doubleEntityGen_1, circles1Gen_1, fibonacciGen_1) {\r\n    "use strict";\r\n    Object.defineProperty(exports, "__esModule", { value: true });\r\n    var fn = "generatorIndex";\r\n    exports.Generator = generator_5.Generator;\r\n    exports.SingleEntityGen = singleEntityGen_1.default;\r\n    exports.DoubleEntityGen = doubleEntityGen_1.default;\r\n    exports.Circles1Gen = circles1Gen_1.default;\r\n    exports.FibonacciGen = fibonacciGen_1.default;\r\n});\r\ndefine("components/flashdome/dome", ["require", "exports", "components/flashdome/domeSettings", "components/flashdome/generators/index", "components/flashdome/tiles/index", "components/utils/dclUtils"], function (require, exports, domeSettings_3, generators, tileTypes, dclUtils_2) {\r\n    "use strict";\r\n    Object.defineProperty(exports, "__esModule", { value: true });\r\n    var fn = "flashDome";\r\n    //import { Tile } from "./tiles/tile";\r\n    //import { GeneratorBase } from "./generators/generatorBase"; // for typing the \r\n    //log(fn + " imported generators: ", generators)                                   // {dclamd: 2}   why?\r\n    log(fn + " imported generators.keys: ", Object.keys(generators)); //["Generator", "SingleEntityGen", "DoubleEntityGen", "dclamd", "context"]\r\n    //log(fn + " imported generators.singleEntityGen: ", generators.SingleEntityGen) //undefined > why?\r\n    //log(fn + " imported tileTypes: ", tileTypes)                                     //{dclamd: 2}   why?\r\n    //log(fn + " imported tileTypes.dclamd: ", tileTypes.dclamd)                       // 2        \r\n    log(fn + " imported tileTypes.keys: ", Object.keys(tileTypes)); //["Tile", "DotTile", "PlaneTile", "dclamd", "context"]\r\n    //log(fn + " imported tileTypes.DotTile: ", tileTypes.DotTile)                   //undefined > why?\r\n    dclUtils_2.DCLUtils.traceKeys(); // dev purposes - DCL show what you got\r\n    // Dome extends Entity so that it can have it´s own children \r\n    var FlashDome = /** @class */ (function (_super) {\r\n        __extends(FlashDome, _super);\r\n        //public eventManager = new EventManager()    // to signal it´s state changes\r\n        //public tileGroup;\r\n        function FlashDome() {\r\n            var _this = _super.call(this) || this;\r\n            _this.settings = domeSettings_3.domeSettings; // no need to go through the constructor\r\n            log(fn + ".constructor called this.settings: ", _this.settings);\r\n            log(fn + ".constructor chosen Generator: ", _this.settings.generator);\r\n            log(fn + ".constructor chosen Tile: ", _this.settings.tile);\r\n            //log(fn + ".constructor engine: ", Object.keys(engine));  // is engine global? yes ["eventManager", "systems", "entityLists", "addedSystems", "_entities", "_disposableComponents", "_componentGroups", "simpleSystems", "rootEntity"]\r\n            //this.parcelCenter = this.getParcelCenter()\r\n            var p = _this.settings.parcel;\r\n            _this.parcelCenter = dclUtils_2.DCLUtils.getParcelCenter(p.w, p.h);\r\n            log(fn + ".constructor called this.center: ", _this.parcelCenter);\r\n            // position it at the center of the parcel, so every child will be already oriented to the center\r\n            _this.getComponentOrCreate(Transform).position = _this.parcelCenter;\r\n            engine.addEntity(_this); // add the dome as an entity\r\n            _this.settings.dome = _this;\r\n            _this.generateDome();\r\n            return _this;\r\n        }\r\n        ///////////////////////////////////////  CREATE THE DOME\r\n        FlashDome.prototype.generateDome = function () {\r\n            log(fn + ".generateDome");\r\n            // 1 - choose dome shape generator (swappable) eg: single, simple circles fibonacci etc\r\n            // get the selected generator from the settings > assigns it to this.generator\r\n            this.setGeneratorFromSettings();\r\n            //log(fn + ".generateDome this.generator: ", this.generator);\r\n            log(fn + ".generateDome Chosen Generator: ", this.generator.name);\r\n            // 2 - choose tile shape - eg dot (flat cilinder, cube, cone) etc\r\n            this.tileObj = this.setTileType();\r\n            //log(fn + ".generateDome1 - log - this.tileObj: ", this.tileObj);                    // it appears undefined in the log although it is not in the console\r\n            //console.log(fn + ".generateDome2 - console.log - this.tileObj: ", this.tileObj)   // shows as a string the code in the function constructor\r\n            //console.dir(fn + ".generateDome3 - console.dir - this.tileObj: ", this.tileObj)   // empty\r\n            //var t1 = new this.tileObj(); // Works even if Typescript complains :) yay!\r\n            // 3 - generate the dome with the given tyle \r\n            this.generator.generateCurve(this.tileObj);\r\n            // TODO 4 - get returned that it\'s done, listen to an event?\r\n            // TODO 5 - attach all systems and animations\r\n        };\r\n        ///////////////////////////////////////  UTITLITIES\r\n        /*TODO put this in a generic DCL utils, other objects will need to know their center\r\n        public getParcelCenter(){\r\n            //log(fn + ".getParcelCenter - this.parcelCenter1: ", this.parcelCenter);\r\n            if (!this.parcelCenter) {\r\n                //log(fn + ".getParcelCenter - generating ParcelCenter: ", this.parcelCenter);\r\n                const parcelSize = 16                               //meters per parcel\r\n                const cx = (this.settings.parcel.w/2) * parcelSize;\r\n                const cz = (this.settings.parcel.h/2) * parcelSize;\r\n                this.parcelCenter = new Vector3(cx,0,cz)            //<Vector3>{x: cx, y:0, z: cz}\r\n            }\r\n            log(fn + ".getParcelCenter - this.parcelCenter2: ", this.parcelCenter);\r\n            return this.parcelCenter;\r\n        }\r\n        //*/\r\n        // sets the tile type either from the settings or by passing it as a variable\r\n        FlashDome.prototype.setTileType = function () {\r\n            var tileTypesSetting = this.settings.tileTypes;\r\n            switch (this.settings.tile) {\r\n                case tileTypesSetting.DOT:\r\n                    this.tileObj = tileTypes.DotTile; // pass only the object not the instance of a new DotTile\r\n                    break;\r\n                case tileTypesSetting.PLANE:\r\n                    this.tileObj = tileTypes.PlaneTile;\r\n                    break;\r\n                default:\r\n                    this.tileObj = tileTypes.DotTile;\r\n            }\r\n            log(fn + ".setTileType this.tileObj: ", this.tileObj);\r\n            return this.tileObj;\r\n        };\r\n        // helps retrieve the generator from the settings object (1,2,3,4)\r\n        // better to get it from the settings so that if you change them you can relaunch the dome another time\r\n        FlashDome.prototype.setGeneratorFromSettings = function () {\r\n            var genTypes = this.settings.generatorTypes;\r\n            // all parameters to pass to the generators\r\n            var args = { settings: this.settings, dome: this };\r\n            switch (this.settings.generator) {\r\n                case genTypes.SINGLE:\r\n                    this.generator = new generators.SingleEntityGen(args);\r\n                    break;\r\n                case genTypes.DOUBLE:\r\n                    this.generator = new generators.DoubleEntityGen(args);\r\n                    break;\r\n                case genTypes.FIBONACCI:\r\n                    this.generator = new generators.FibonacciGen(args);\r\n                    break;\r\n                case genTypes.CIRCLE:\r\n                    this.generator = new generators.Circles1Gen(args);\r\n                    break;\r\n                default:\r\n                    this.generator = new generators.SingleEntityGen(args);\r\n            }\r\n            //log(fn + ".setGeneratorFromSettings generators: ", generators); // useless holds only this object   {dclamd: 2}\r\n            //log(fn + ".setGeneratorFromSettings this.generator: ", this.generator); \r\n            //log(fn + ".setGeneratorFromSettings - this.generator.settings: ", this.generator.settings); \r\n            //log(fn + ".setGeneratorFromSettings - this.generator.getName(): ", this.generator.getName());\r\n        };\r\n        return FlashDome;\r\n    }(Entity));\r\n    exports.FlashDome = FlashDome;\r\n});\r\ndefine("game", ["require", "exports", "components/flashdome/dome"], function (require, exports, dome_1) {\r\n    "use strict";\r\n    Object.defineProperty(exports, "__esModule", { value: true });\r\n    //console.clear()\r\n    var fname = "game.ts";\r\n    log("\\n---- game.ts");\r\n    var dome = new dome_1.FlashDome();\r\n    log(fname + " flashDome imported : ", dome);\r\n});\r\n/**\r\n * Template of the basic things you need to use for creating a generator\r\n *\r\n * - duplicate this file,\r\n * - change the fn string and class name\r\n * - create the code you want inside of generateCurve\r\n *\r\n * - add to /src/flashdome/generators/index.ts this\r\n * export { default as TemplateGen }    from "./generator_template";  // change appropriate class name and file\r\n *\r\n * - in /src/flashdome/domeSettings.ts add it to the generatorTypes enum\r\n * generatorTypes {  TEMPLATE = "Template"  }  //change with appropriate name\r\n *\r\n * - remember to activate it in\r\n * domeSettings.generator:  generatorTypes.TEMPLATE,\r\n *\r\n * - in /src/flashdome/dome.ts setGeneratorFromSettings() add a case for this generator\r\n * case genTypes.TEMPLATE:\r\n *      this.generator = new generators.TemplateGen(args);      //change with appropriate names\r\n *      break;\r\n */\r\ndefine("components/flashdome/generators/generator_template", ["require", "exports", "components/flashdome/generators/generator"], function (require, exports, generator_6) {\r\n    "use strict";\r\n    Object.defineProperty(exports, "__esModule", { value: true });\r\n    var fn = "TemplateGen"; //"Circles1Gen"\r\n    //log(fn)\r\n    // Generator Settings as a simple editable object\r\n    var S = {\r\n        radius: 2,\r\n        maxTiles: 30 // Nr of iterations = Nr of Tiles that will be attached            \r\n    };\r\n    var TemplateGen = /** @class */ (function (_super) {\r\n        __extends(TemplateGen, _super);\r\n        function TemplateGen(args) {\r\n            var _this = _super.call(this, args) || this;\r\n            _this.name = fn;\r\n            log(fn + ".constructor");\r\n            return _this;\r\n        }\r\n        TemplateGen.prototype.generateCurve = function (tileObj) {\r\n            this.tileType = tileObj;\r\n            log(fn + ".generateCurve with tileObj: ", tileObj);\r\n            // parse the global settings to see if it has variables\r\n            //let radius = this.settings.radius || S.radius  // precedence to the global settings\r\n            var radius = S.radius || this.settings.radius; // predecence to local settings\r\n            // instantiate the tile\r\n            var t = new tileObj();\r\n            // set it to a child of the dome\r\n            t.setParent(this.dome);\r\n        };\r\n        return TemplateGen;\r\n    }(generator_6.Generator));\r\n    exports.default = TemplateGen;\r\n});\r\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZ2FtZS5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uL3NyYy9jb21wb25lbnRzL2ZsYXNoZG9tZS9kb21lU2V0dGluZ3MudHMiLCIuLi9zcmMvY29tcG9uZW50cy9mbGFzaGRvbWUvdGlsZXMvdGlsZS50cyIsIi4uL3NyYy9jb21wb25lbnRzL3V0aWxzL2RjbFV0aWxzLnRzIiwiLi4vc3JjL2NvbXBvbmVudHMvdXRpbHMvRW50aXR5R3JvdXBzLnRzIiwiLi4vc3JjL2NvbXBvbmVudHMvZmxhc2hkb21lL3N5c3RlbXMvZ3JvdXBBd2FyZVN5c3RlbS50cyIsIi4uL3NyYy9jb21wb25lbnRzL2ZsYXNoZG9tZS9zeXN0ZW1zL2dyb3VwUm90YXRvci50cyIsIi4uL3NyYy9jb21wb25lbnRzL2ZsYXNoZG9tZS9zeXN0ZW1zL3Byb3hpbWl0eVNjYWxlci50cyIsIi4uL3NyYy9jb21wb25lbnRzL2ZsYXNoZG9tZS9zeXN0ZW1zL2luZGV4LnRzIiwiLi4vc3JjL2NvbXBvbmVudHMvZmxhc2hkb21lL2dlbmVyYXRvcnMvZ2VuZXJhdG9yLnRzIiwiLi4vc3JjL2NvbXBvbmVudHMvZmxhc2hkb21lL3RpbGVzL2RvdFRpbGUudHMiLCIuLi9zcmMvY29tcG9uZW50cy9mbGFzaGRvbWUvdGlsZXMvcGxhbmVUaWxlLnRzIiwiLi4vc3JjL2NvbXBvbmVudHMvZmxhc2hkb21lL3RpbGVzL2luZGV4LnRzIiwiLi4vc3JjL2NvbXBvbmVudHMvZmxhc2hkb21lL2dlbmVyYXRvcnMvc2luZ2xlRW50aXR5R2VuLnRzIiwiLi4vc3JjL2NvbXBvbmVudHMvZmxhc2hkb21lL2dlbmVyYXRvcnMvZG91YmxlRW50aXR5R2VuLnRzIiwiLi4vc3JjL2NvbXBvbmVudHMvZmxhc2hkb21lL2N1c3RvbUNvcG9uZW50cy50cyIsIi4uL3NyYy9jb21wb25lbnRzL2ZsYXNoZG9tZS9nZW5lcmF0b3JzL2NpcmNsZXMxR2VuLnRzIiwiLi4vc3JjL2NvbXBvbmVudHMvZmxhc2hkb21lL2dlbmVyYXRvcnMvZmlib25hY2NpR2VuLnRzIiwiLi4vc3JjL2NvbXBvbmVudHMvZmxhc2hkb21lL2dlbmVyYXRvcnMvaW5kZXgudHMiLCIuLi9zcmMvY29tcG9uZW50cy9mbGFzaGRvbWUvZG9tZS50cyIsIi4uL3NyYy9nYW1lLnRzIiwiLi4vc3JjL2NvbXBvbmVudHMvZmxhc2hkb21lL2dlbmVyYXRvcnMvZ2VuZXJhdG9yX3RlbXBsYXRlLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0lBQUEsSUFBTSxFQUFFLEdBQUcsY0FBYyxDQUFBO0lBQ3pCLHFCQUFxQjtJQUVyQiw4Q0FBOEM7SUFHOUMsSUFBSyxjQU9KO0lBUEQsV0FBSyxjQUFjO1FBQ2YsbUNBQWlCLENBQUE7UUFDakIsbUNBQWlCLENBQUE7UUFDakIseUNBQXVCLENBQUE7UUFDdkIsbUNBQWlCLENBQUE7UUFDakIsYUFBYTtRQUNiLGFBQWE7SUFDakIsQ0FBQyxFQVBJLGNBQWMsS0FBZCxjQUFjLFFBT2xCO0lBRUQsSUFBSyxTQUtKO0lBTEQsV0FBSyxTQUFTO1FBQ1YsNEJBQW1CLENBQUE7UUFDbkIsZ0NBQXFCLENBQUE7UUFDckIsc0JBQXNCO1FBQ3RCLHNDQUFzQztJQUMxQyxDQUFDLEVBTEksU0FBUyxLQUFULFNBQVMsUUFLYjtJQUdZLFFBQUEsWUFBWSxHQUFHO1FBQ3hCLE1BQU0sRUFBRSxFQUFFLEdBQUcsRUFBRSxDQUFDLEVBQUUsR0FBRyxFQUFFLENBQUMsRUFBQztRQUN6QixNQUFNLEVBQUUsRUFBRTtRQUNWLHNDQUFzQztRQUV0QyxzREFBc0Q7UUFDdEQsNkdBQTZHO1FBQzdHLHNCQUFzQjtRQUN0Qix5RUFBeUU7UUFDekUsY0FBYztRQUNkLGNBQWM7UUFHZCxrQ0FBa0M7UUFDbEMsU0FBUyxFQUFHLGNBQWMsQ0FBQyxNQUFNO1FBQ2pDLElBQUksRUFBUSxTQUFTLENBQUMsR0FBRztRQUV6QixzQkFBc0I7UUFDdEIsY0FBYyxFQUFFLGNBQWM7UUFDOUIsU0FBUyxFQUFF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QUFDLE1BQU0sQ0FBQSxDQUFFLCtCQUErQjtZQUU5RSx1QkFBdUI7WUFDdkIsSUFBSSxDQUFDLEdBQUcsSUFBSSxPQUFPLEVBQUUsQ0FBQztZQUV0QixnQ0FBZ0M7WUFDaEMsQ0FBQyxDQUFDLFNBQVMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUE7UUFDMUIsQ0FBQztRQUNULGtCQUFDO0lBQUQsQ0FBQyxBQXRCRCxDQUF5QyxxQkFBUyxHQXNCakQiLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBmbiA9IFwiZG9tZVNldHRpbmdzXCJcbi8vbG9nKGZuICsgXCIgY2FsbGVkXCIpXG5cbi8vaW1wb3J0IHsgRENMVXRpbHMgfSBmcm9tIFwiLi4vdXRpbHMvZGNsVXRpbHNcIlxuXG5cbmVudW0gZ2VuZXJhdG9yVHlwZXMge1xuICAgIFNJTkdMRSA9IFwiU2luZ2xlXCIsICAgICAgICAgIC8vIDRERVYgLSBmb3IgdGVzdGluZyB0aWxlIHBhcmFtZXRlcnNcbiAgICBET1VCTEUgPSBcIkRvdWJsZVwiLCAgICAgICAgICAvLyA0RGV2IC0ganVzdCB0byB0ZXN0IGR5bmFtaWMgZ2VuZXJhdG9yIGltcG9ydHNcbiAgICBGSUJPTkFDQ0kgPSBcIkZpYm9uYWNjaVwiLCAgICAvLyBmaXJzdCByZWFsIGRvbWUgZnVuY3Rpb25cbiAgICBDSVJDTEUgPSBcIkNpcmNsZVwiLCAgICAgICAgICAvLyBzaW1wbGUgY2lyY2xlIENpcmNsZTFHZW5cbiAgICAvL1NQSVJBTCA9IDQsXG4gICAgLy9TQ0FUVEVSID0gNlxufVxuXG5lbnVtIHRpbGVUeXBlcyB7IFxuICAgIERPVCAgICAgPSBcIkRvdFRpbGVcIixcbiAgICBQTEFORSAgID0gXCJQbGFuZVRpbGVcIixcbiAgICAvL0NVQkUgICAgPSBcIkN1YmVUaWxlXCJcbiAgICAvLy4uLiBpbXBvcnQgR0xUQiBhbmQgdXNlIGl0IGFzIGEgdGlsZVxufVxuXG5cbmV4cG9ydCBjb25zdCBkb21lU2V0dGluZ3MgPSB7XG4gICAgcGFyY2VsOiB7ICd3JzogNCwgJ2gnOiA0fSwgXG4gICAgaGVpZ2h0OiAxMCxcbiAgICAvL2NlbnRlcjogdGhpcy5jZW50ZXJQb3ModGhpcy5wYXJjZWwpLFxuXG4gICAgLy8gU3RpbGwgdW51c2VkLi4uZWFjaCBnZW5lcmF0b3IgaGFzIGl0J3Mgb3duIHNldHRpbmdzXG4gICAgLy9UT0RPIC0gaG9vayBzb21lIG9mIHRoZSBnZW5lcmF0b3JzIHBhcmFtZXRlcnMgdG8gZ2xvYmFsIGRvbWUgc2V0dGluZ3MgLSBpZiByYWRpdXMgaXMgc2V0IGhlcmUsIHVzZSB0aGlzIG9uZVxuICAgIC8vcmFkaXVzOiAyLCAgICAgICAgICBcbiAgICAvL2NyZWF0ZUZyb21SYWRpdXM6IHRydWUsICAgICAvLyBtYXliZSBoYXZlIGEgc3dpdGNoIGJldHdlZW4gY3JlYXRlIGZyb20gXG4gICAgLy90aWxlc01pbjogMSxcbiAgICAvL3RpbGVzTWF4OiAxLFxuXG5cbiAgICAvLyA+Pj4+Pj4gIGNoYW5nZSB0aGVzZSAgPDw8PDw8PDwgXG4gICAgZ2VuZXJhdG9yOiAgZ2VuZXJhdG9yVHlwZXMuQ0lSQ0xFLFxuICAgIHRpbGU6ICAgICAgIHRpbGVUeXBlcy5ET1QsXG5cbiAgICAvLyBkb24ndCB0b3VjaCB0aGVzZSAyXG4gICAgZ2VuZXJhdG9yVHlwZXM6IGdlbmVyYXRvclR5cGVzLFxuICAgIHRpbGVUeXBlczogdGlsZVR5cGVzLFxuXG4gICAgLy8gZGVmYXVsdCBEQ0wgbG9nbyBjb2xvcnMgLSB0YWtlbiBmcm9tIGhlcmUgaHR0cHM6Ly9kZWNlbnRyYWxhbmQub3JnL2ltYWdlcy9sb2dvLnN2Z1xuICAgIGRjbENvbG9yczoge1xuICAgICAgICByZWQ6ICAgIFwiI0ZGMkQ1NVwiLFxuICAgICAgICBvcmFuZ2U6IFwiI0ZDOTk2NVwiLFxuICAgICAgICB5ZWxsb3c6IFwiI0ZGQkM1QlwiLFxuICAgICAgICB5ZWxsb3dTdW46IFwiI0ZGQzk1QlwiLFxuICAgICAgICBwdXJwbGU6IFwiI0E1MjRCM1wiLFxuICAgICAgICBncmFkaWVudHM6IHtcbiAgICAgICAgICAgIHB1cnBsZVRvUmVkOiBbXCIjQTUyNEIzXCIsIFwiI0ZGMkQ1NVwiXSxcbiAgICAgICAgICAgIHJlZFRvWWVsbG93OiBbXCIjRkYyRDU1XCIsIFwiI0ZGQkM1QlwiXSxcbiAgICAgICAgfVxuXG4gICAgfVxuXG59XG5cblxuXG5mdW5jdGlvbiBjZW50ZXJQb3Mob2JqKSB7XG4gICAgbG9nKFwiZG9tZVNldHRpbmdzLmNlbnRlclBvcyBcIik7XG4gICAgcmV0dXJuIHsgeDogKG9iai53LzIpLCB6OiAob2JqLmgvMikgfVxufSIsIlxuXG5cbmNvbnN0IGZuID0gXCJUaWxlIFN1cGVyXCJcbi8vbG9nKGZuICsgXCIgY2FsbGVkXCIpXG5cbmV4cG9ydCBjbGFzcyBUaWxlIGV4dGVuZHMgRW50aXR5IHtcblxuICAgIC8vYXMgYW4gRW50aXR5IGl0IHNob3VsZCBhbHJlYWR5IGhhdmUgYW4gRXZlbnRNYW5hZ2VyXG4gICAgLy9wcml2YXRlIGV2ZW50cyA9IG5ldyBFdmVudE1hbmFnZXIoKSAgLy8gc28gdGhhdCBJIGNhbiBzdWJzY3JpYmUgdG8gdGhlIGdsb2JhbCBlbnZldHNcblxuICAgIHB1YmxpYyBuYW1lOnN0cmluZzsgICAgICAgICBcbiAgICBwdWJsaWMgaWQ6bnVtYmVyOyAgICAgICAvL2hvbGRzIHRoZSBpZCBvZiB0aGUgdGlsZSBmb3IgaWYgd2UgbmVlZCB0byBjYWxsIFxuICAgIFxuICAgIC8vIFNpemUgaG9sZHMgb25seSB3aWR0aCh4KSBhbmQgaGVpZ2h0KHopIGFuZCBpdCB3b3VsZCBiZSBtaXNzaW5nIHRoZSBkZXB0aCh5KVxuICAgIC8vIHNpbmNlIHRoZXJlIGlzIGN1cnJlbnRseSBubyB3YXkgdG8gYWN0dWFsbHkgbWVhc3VyZSB0aGVzZSBwcm9wZXJ0aWVzLCB3ZSBzdG9yZSB0aGVtIGluIHRoZSB0aWxlXG4gICAgcHVibGljIHNpemU6U2l6ZSAgICAgICAgXG5cbiAgICAvL3ByaXZhdGUgX3Bvc2l0aW9uOlZlY3RvcjNcblxuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICAvL2xvZyhmbiArIFwiLmNvbnN0cnVjdG9yIHRoaXM6IFwiLCB0aGlzKTtcbiAgICAgICAgLy9sb2coZm4gKyBcIi5jb25zdHJ1Y3RvciBFbnRpdHk6IFwiLCBFbnRpdHkpO1xuICAgICAgICAvL2xvZyhmbiArIFwiLmNvbnN0cnVjdG9yIHRoaXMuZXZlbnRNYW5hZ2VyOiBcIiwgdGhpcy5ldmVudE1hbmFnZXIpO1xuICAgIH1cblxuXG4gICAgZ2V0IHBvc2l0aW9uKCk6ICBWZWN0b3IzICB7IHJldHVybiB0aGlzLmdldENvbXBvbmVudChUcmFuc2Zvcm0pLnBvc2l0aW9uIH1cbiAgICBzZXQgcG9zaXRpb24ocG9zOlZlY3RvcjMpIHsgdGhpcy5nZXRDb21wb25lbnRPckNyZWF0ZShUcmFuc2Zvcm0pLnBvc2l0aW9uID0gcG9zO31cblxuXG4gICAgLyogbmVlZCB0byB1bmRlcnN0YW5kIFR5cGVzY3JpcHRzIGNvbmRpdGlvbmFsIHR5cGVzIHRvIGFsbG93IGZvciB0cmFuc29mcm1cbiAgICBnZXQgdHJhbnNmb3JtKCk6ICBUcmFuc2Zvcm0gIHsgcmV0dXJuIHRoaXMuZ2V0Q29tcG9uZW50KFRyYW5zZm9ybSkgfVxuICAgIHNldCB0cmFuc2Zvcm0odHJhbnNmOlRyYW5zZm9ybSkgeyBcbiAgICAgICAgdGhpcy5nZXRDb21wb25lbnRPckNyZWF0ZShUcmFuc2Zvcm0pID0gdHJhbnNmO1xuICAgIH1cbiAgICAqL1xuXG5cbn0iLCJpbXBvcnQgeyBkb21lU2V0dGluZ3MgfSBmcm9tIFwiLi4vZmxhc2hkb21lL2RvbWVTZXR0aW5nc1wiXG5cblxuLy8gYSBzZXJpZXMgb2YgdXRpbGl0ZXMgZm9yIGRlY2VudHJhbGFuZFxuXG5jb25zdCBmbiA9IFwiRENMVXRpbHNcIlxuLy9sb2coZm4gKyBcIiBjYWxsZWRcIilcblxuZXhwb3J0IGNsYXNzIERDTFV0aWxzIHtcblxuICAgIHByaXZhdGUgcGFyY2VsQ2VudGVyOlZlY3RvcjJcblxuICAgIC8qKlxuICAgICAqIHZlcnQgc2ltcGxlIHdyYXBwZXIgdGhhdCByZXR1cm5zIHRoZSBwYXJjZWxzIGNlbnRlclxuICAgICAqIFRPRE8gbWFrZSBpdCBzbyB0aGF0IGl0IGRldGVjdHMgdGhlIHJlYWwgdW5kZXJseWluZyBwYXJjZWwgc2l6ZS4uLmZvciBub3cgdGhlcmUgaXMgbm8gd2F5IG9mIGltcG9ydGluZyB0aGUgc2NlbmUuanNvbiBmaWxlXG4gICAgICogQHBhcmFtIHBhcmNlbHNXPyBvcHRpb25hbFxuICAgICAqIEBwYXJhbSBwYXJjZWxzSD8gb3B0aW9uYVxuICAgICAqL1xuICAgIHB1YmxpYyBzdGF0aWMgZ2V0UGFyY2VsQ2VudGVyKHBhcmNlbHNXPzpudW1iZXIsIHBhcmNlbHNIPzpudW1iZXIpOiBWZWN0b3IzIHtcbiAgICAgICAgLy8gaWYgbm8gcGFyYW1ldGVycyBhcmUgcGFzc2VkIGF1dG9tYXRpY2FsbHkgcmV0cmlldmUgaXQgZnJvbSBkb21lU2V0dGluZ3NcbiAgICAgICAgaWYgKCFwYXJjZWxzVyB8fCAhcGFyY2Vsc0gpIHtcbiAgICAgICAgICAgIHBhcmNlbHNXID0gZG9tZVNldHRpbmdzLnBhcmNlbC53XG4gICAgICAgICAgICBwYXJjZWxzSCA9IGRvbWVTZXR0aW5ncy5wYXJjZWwuaFxuICAgICAgICB9IFxuICAgICAgICBjb25zdCBwYXJjZWxTaXplID0gMTYgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9tZXRlcnMgcGVyIHBhcmNlbFxuICAgICAgICBjb25zdCBjeCA9IChwYXJjZWxzVy8yKSAqIHBhcmNlbFNpemU7XG4gICAgICAgIGNvbnN0IGN6ID0gKHBhcmNlbHNILzIpICogcGFyY2VsU2l6ZTtcbiAgICAgICAgbGV0IHBhcmNlbENlbnRlciA9IG5ldyBWZWN0b3IzKGN4LDAsY3opICAgICAvLzxWZWN0b3IzPnt4OiBjeCwgeTowLCB6OiBjen1cbiAgICAgICAgbG9nKGZuICsgXCIuZ2V0UGFyY2VsQ2VudGVyOiBcIiwgcGFyY2VsQ2VudGVyKTtcbiAgICAgICAgcmV0dXJuIHBhcmNlbENlbnRlcjtcbiAgICB9XG5cblxuICAgIC8qKlxuICAgICAqIGRlYnVnZ2luZyBEQ0wgaXMgdmVyeSBzbG93IGFuZCBsb2cgZG9lc24ndCBhbGxvdyB0byBhbHdheXMgcmVhZCB0aGUgcHJvcGVydGllcyBvZiBhbiBvYmplY3RcbiAgICAgKiB0aGlzIHV0aWxpdHkgZnVuY3Rpb24gdHJhY2VzIG91dCBhbGwgdGhlIHJlbGV2YW50IGtleXMgXG4gICAgICovXG4gICAgcHVibGljIHN0YXRpYyB0cmFjZUtleXMoKSB7XG4gICAgICAgIGxvZyhmbiArIFwiLnRyYWNlS2V5c1wiKVxuICAgICAgICAvL2xvZyhcImVuZ2luZTogXCIsIGVuZ2luZSkgIC8vW29iamVjdCBvYmplY3RdXG4gICAgICAgIC8vbG9nKFwiZW5naW5lOiBcIiArIGVuZ2luZSkgIC8vW29iamVjdCBvYmplY3RdXG4gICAgICAgIGNvbnNvbGUubG9nKFwiZW5naW5lOiBcIiwgZW5naW5lKSAvLyBvdXRwdXRzIHRoZSBvYmplY3QgYmVmb3JlIGV2ZXJ5dGhpbmcgZWxzZVxuICAgICAgICBsb2coXCJlbmdpbmUua2V5czogXCIsIE9iamVjdC5rZXlzKGVuZ2luZSkpXG4gICAgICAgIC8qIG91dHB1dHMgYSBsb3Qgb2YgaW5mbyAtIG9iamVjdHMgYXJlIHJlYWQgYXMgW29iamVjdF0gYW5kIGZ1bmN0aW9ucyBhcmUgdHJhY2VkIGFzIHRleHRcbiAgICAgICAgZm9yIChsZXQgayBpbiBlbmdpbmUpe1xuICAgICAgICAgICAgbG9nKFwiazpcIiArIGsgKyBcIiAtIFwiICsgZW5naW5lW2tdKVxuICAgICAgICB9XG4gICAgICAgICovXG4gICAgICAgbG9nKFwiVGlsZSBjbGlja2VkIE9iamVjdC5rZXlzKFZlY3RvcjMpOiBcIiwgT2JqZWN0LmtleXMoVmVjdG9yMykpO1xuICAgICAgIGxvZyhcIlRpbGUgY2xpY2tlZCBPYmplY3Qua2V5cyhDb2xvcjMpOiBcIiwgT2JqZWN0LmtleXMoQ29sb3IzKSk7XG4gICAgICAgLy9jb25zb2xlLmxvZyhcIlZlY3RvcjM6IFwiLCBWZWN0b3IzKSAvLyBub3QgdmVyeSB1c2VmdWwgc3BpdHMgb3V0IHRoZSBmdW5jdGlvbiBjb2RlXG4gICAgfVxuXG4gICAgLyogbm90IG5lZWRlZCB5b3UgaGF2ZSB0aGUgQW5nbGUgQ2xhc3NcbiAgICBodHRwczovL2dpdGh1Yi5jb20vZGVjZW50cmFsYW5kL2Vjcy1yZWZlcmVuY2UvYmxvYi9tYXN0ZXIvZG9jcy1sYXRlc3QvZGVjZW50cmFsYW5kLWVjcy5hbmdsZS5tZFxuICAgIEFuZ2xlLkZyb21EZWdyZWVzKGRlZ3JlZXNIZXJlKS5yYWRpYW5zKClcbiAgICBBbmdsZS5Gcm9tUmFkaWFucyhyYWRpYW5zSGVyZSkuZGVncmVlcygpXG5cbiAgICBwdWJsaWMgc3RhdGljIHJhZGlhbnNUb0RlZ3JlZXMocmFkaWFuczpudW1iZXIpIHtcbiAgICAgICAgcmV0dXJuIHJhZGlhbnMgKiAoMTgwLyBNYXRoLlBJKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgc3RhdGljIGRlZ3JlZXNUb1JhZGlhbnMoZGVncmVlczpudW1iZXIpIHtcbiAgICAgICAgcmV0dXJuIGRlZ3JlZXMgKiAoIE1hdGguUEkgLyAxODApO1xuICAgIH1cbiAgICAqL1xuXG5cblxuXG59XG5cbiIsIi8vIEkgTmVlZGVkIGEgd2F5IHRvIGNyZWF0ZSBkeW5hbWljIGdyb3VwcyBcbi8vIHRvIGdyb3VwIGVudGl0ZXMgY3JlYXRlZCBhdCBlYWNoIHJvdW5kIG9mIGEgZm9yIGxvb3Bcbi8vIGFuZCBzaW5jZSB0aGUgZGVmYXVsdCBtZXRob2RzIGRvZXNuJ3QgYWxsb3cgdG8gaW50ZW50aW9uYWxseSBjcmVhdGUgYSBncm91cCBieSBmaWx0ZXJpbmcgdGhyb3VnaCBjZXJ0YWluIG9mIGl0J3MgcHJvcGVydGllc1xuLy8gYXMgaWxsdXN0cmF0ZWQgaGVyZSBodHRwczovL2RlY2VudHJhbGFuZHRlYW0uc2xhY2suY29tL2FyY2hpdmVzL0NGSzkyMEdKWi9wMTU2MTM5OTE4NTE0OTMwMFxuLy8gYW5kIGhlcmUgaHR0cHM6Ly9kZWNlbnRyYWxhbmR0ZWFtLnNsYWNrLmNvbS9hcmNoaXZlcy9DRks5MjBHSlovcDE1NjEzOTkyOTcxNTE0MDBcblxuLy8gZGVmYXVsdCBncm91cCBtZXRob2RzXG4vLyBnZXRDb21wb25lbnRHcm91cCBodHRwczovL2dpdGh1Yi5jb20vZGVjZW50cmFsYW5kL2Vjcy1yZWZlcmVuY2UvYmxvYi9tYXN0ZXIvZG9jcy1sYXRlc3QvZGVjZW50cmFsYW5kLWVjcy5lbmdpbmUuZ2V0Y29tcG9uZW50Z3JvdXAubWRcbi8vIGdldEVudGl0aWVzV2l0aENvbXBvbmVudCAvL2h0dHBzOi8vZ2l0aHViLmNvbS9kZWNlbnRyYWxhbmQvZWNzLXJlZmVyZW5jZS9ibG9iL21hc3Rlci9kb2NzLWxhdGVzdC9kZWNlbnRyYWxhbmQtZWNzLmVuZ2luZS5nZXRlbnRpdGllc3dpdGhjb21wb25lbnQubWRcbiAgICAgICAgICAgICAgICBcbi8vIHVzYWdlIGV4YW1wbGVcbi8vIGNyZWF0ZSBhIGdyb3VwIG5hbWVkIFwiZ3JvdXBfY1wiLCB3aXRoIGFsbCBlbnRpdGlzIHRoYXQgaGF2ZSB0aGUgKGN1c3RvbSkgY29tcG9uZW50IFwidGlsZUdyb3VwXCJcbi8vIGFuZCB3aG9zZSBwcm9wZXJ0eSB0aWxlR3JvdXAuZ3JvdXBOICAgPT0gMFxuLy8gbGV0IGMgPSAwXG4vLyBHcm91cHMuY3JlYXRlR3JvdXBXaXRoQ29tcG9uZW50c0FuZENvbmRpdGlvbihcInRpbGVHcm91cFwiLCBcImdyb3VwTlwiLCBcIj09XCIrYywgXCJncm91cFwiK2MpXG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEVudGl0eUdyb3VwcyB7XG5cbiAgICBwcml2YXRlIHN0YXRpYyBfZ3JvdXBzID0gbmV3IEFycmF5KClcblxuICAgIC8vIHNpbXBsZSBnZXR0ZXIgLSBubyBzZXR0ZXIgKG9ubHkgY3JlYXRlR3JvdXApXG4gICAgc3RhdGljIGdldCBncm91cHMoKSB7XG4gICAgICAgIHJldHVybiBFbnRpdHlHcm91cHMuX2dyb3Vwc1xuICAgIH1cblxuICAgIHB1YmxpYyBzdGF0aWMgY3JlYXRlR3JvdXAgKGdyb3VwTmFtZTpzdHJpbmcsIGVudGl0aWVzOltdICkge1xuICAgICAgICB0aGlzLl9ncm91cHMgPSAodGhpcy5ncm91cHMgPT0gdW5kZWZpbmVkKSA/IG5ldyBBcnJheSgpIDogdGhpcy5ncm91cHNcbiAgICAgICAgdGhpcy5fZ3JvdXBzW2dyb3VwTmFtZV0gPSBlbnRpdGllc1xuICAgICAgICByZXR1cm4gdGhpcy5nZXRHcm91cChncm91cE5hbWUpXG4gICAgICAgIGxvZyhcImNyZWF0ZWQgZ3JvdXA6IFwiICsgZ3JvdXBOYW1lICsgXCIgOiBcIiwgdGhpcy5fZ3JvdXBzW2dyb3VwTmFtZV0pXG4gICAgfVxuXG4gICAgcHVibGljIHN0YXRpYyBnZXRHcm91cCAoZ3JvdXBOYW1lOnN0cmluZykge1xuICAgICAgICByZXR1cm4gdGhpcy5fZ3JvdXBzW2dyb3VwTmFtZV1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBhIHdheSB0byBkaW5hbWljYWxseSBjcmVhdGUgZ3JvdXBzIG9mIGVudGl0aWVzIHRoYXQgbWVldCBjZXJ0YWluIGNyaXRlcmlhXG4gICAgICogZXhhbXBsZSB1c2FnZTpcbiAgICAgKiBHcm91cHMuY3JlYXRlR3JvdXBXaXRoQ29tcG9uZW50c0FuZENvbmRpdGlvbihcInRpbGVHcm91cFwiLCBcImdyb3VwTlwiLCBcIj09XCIrYywgXCJncm91cFwiK2MpXG4gICAgICogb3IgXG4gICAgICogR3JvdXBzLmNyZWF0ZUdyb3VwV2l0aENvbXBvbmVudHNBbmRDb25kaXRpb24oXCJUcmFuc2Zvcm1cIiwgXCJwb3NpdGlvbi54XCIsIFwiID4gMTBcIiwgXCJlbnRpdGllc1dpdGhYR3JhdGVyVGhhbjEwXCIpIC8vIFRvZG8gc3RpbGwgdG8gcHJvdmUgd2l0aGVyIGl0IG5lZWRzIGEgc3RyaW5nIFwiVHJhbnNmb3JtXCIgb3IgXCJ0cmFuc2Zvcm1cIiBcbiAgICAgKiBAcGFyYW0gY29tcG9uZW50TmFtZSBhIHN0cmluZyByZXByZXNlbnRpbmcgeW91ciBjdXN0b21lIGNvbXBvbmVudCBuYW1lICh0aGUgb25lIGluIGxvd2VyY2FzZSBjcmVhdGVkIHdpdGggdGhlIEBDb21wb25lbnQgZWcgXCJ0aWxlR3JvdXBcIilcbiAgICAgKiBAcGFyYW0gcHJvcGVydHkgYSBzdHJpbmcgb2YgdGhlIHByb3BlcnR5IHRoYXQgeW91IHdhbnQgdG8gZmlsdGVyIGZvclxuICAgICAqIEBwYXJhbSBjb25kaXRpb24gYSBzdHJpbmcgb2YgdGhlIGNvbmRpdGlvbiB0aGF0IHRoZSBwcm9wZXJ0eSBoYXMgdG8gbWVldCBlZyBcIj09IDFcIiAgb3IgIFwiIDwgMTBcIlxuICAgICAqIEBwYXJhbSBncm91cE5hbWUgYSBzdHJpbmcgdG8gZ2l2ZSB0aGlzIGdyb3VwIGEgc3BlY2lmaWMgbmFtZSB0aGF0IHlvdSBjYW4gbGF0ZXIgcmV0cmlldmUgd2l0aCBFbnRpdHlHcm91cHMuZ2V0R3JvdXAoZ3JvdXBOYW1lKVxuICAgICAqL1xuICAgIHB1YmxpYyBzdGF0aWMgY3JlYXRlR3JvdXBXaXRoQ29tcG9uZW50c0FuZENvbmRpdGlvbihjb21wb25lbnROYW1lOnN0cmluZywgcHJvcGVydHk6c3RyaW5nLCBjb25kaXRpb246c3RyaW5nLCBncm91cE5hbWU6c3RyaW5nKSB7XG4gICAgICAgIC8vbG9nKFwiY3JlYXRlR3JvdXBXaXRoQ29tcG9uZW50c0FuZENvbmRpdGlvbiBjb21wb25lbnROYW1lOiBcIiArIGNvbXBvbmVudE5hbWUgKVxuICAgICAgICBsZXQgdGVtcEdyb3VwID0gbmV3IEFycmF5KClcbiAgICAgICAgZm9yIChsZXQgZW50aXR5SWQgaW4gZW5naW5lLmVudGl0eUxpc3RzW2NvbXBvbmVudE5hbWVdKSB7XG4gICAgICAgICAgICAvL2xvZyhcImVudGl0eUlkOiBcIiwgZW50aXR5SWQpIC8vZW50aXR5ID0gdGhlIGlkIG9mIHRoZSBlbnRpdHkgXCJFZFwiXG4gICAgICAgICAgICBsZXQgZW50aXR5ID0gZW5naW5lLmVudGl0aWVzW2VudGl0eUlkXVxuICAgICAgICAgICAgbGV0IGNvbXBvbmVudCA9IGVudGl0eS5nZXRDb21wb25lbnQoY29tcG9uZW50TmFtZSlcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaWYgKCBldmFsKGNvbXBvbmVudFtwcm9wZXJ0eV0gKyBjb25kaXRpb24pICkge1xuICAgICAgICAgICAgICAgIHRlbXBHcm91cC5wdXNoKCBlbnRpdHkgKSBcbiAgICAgICAgICAgIH0gICBcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLy8gZG9uZSBsb29waW5nIGFkZCBpdCB0byB0aGUgZ3JvdXBzXG4gICAgICAgIHRoaXMuY3JlYXRlR3JvdXAoZ3JvdXBOYW1lLCB0ZW1wR3JvdXApXG4gICAgICAgIGxvZyhcImRvbmUgY3JlYXRpbmcgZ3JvdXA6IFwiLCB0ZW1wR3JvdXApO1xuICAgICAgICByZXR1cm4gdGhpcy5nZXRHcm91cChncm91cE5hbWUpO1xuICAgIH1cblxufSIsIlxuXG4vKipcbiAqIHRoaXMgY2xhc3MgYWxsb3dzIGFsbCBjdXN0b20gc3lzdGVtcyB0aGF0IGV4dGVuZCBpdCwgdG8gYmUgcGFzc2VkIGFzIGEgcGFyYW1ldGVyIGVpdGhlclxuICogMSAtIGEgc2luZ2xlIEVudGl0eSAgb2JqZWN0XG4gKlxuICogMiAtIGEgZ3JvdXAgb2YgZW50aXRlcyBwcm9kdWNlZCBieSB0aGUgZGNsIGNsYXNzaWMgYXBpICAgZW5naW5lLmdldENvbXBvbmVudEdyb3VwKFRpbGVHcm91cCk7XG4gKlxuICogb3IgMyAtIGEgc3RyaW5nIGluZGljYXRpbmcgdGhlIG5hbWUgb2YgZ3JvdXAgb2YgZW50aXRpZXMgcHJvZHVjZWQgd2l0aCBteSBjdXN0b20gIEVudGl0eUdyb3VwcyBjbGFzcyBzcmMvY29tcG9uZW50cy91dGlscy9FbnRpdHlHcm91cHMudHMsIFxuICogYW5kIHN0b3JlZCBpbiBFbnRpdHlHcm91cHMuZ3JvdXBzIFxuICovXG5cbmltcG9ydCB7IGRlZmF1bHQgYXMgR3JvdXBzfSBmcm9tIFwiLi4vLi4vdXRpbHMvRW50aXR5R3JvdXBzXCJcblxuZXhwb3J0IGFic3RyYWN0IGNsYXNzIEdyb3VwQXdhcmVTeXN0ZW0gaW1wbGVtZW50cyBJU3lzdGVtIHtcblxuICAgIHB1YmxpYyBncm91cCA9IHt9XG5cbiAgICBjb25zdHJ1Y3RvciAoX2dyb3VwOnN0cmluZyB8IHt9KSB7XG4gICAgICAgIC8vZGVidWdnZXJcbiAgICAgICAgaWYgKHR5cGVvZiBfZ3JvdXAgPT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgICAgLy8gZ3JvdXAgY3JlYXRlZCB3aXRoIEVudGl0eUdyb3Vwc1xuICAgICAgICAgICAgdGhpcy5ncm91cFtcImVudGl0aWVzXCJdID0gIEdyb3Vwcy5nZXRHcm91cChfZ3JvdXApXG5cbiAgICAgICAgfSBlbHNlIGlmICghX2dyb3VwLmVudGl0aWVzKSB7XG4gICAgICAgICAgICAvLyBTaW5nbGUgRW50aXR5OiAgXG4gICAgICAgICAgICAvLyBpZiBpdCdzIGFuIG9iamVjdCBidXQgZG9lc24ndCBoYXZlIHRoZSBlbnRpdGllcyBwcm9wZXJ0eSBpdCdzIGxpa2VseSB0aGlzIGlzIGEgc2luZ2xlIEVudGl0eVxuICAgICAgICAgICAgdGhpcy5ncm91cFtcImVudGl0aWVzXCJdID0gW19ncm91cF07IFxuICAgICAgICBcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIC8vIGEgZ3JvdXAgdGhhdCBoYXMgdGhlIGVudGl0aWVzIG9iamVjdCB3aGljaCBtZWFucyB0aGF0IGl0IGhhcyBiZWVuIGNyZWF0ZWRcbiAgICAgICAgICAgIC8vIHdpdGggdGhlIERDTCBhcGk6ICAgZW5naW5lLmdldENvbXBvbmVudEdyb3VwKFRpbGVHcm91cClcbiAgICAgICAgICAgIHRoaXMuZ3JvdXAgPSBfZ3JvdXA7ICBcbiAgICAgICAgfSBcbiAgICAgICAgXG4gICAgfVxuXG4gICAgLy8gZm9yY2Ugc3ViY2xhc3NlcyB0byBpbXBsZW1lbnQgdXBkYXRlXG4gICAgYWJzdHJhY3QgdXBkYXRlKGR0Om51bWJlcilcblxufSIsIlxuLyoqXG4gKiAgR1JPVVAgUk9UQVRPUlxuICogXG4gKiAgYSBzaW1wbGUgU3lzdGVtIHRoYXQgcm90YXRlcyBhbiBlbnRpdHkgb3IgZ3JvdXAgb2YgZW50aXRlcyBcbiAqICB5b3UgY2FuIGN1c3RvbWl6ZSBcbiAqICAtIHRoZSByb3RhdGlvbiBheGlzLCBcbiAqICAtIHRoZSByb3RhdGlvbiBkaXJlY3Rpb24gKGNsb2Nrd2lzZSBvciBjb3VudGVyY2xvY2t3aXNlKVxuICogIC0gdGhlIHJvdGF0aW9uIHNwZWVkICBcbiAqIFxuICogLy8vLy8gVE9ETyAtIGltcHJvdmVtZW50c1xuICogLSBkZWZpbmUgcm90YXRpb24gc3BlZWQgaW4gc2Vjb25kIHBlciByb3RhdGlvblxuICogLSBkZWZpbmUgbnVtYmVyIG9mIG1heCByb3RhdGlvbnMgdG8gdGFrZSBiZWZvcmUgaXQgc2hvdWxkIGJlIHN0b3BwZWRcbiAqIC0gZmlyZSBldmVudHMgYXQgdGhlIGVuZCBvZiBlYWNoIHJvdGF0aW9uIGFuZCBhdCB0aGUgZW5kIG9mIHRoZSBnaXZlbiByb3RhdGlvbiBudW1iZXJzXG4gKi9cblxuXG5pbXBvcnQgeyBkZWZhdWx0IGFzIEdyb3Vwc30gZnJvbSBcIi4uLy4uL3V0aWxzL0VudGl0eUdyb3Vwc1wiXG5pbXBvcnQgeyBHcm91cEF3YXJlU3lzdGVtIH0gZnJvbSBcIi4vZ3JvdXBBd2FyZVN5c3RlbVwiXG5cbmNvbnN0IGZuID0gXCJHcm91cFJvdGF0b3JcIlxuXG5leHBvcnQgY2xhc3MgR3JvdXBSb3RhdG9yIGV4dGVuZHMgR3JvdXBBd2FyZVN5c3RlbSBpbXBsZW1lbnRzIElTeXN0ZW0ge1xuICAgIC8vcHVibGljIGdyb3VwID0ge30gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBkZWZpbmVkIGJ5IHN1cGVyXG4gICAgcHJpdmF0ZSBkaXJlY3Rpb24gICA6IG51bWJlciAgICAgICAgICAgICAgICAgICAgICAgIC8vIGVpdGhlciAxIG9yIC0xICBzZXQgYnkgdGhlIGNsb2Nrd2lzZSBwYXJhbWV0ZXIgaW4gdGhlIGNvbnN0cnVjdG9yXG4gICAgcHVibGljIHNwZWVkICAgICAgICA6IG51bWJlciA9IDIwMCAgICAgICAgICAgICAgICAgIC8vIHJvdGF0aW9uIG11bHRpcGxpZXIgXG4gICAgcHVibGljIGF4aXMgICAgICAgICA6IFZlY3RvcjMgPSBWZWN0b3IzLkZvcndhcmQoKSAgIC8vIHRoZSBheGlzIGFyb3VudCB3aGljaCB0byByb3RhdGUgdGhlIGVudGl0aWVzIG9yIGVudGl0eVxuXG4gICAgLyoqXG4gICAgICogXG4gICAgICogQHBhcmFtIF9ncm91cCBlaXRoZXIgYSBzdHJpbmcgZm9yIGEgZ3JvdXAgbmFtZSwgYSBzaW5nbGUgRW50aXR5IG9yIGEgZ3JvdXAgb2YgZW50aXRpZXNcbiAgICAgKiBAcGFyYW0gY2xvY2t3aXNlIFxuICAgICAqIEBwYXJhbSBfc3BlZWQgXG4gICAgICogQHBhcmFtIF9heGlzIFxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yIChfZ3JvdXA6c3RyaW5nIHwge30gLCBjbG9ja3dpc2U/OmJvb2xlYW4sIF9zcGVlZD86bnVtYmVyLCBfYXhpcz86VmVjdG9yMyApIHtcbiAgICAgICAgLy8gdGhlIHN1cGVyIGNsYXNzIGhhbmRsZXMgdGhlIGZpcnN0IHBhcmFtZXRlciBlaXRoZXIgYSBzdHJpbmcsIGEgc2luZ2xlIEVudGl0eSBvciBhIGdyb3VwIG9mIGVudGl0aWVzXG4gICAgICAgIHN1cGVyKF9ncm91cClcbiAgICAgICAgbG9nKGZuICsgXCIuIGNvbnN0cnVjdG9yIHRoaXMuZ3JvdXA6IFwiLCB0aGlzLmdyb3VwKTtcblxuICAgICAgICBpZiAoX3NwZWVkKSB0aGlzLnNwZWVkID0gX3NwZWVkXG4gICAgICAgIGlmIChfYXhpcykgIHRoaXMuYXhpcyAgPSBfYXhpcyBcblxuICAgICAgICAvLyB0byBjaGFuZ2UgdGhlIGRpcmVjdGlvbiB5b3UgbmVlZCB0byBzd2l0Y2ggdGhlIHJvdGF0aW9uIGF4aXMgdXBzaWRlIGRvd24gd2l0aCBWZWN0b3IzLm5lZ2F0ZSgpXG4gICAgICAgIHRoaXMuZGlyZWN0aW9uID0gKCAhY2xvY2t3aXNlICkgPyAtMSA6IDE7XG4gICAgICAgIGlmICh0aGlzLmRpcmVjdGlvbiA9PSAtMSkgdGhpcy5heGlzID0gX2F4aXMubmVnYXRlKClcbiAgICAgICAgLy9sb2coZm4gKyBcIi5jb25zdHJ1Y3RvciAgIHRoaXMuZGlyZWN0aW9uOiBcIiwgdGhpcy5kaXJlY3Rpb24pXG4gICAgfVxuXG4gICAgLyogdG8gcnVuIG9uY2Ugd2hlbiB5b3UgYWN0aXZhdGUgdGhlIHN5c3RlbVxuICAgIGFjdGl2YXRlICgpIHtcblxuICAgIH1cbiAgICAqL1xuXG4gICAgXG4gICAgdXBkYXRlKCBkdDogbnVtYmVyICkge1xuICAgICAgICBcbiAgICAgICAgZm9yIChsZXQgZW50aXR5IG9mIHRoaXMuZ3JvdXAuZW50aXRpZXMpIHsgXG4gICAgICAgICAgICBjb25zdCB0cmFuc2Zvcm0gPSBlbnRpdHkuZ2V0Q29tcG9uZW50KFRyYW5zZm9ybSlcbiAgICAgICAgICAgIC8vbGV0IHJvdEFtb3VudCA9IGR0ICogdGhpcy5zcGVlZCAqIHRoaXMuZGlyZWN0aW9uICAvLyB0aGlzIHdvcmtzIGZvciBkaXJlY3Rpb24gPSAxIGJ1dCBub3QgLTEgXG4gICAgICAgICAgICBsZXQgcm90QW1vdW50ID0gZHQgKiB0aGlzLnNwZWVkXG4gICAgICAgICAgICBsZXQgcm90QXhpcyA9IHRoaXMuYXhpc1xuXG4gICAgICAgICAgICAvL2xvZyhmbiArIFwiIHVwZGF0ZSBkdCBcIiArIGR0ICsgXCIgcm90QW1vdW50OiBcIiwgcm90QW1vdW50KVxuICAgICAgICAgICAgLy9kZWJ1Z2dlclxuXG4gICAgICAgICAgICB0cmFuc2Zvcm0ucm90YXRlKHJvdEF4aXMsIHJvdEFtb3VudClcbiAgICAgICAgICAgIFxuICAgICAgICAgIH1cbiAgICB9XG4gICAgXG59ICAgICIsIlxuXG5cbmltcG9ydCB7IGRlZmF1bHQgYXMgR3JvdXBzfSBmcm9tIFwiLi4vLi4vdXRpbHMvRW50aXR5R3JvdXBzXCJcbmltcG9ydCB7IEdyb3VwQXdhcmVTeXN0ZW0gfSBmcm9tIFwiLi9ncm91cEF3YXJlU3lzdGVtXCJcblxuY29uc3QgZm4gPSBcIlByb3hpbWl0eVNjYWxlclwiXG5cbmV4cG9ydCBjbGFzcyBQcm94aW1pdHlTY2FsZXIgZXh0ZW5kcyBHcm91cEF3YXJlU3lzdGVtIGltcGxlbWVudHMgSVN5c3RlbSB7XG4gICAgLy9wdWJsaWMgZ3JvdXAgPSB7fSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGRlZmluZWQgYnkgc3VwZXIgXG4gICAgcHVibGljIGF4aXMgICAgICAgICA6IFZlY3RvcjMgPSBWZWN0b3IzLlVwKCkgICAgICAgIC8vIHRoZSBheGlzIHRvIHNjYWxlXG4gICAgcHVibGljIHNjYWxlTWluICAgICA6IG51bWJlciAgPSAwLjUgICAgICAgICAgICAgICAgIC8vIHRoZSBkZWZhdWx0IG1pbmltdW0gc2NhbGVcbiAgICBwdWJsaWMgc2NhbGVNYXggICAgIDogbnVtYmVyICA9IDIgICAgICAgICAgICAgICAgICAgLy8gdGhlIGRlZmF1bHQgbWF4aXVtIHNjYWxlIFxuICAgIHByaXZhdGUgYWN0aXZhdGlvbkRpc3RhbmNlOiBudW1iZXIgPSA1ICAgICAgICAgICAgICAvLyBkaXN0YW5jZSBmcm9tIGNhbWVyYSBwb3NpdGlvbiBpbiBtIHRoYXQgd2lsbCBzdGFydCB0byBhY3RpdmF0ZSB0aGUgZWZmZWN0IFxuICAgIFxuICAgIHByaXZhdGUgY2FtZXJhOiBDYW1lcmE7XG5cbiAgICAvKipcbiAgICAgKiBcbiAgICAgKiBAcGFyYW0gX2dyb3VwIGVpdGhlciBhIHN0cmluZyBmb3IgYSBncm91cCBuYW1lLCBhIHNpbmdsZSBFbnRpdHkgb3IgYSBncm91cCBvZiBlbnRpdGllcyBcbiAgICAgKiBAcGFyYW0gYXhpcyBcbiAgICAgKiBAcGFyYW0gc2NhbGVNaW5cbiAgICAgKiBAcGFyYW0gc2NhbGVNYXhcbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvciAoX2dyb3VwOnN0cmluZyB8IHt9LCBzY2FsZU1pbj86bnVtYmVyLCBzY2FsZU1heD86bnVtYmVyLCBheGlzPzpWZWN0b3IzLCBhY3RpdmF0aW9uRGlzdGFuY2U/Om51bWJlciApIHtcbiAgICAgICAgLy8gdGhlIHN1cGVyIGNsYXNzIGhhbmRsZXMgdGhlIGZpcnN0IHBhcmFtZXRlciBlaXRoZXIgYSBzdHJpbmcsIGEgc2luZ2xlIEVudGl0eSBvciBhIGdyb3VwIG9mIGVudGl0aWVzXG4gICAgICAgIHN1cGVyKF9ncm91cClcbiAgICAgICAgbG9nKGZuICsgXCIuIGNvbnN0cnVjdG9yIHRoaXMuZ3JvdXA6IFwiLCB0aGlzLmdyb3VwKTtcbiAgICAgICAgdGhpcy5zY2FsZU1pbiA9IHNjYWxlTWluIHx8IHRoaXMuc2NhbGVNaW5cbiAgICAgICAgdGhpcy5zY2FsZU1heCA9IHNjYWxlTWF4IHx8IHRoaXMuc2NhbGVNYXhcbiAgICAgICAgdGhpcy5heGlzID0gYXhpcyB8fCB0aGlzLmF4aXNcbiAgICAgICAgdGhpcy5hY3RpdmF0aW9uRGlzdGFuY2UgPSBhY3RpdmF0aW9uRGlzdGFuY2UgfHwgdGhpcy5hY3RpdmF0aW9uRGlzdGFuY2VcblxuICAgICAgICB0aGlzLmNhbWVyYSA9IENhbWVyYS5pbnN0YW5jZTsgICAgICAgIFxuICAgICAgICBsb2coZm4gKyBcIi5jb25zdHJ1Y3RvciAgIHRoaXMuZGlyZWN0aW9uOiBcIiwgdGhpcy5kaXJlY3Rpb24pXG4gICAgfVxuXG4gICAgLyogdG8gcnVuIG9uY2Ugd2hlbiB5b3UgYWN0aXZhdGUgdGhlIHN5c3RlbVxuICAgIGFjdGl2YXRlICgpIHtcbiAgICAgICAgLy8vVE9ETyBwb3NzaWJseSBjYWxjdWxhdGUgdGhlIGdsb2JhbCBwb3NpdGlvbiBpbiByZWxhdGlvbiB0byBhbGwgcGFyZW50IHRyZWVcbiAgICB9XG4gICAgKi9cblxuICAgXG4gICAgXG4gICAgdXBkYXRlKCBkdDogbnVtYmVyICkge1xuICAgICAgIFxuICAgICAgICAvL2xldCB1c2VyUG9zID0gY2FtZXJhLnBvc2l0aW9uXG4gICAgICAgIGZvciAobGV0IGVudGl0eSBvZiB0aGlzLmdyb3VwLmVudGl0aWVzKSB7IFxuICAgICAgICAgICAgY29uc3QgY29tcG9uZW50VCA9IGVudGl0eS5nZXRDb21wb25lbnQoVHJhbnNmb3JtKVxuICAgICAgICAgICAgY29uc3QgcGFyZW50VCA9IGVudGl0eS5nZXRQYXJlbnQoKS5nZXRDb21wb25lbnQoVHJhbnNmb3JtKVxuXG4gICAgICAgICAgICAvLyBmaW5kIHRoZSBkaXN0YW5jZSBmcm9tIHRoZSBjdXJyZW50IHBvc2l0aW9uIHRvIHRoZSBjYW1lcmEgcG9zaXRpb25cbiAgICAgICAgICAgIC8vIHB1dCBpbnQgZ2xvYmFsIGNvb3JkaW5hdGVzIGJ5IHN1YnN0cmFjdGluZyB0aGUgcGFyZW50IHBvc2l0aW9uXG4gICAgICAgICAgICAvLyBUT0RPOiBJJ20gY2FsY3VsYXRpbmcgb25seSBvbmUgcGFyZW50LCBidXQgdGhlcmUgY291bGQgYmUgbWFueSAtIHRvZG8gaW1wbGVtZW50IGEgTG9jYWxUb0dsb2JhbCBtZXRob2RcbiAgICAgICAgICAgIGxldCB0dEdsb2JhbFBvcyA9IGNvbXBvbmVudFQucG9zaXRpb24uc3VidHJhY3QoIHBhcmVudFQucG9zaXRpb24gKSBcbiAgICAgICAgICAgIGxldCBkaXN0YW5jZTEgPSBWZWN0b3IzLkRpc3RhbmNlKCB0dEdsb2JhbFBvcywgdGhpcy5jYW1lcmEucG9zaXRpb24pIC8vIGdpdmVzIHRoZSBzcXVhcmUgcm9vdGVkIHZhbHVlICAgICAgIDQ0XG4gICAgICAgICAgICBsZXQgZGlzdGFuY2UgPSB0aGlzLmRpc3RhbmNlKCB0dEdsb2JhbFBvcywgdGhpcy5jYW1lcmEucG9zaXRpb24pICAgICAvLyByZXR1cm5zIHRoZSBub24gc3F1YXJlIHJvb3RlZCB2YWx1ZSAxOTU1XG4gICAgICAgICAgICBsb2coZm4gKyBcIiB1cGRhdGUgdHRHbG9iYWxQb3M6IFwiICsgdHRHbG9iYWxQb3MgKyBcIiAtIGNhbWVyYS5wb3NpdGlvbjogXCIgKyB0aGlzLmNhbWVyYS5wb3NpdGlvbiAgKyBcIiAtIGRpc3RhbmNlOiBcIiArIGRpc3RhbmNlICsgXCIgLSBWZWN0b3IzLmRpc3RhbmNlOiBcIiArIGRpc3RhbmNlMSlcbiAgICAgICAgICAgIGRlYnVnZ2VyXG4gICAgICAgICAgICAvLyBUT0RPIC0gYWN0dmF0aW9uIGRpc3RhbmNlIG5vdCBzcXVhcmVkICsgYXNsbyBtYWtlIGl0IGFjdGl2YXRlIG9ubHkgaWYgdGhlIGNhbWVyYSBwb3MgaXMgVU5ERVIgdGhlIGRvbWUgPT0gd2l0aGluIGl0J3MgcmFkaXVzXG4gICAgICAgICAgICBpZiAoZGlzdGFuY2UgPCB0aGlzLmFjdGl2YXRpb25EaXN0YW5jZSkge1xuICAgICAgICAgICAgICAgIC8vIGZpbmQgdGhlIHBlcmNlbnRhZ2Ugb2YgdGhpcyBkaXN0YW5jZSBiYXNlZCBvbiB0aGUgcmFuZ2Ugc2NhbGVNaW4gPiBzY2FsZU1heFxuICAgICAgICAgICAgICAgIC8vIFRPRE8gc2VlIGlmIFNjYWxhci5QZXJjZW50VG9SYW5nZSwgYW5kIFNjYWxhci5SYW5nZVRvUGVyY2VudCBjYW4gYmUgaGVscGZ1bFxuICAgICAgICAgICAgICAgIHZhciBwb3NJbkRpc3RhbmNlUmFuZ2UgPSBkaXN0YW5jZSAvIHRoaXMuYWN0aXZhdGlvbkRpc3RhbmNlXG4gICAgICAgICAgICAgICAgdmFyIHNjYWxlU2l6ZSA9IHRoaXMudmFsdWVUb1JhbmdlKHBvc0luRGlzdGFuY2VSYW5nZSwgMCwgdGhpcy5hY3RpdmF0aW9uRGlzdGFuY2UsIHRoaXMuc2NhbGVNaW4sIHRoaXMuc2NhbGVNYXggKTtcbiAgICAgICAgICAgICAgICBsb2coZm4gKyBcIiB1cGRhdGUgdmFsdWVUb1JhbmdlOiBcIiArIHNjYWxlU2l6ZSlcblxuICAgICAgICAgICAgICAgIGNvbXBvbmVudFQuc2NhbGUuc2NhbGUoc2NhbGVTaXplKSBcblxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICAvL2xvZyhmbiArIFwiIHVwZGF0ZSBkdCBcIiArIGR0ICsgXCIgcm90QW1vdW50OiBcIiwgcm90QW1vdW50KVxuICAgICAgICAgICAgLy9kZWJ1Z2dlclxuXG4gICAgICAgICAgICAvL3RyYW5zZm9ybS5yb3RhdGUocm90QXhpcywgcm90QW1vdW50KVxuICAgICAgICAgICAgXG4gICAgICAgICAgfVxuICAgIH1cblxuICAgIC8vIEdldCBkaXN0YW5jZVxuXG4gICAgLyoqXG4gICAgICogR2V0IERpc3RhbmNlXG4gICAgICogY29waWVkIGZyb20gaGVyZSBodHRwczovL2dpdGh1Yi5jb20vZGVjZW50cmFsYW5kLXNjZW5lcy9HbmFyay1wYXRyb2wvYmxvYi9hZTJkMTI1OThlOTUzNjliYWI4ZWViZjc2ZGU3OThmZWI5ODllMTkzL3NyYy9nYW1lLnRzI0wxNTVcbiAgICAgKiBvcHRpbWl6ZWQgdG8gYXZvaWQgaGF2aW5nIHRvIHVzZSB0aCBzcXVhcmUgcm9vdFxuICAgICAqIC0gVE9ETyBjb21wYXJlIHdpdGggVmVjdG9yMy5EaXN0YW5jZShwb3MxLCBwb3MyKVxuICAgICAqIC0gVE9ETyByZWZhY3RvciBpbnRvIERDTFV0aWxzIFxuICAgICAqIE5vdGU6XG4gICAgICogVGhpcyBmdW5jdGlvbiByZWFsbHkgcmV0dXJucyBkaXN0YW5jZSBzcXVhcmVkLCBhcyBpdCdzIGEgbG90IG1vcmUgZWZmaWNpZW50IHRvIGNhbGN1bGF0ZS5cbiAgICAgKiBUaGUgc3F1YXJlIHJvb3Qgb3BlcmF0aW9uIGlzIGV4cGVuc2l2ZSBhbmQgaXNuJ3QgcmVhbGx5IG5lY2Vzc2FyeSBpZiB3ZSBjb21wYXJlIHRoZSByZXN1bHQgdG8gc3F1YXJlZCB2YWx1ZXMuXG4gICAgICogV2UgYWxzbyB1c2Uge3gsen0gbm90IHt4LHl9LiBUaGUgeS1jb29yZGluYXRlIGlzIGhvdyBoaWdoIHVwIGl0IGlzLlxuICAgICAqIEBwYXJhbSBwb3MxIFZlY3RvcjMgXG4gICAgICogQHBhcmFtIHBvczIgVmVjdG9yMyAtIHVzdWFsbCB0aGUgY2FtZXJhLnBvc2l0aW9uXG4gICAgICovXG4gICAgcHVibGljIGRpc3RhbmNlKHBvczE6IFZlY3RvcjMsIHBvczI6IFZlY3RvcjMpOiBudW1iZXIge1xuICAgICAgICBjb25zdCBhID0gcG9zMS54IC0gcG9zMi54XG4gICAgICAgIGNvbnN0IGIgPSBwb3MxLnogLSBwb3MyLnpcbiAgICAgICAgcmV0dXJuIGEgKiBhICsgYiAqIGJcbiAgICB9XG4gIFxuICAgIC8qKlxuICAgICAqIFRPRE8gc2VlIGlmIHRoZXJlIGFyZSBBUEkgdG8gZ2V0IHRoaXMgYWxyZWFkeVxuICAgICAqIGVnIGluIFNjYWxhciBodHRwczovL2dpdGh1Yi5jb20vZGVjZW50cmFsYW5kL2Vjcy1yZWZlcmVuY2UvYmxvYi9tYXN0ZXIvZG9jcy1sYXRlc3QvZGVjZW50cmFsYW5kLWVjcy5zY2FsYXIubWRcbiAgICAgKiB0aGVyZSBhcmUgbWFueSBwb3NzaWJsZSB1c2VmdWwgZnVuY3Rpb25zICAgUGVyY2VudFRvUmFuZ2UsIFJhbmdlVG9QZXJjZW50LCBMZXJwLCBEZW5vcm1hbGl6ZSwgQ2xhbXBcbiAgICAgKiBAcGFyYW0gcG9zQSBcbiAgICAgKiBAcGFyYW0gQW1pbiBcbiAgICAgKiBAcGFyYW0gQW1heCBcbiAgICAgKiBAcGFyYW0gQm1pbiBcbiAgICAgKiBAcGFyYW0gQm1heCBcbiAgICAgKi9cbiAgICBwcml2YXRlIHZhbHVlVG9SYW5nZSAocG9zQTpudW1iZXIsIEFtaW46bnVtYmVyLCBBbWF4Om51bWJlciwgQm1pbjpudW1iZXIsIEJtYXg6bnVtYmVyKSB7XG4gICAgICAgIHZhciBuZXdWYWwgPSAoKCAocG9zQS1BbWluKSooQm1heC1CbWluKSkgLyAoQW1heC1BbWluKSApICsgQm1pbjtcbiAgICAgICAgLyogb3IgbW9yZSByZWFkYWJsZTtcbiAgICAgICAgdmFyIHJhbmdlQSA9IChBbWF4IC0gQW1pbik7XG4gICAgICAgIHZhciByYW5nZUIgPSAoQm1heCAtIEJtaW4pO1xuICAgICAgICB2YXIgbmV3VmFsID0gKCAoKHBvc0EgLSBBbWluKSAqIHJhbmdlQikgLyByYW5nZUEgKSkgKyBCbWluO1xuICAgICAgICAqL1xuICAgICAgICByZXR1cm4gbmV3VmFsXHRcbiAgICB9XG5cblxuICAgIC8qIElOdGVyd2VhdmVyIGNhcnJpYWJsZSBjb21wb25lbnQgc3lzdGVtXG4gICAgcHVibGljIHVwZGF0ZShkdDogbnVtYmVyKSB7XG4gICAgICAgIGZvciAobGV0IGVudGl0eSBvZiB0aGlzLmNhcnJ5YWJsZXMuZW50aXRpZXMpIHtcbiAgICAgICAgICBsZXQgY2FycnlhYmxlID0gZW50aXR5LmdldENvbXBvbmVudChDYXJyeWFibGUpO1xuICAgICAgICAgIGlmICghY2FycnlhYmxlLmJlaW5nQ2FycmllZCkge1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgfVxuICAgICAgICAgIFxuICAgICAgICAgIC8vIE1vdmUgb2JqZWN0IGJhY2sgdG8gc2FtZSByZWxhdGl2ZSBwb3NpdGlvbiB2ZXJzdXMgY2FtZXJhIGFzIHdoZW4geW91IGNsaWNrZWQgaXQuXG4gICAgICAgICAgZW50aXR5LmdldENvbXBvbmVudChUcmFuc2Zvcm0pLnBvc2l0aW9uID0gY2FycnlhYmxlLnJlbGF0aXZlVHJhbnNmb3JtLnBvc2l0aW9uXG4gICAgICAgICAgICAuY2xvbmUoKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL2R1cGxpY2F0ZSB0aGUgcG9zaXRpb24gdmVjdG9yIFxuICAgICAgICAgICAgLnJvdGF0ZSh0aGlzLmNhbWVyYS5yb3RhdGlvbikgICAgICAgLy9vcmllbnQgdG8gdGhlIGNhbWVyYSByb3RhdGlvblxuICAgICAgICAgICAgLmFkZCh0aGlzLmNhbWVyYS5wb3NpdGlvbikgICAgICAgICAgLy9wb3NpdGlvbiBpbiB0aGUgc2FtZSBwb3NpdGlvbiBvZiB0aGUgdXNlciBjYW1lcmFcbiAgICAgICAgICAgIC5hZGQobmV3IFZlY3RvcjMoMCwgMi40MiwgMCkpICAgICAgIC8vYWRkIGEgdGlueSBvZmZzZXQgc28geW91IHNlZSBpdCBpbiBmcm9udCBhbmQgYWJvdmUgb2YgeW91XG4gICAgICAgICAgO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICAqL1xuICAgIFxufSAgICAiLCJcbmV4cG9ydCB7IEdyb3VwUm90YXRvciB9IGZyb20gXCJncm91cFJvdGF0b3JcIlxuZXhwb3J0IHsgUHJveGltaXR5U2NhbGVyIH0gZnJvbSBcInByb3hpbWl0eVNjYWxlclwiXG5cbi8vZGV2IHB1cnBvc2VzXG5leHBvcnQgeyBHcm91cEF3YXJlU3lzdGVtIH0gZnJvbSBcImdyb3VwQXdhcmVTeXN0ZW1cIiIsIi8vIHRoaXMgaXMgdGhlIGJhc2ljIGNsYXNzIHRoYXQgYWxsIGdlbmVyYXRvcnMgc2hvdWxkIGV4dGVuZFxuLy8gZ2VuZXJhdG9ycyBhcmUgdGhlIGN1cnZlcyB0aGF0IGNoYW5nZSB0aGUgb3ZlcmFsbCBzaGFwZSBvZiB0aGUgZG9tZVxuXG5pbXBvcnQgeyBUaWxlIH0gZnJvbSBcIi4uL3RpbGVzL3RpbGVcIjtcbmltcG9ydCB7IGRvbWVTZXR0aW5ncyB9IGZyb20gXCIuLi9kb21lU2V0dGluZ3NcIlxuaW1wb3J0IHsgRENMVXRpbHMgfSBmcm9tIFwiLi4vLi4vdXRpbHMvZGNsVXRpbHNcIlxuaW1wb3J0ICogYXMgc3lzdGVtcyBmcm9tIFwiLi4vc3lzdGVtcy9pbmRleFwiO1xuXG5jb25zdCBmbiA9IFwiR2VuZXJhdG9yXCJcbi8vbG9nKGZuKVxuXG4vL0Fic3RyYWN0IGNsYXNzZXMgYWxsb3cgdG8gZm9yY2Ugc3ViY2xhc3NlcyB0byBpbXBsZW1lbnQgYSBjZXJ0YWluIG1ldGhvZFxuZXhwb3J0IGFic3RyYWN0IGNsYXNzIEdlbmVyYXRvciB7XG4gICAgXG4gICAgcHVibGljIHNldHRpbmdzICAgICA6YW55O1xuICAgIHB1YmxpYyBuYW1lICAgICAgICAgOlN0cmluZztcbiAgICBwcm90ZWN0ZWQgZG9tZSAgICAgIDpFbnRpdHk7XG4gICAgcHVibGljIHRpbGVUeXBlICAgICA6VGlsZTtcbiAgICBwdWJsaWMgZ3JvdXBzICAgICAgIDphbnk7XG5cbiAgICAvKipcbiAgICAgKiByZXF1aXJlcyBkaWZmZXJlbnQgYXJndW1lbnRzIGJ1dCBJJ20gdXNpbmcgdGhlIGNvbXBhY3QgdmVyc2lvbiB0byBzaW1wbGlmeSBhZGRpbmcgdGhlbVxuICAgICAqIHJlYWQgaW4gdGhlIGNvbnN0cnVjdG9yIHRoZSBvcmRlciBvZiB0aGUgcGFyYW1ldGVyc1xuICAgICAqIEBwYXJhbSBhcmdzIF9zZXR0aW5nczphbnksIF9kb21lRW50aXR5OkVudGl0eVxuICAgICAqL1xuXG4gICAgIGNvbnN0cnVjdG9yKGFyZ3M6IGFueSkge1xuICAgICAgICB0aGlzLnNldHRpbmdzID0gYXJncy5zZXR0aW5ncyB8fCBkb21lU2V0dGluZ3NcbiAgICAgICAgdGhpcy5kb21lID0gYXJncy5kb21lXG4gICAgICAgIHRoaXMuZ3JvdXBzID0gbmV3IEFycmF5KClcbiAgICAgICAgbG9nKGZuICsgXCIuY29uc3RydWN0b3IgdGhpcyBkb21lOiBcIiwgdGhpcy5kb21lKTtcbiAgICAgfVxuXG4gICAgIC8qIFVOU09MVkVEIGhvdyB0byBhY2Nlc3MgdGhlIGl0ZXJhdG9yIC4uLmFyZ3MgIGluIHR5cGVzY3JpcHQgc28gSSB0dXJuZWQgaXQgaW50byBhbiBvYmplY3RcbiAgICBjb25zdHJ1Y3RvciguLi5hcmdzOiBhbnkgKSB7XG4gICAgICAgIC8vbGV0IGFyZ3MgPSBBcnJheS52YWx1ZXMoX2FyZ3MpLy9hcmd1bWVudHMgLy9BcnJheS5mcm9tKF9hcmdzKVxuICAgICAgICB0aGlzLnNldHRpbmdzID0gYXJnc1swXSAvLyBzZXR0aW5ncyBcbiAgICAgICAgdGhpcy5kb21lICAgICA9IGFyZ3NbMV0gIC8vIGRvbWUgRW50aXR5XG4gICAgICAgIC8vdGhpcy5zZXR0aW5ncyA9IGFyZ3MubmV4dCgpXG4gICAgICAgIC8vdGhpcy5zZXR0aW5ncyA9IGFyZ3MubmV4dCgpXG4gICAgICAgIGRlYnVnZ2VyXG5cbiAgICAgICAgW3RoaXMuc2V0dGluZ3MsIHRoaXMuZG9tZV0gPSBhcmdzXG4gICAgICAgIGxvZyhmbiArIFwiLmNvbnN0cnVjdG9yXCIpXG4gICAgICAgIGxvZyhmbiArIFwiLmNvbnN0cnVjdG9yIHRoaXMgZG9tZTogXCIsIHRoaXMuZG9tZSk7XG4gICAgICAgIFxuICAgICAgICAvL3RoaXMudGlsZVR5cGUgPSB0aGlzLnNldFRpbGVUeXBlKCk7XG4gICAgfVxuICAgICovXG5cblxuICAgIC8vREVWIHNpbXBsZSBmdW5jdGlvbiB0byB2ZXJpZnkgd2hpY2ggZ2VuZXJhdG9yIGhhcyBiZWVuIGNhbGxlZFxuICAgIHB1YmxpYyBnZXROYW1lKCkgeyByZXR1cm4gdGhpcy5uYW1lIH07XG5cblxuICAgIC8vIGFic3RyYWN0IG1ldGhvZHMgbXVzdCBiZSBpbXBsZW1lbnRlZCBpbiBkZXJpdmVkIGNsYXNzZXMgLSBodHRwczovL2dpdGh1Yi5jb20vTWljcm9zb2Z0L1R5cGVTY3JpcHQtSGFuZGJvb2svYmxvYi9tYXN0ZXIvcGFnZXMvQ2xhc3Nlcy5tZCNhYnN0cmFjdC1jbGFzc2VzXG4gICAgYWJzdHJhY3QgZ2VuZXJhdGVDdXJ2ZSh0aWxlOlRpbGUpOiB2b2lkOyAgICAgICAgXG59IiwiXG5cblxuY29uc3QgZm4gPSBcIkRvdFRpbGVcIlxuLy9sb2coZm4gKyBcIiBjYWxsZWRcIilcblxuXG5pbXBvcnQgeyBUaWxlIH0gZnJvbSBcIi4vdGlsZVwiICAvL2h0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vcXVlc3Rpb25zLzQ2NTU4MjE1L2hvdy10by1yZXNvbHZlLWVycm9yLXRzMjM1MS1jYW5ub3QtdXNlLW5ldy13aXRoLWFuLWV4cHJlc3Npb24td2hvc2UtdHlwZS1sYS80NjU1ODg5N1xubGV0IHRpbGVTZXR0aW5ncyA9IHtcbiAgICBwb3NpdGlvbjogbmV3IFZlY3RvcjMoMSwwLDEpLCAgICAvLyBpbml0aWFsIHBvc2l0aW9uIGF0IHplcm9cbiAgICBzY2FsZTogbmV3IFZlY3RvcjMoMSwgMC4wMiwgMSksICAvLyBmbGF0dGVuIHRoZSBjaWxpbmRlciB0byBhIHRoaW4gcGxhbmVcbiAgICBzaXplOiBuZXcgU2l6ZSgyLDIpLCAgICAgICAgICAgICAvLyB0aGUgcHJpbWl0aXZlIG9iamVjdCBoYXMgMW0geCAxbSBidXQgdGhlIFNpemUgb2JqZWN0IG9ubHkgaGFzIDIgdmFyaWFibGVzIFRPRE8tbWF5YmUgY3JlYXRlIHlvdXIgb3duXG4gICAgcmFkaXVzOiAxICAgICAgICAgICAgICAgICAgICAgICAgLy8gdGhlIGNpbGluZGVyIGhhcyBhIGRlZmF1bHQgcmFkaXVzIG9mIDEgLSB3aGljaCBtYWtlcyBpdHMgd2lkdGg9aGVpZ2h0PTJtXG59O1xuXG5cbi8vIHRoaXMgaXMgYmFzaWNhbGx5IGFuIEVudGl0eSBhbmQgaGFzIGFsbCBvZiBpdCdzIHByb3BlcnRpZXNcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIERvdFRpbGUgZXh0ZW5kcyBUaWxlIHtcblxuICAgIGNvbnN0cnVjdG9yKF9uYW1lPzpzdHJpbmcpIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgdGhpcy5uYW1lID0gX25hbWUgfHwgZm47XG4gICAgICAgIC8vbG9nKGZuICsgXCIuY29uc3RydWN0b3IgX25hbWU6IFwiKyBfbmFtZSArIFwiIC0gdGhpcy5uYW1lOiBcIiArIHRoaXMubmFtZSk7XG4gICAgICAgIHRoaXMuc2l6ZSA9IHRpbGVTZXR0aW5ncy5zaXplO1xuICAgICAgICAvL2xvZyhmbiArIFwiLmNvbnN0cnVjdG9yIHRoaXM6IFwiLCB0aGlzKTtcbiAgICAgICAgdGhpcy5jcmVhdGVUaWxlKCk7XG4gICAgfVxuXG4gICAgcHVibGljIGNyZWF0ZVRpbGUodHJhbnNmb3JtPzpUcmFuc2Zvcm0pe1xuICAgICAgICAvL2xvZyhmbiArIFwiLmNyZWF0ZVRpbGUgdGhpczogXCIsIHRoaXMpO1xuICBcbiAgICAgICAgLy8gbm8gbmVlZCB0byBjcmVhdGUgbmV3IEVudGl0eSBzaW5jZSB0aGlzIGNsYXNzIGlzIGFscmVhZHkgb25lXG4gICAgICAgIC8vIHNldCBiYXNpYyBUcmFuc2Zvcm0gaWYgaXQncyBub3QgcGFzc2VkIGFzIGEgcGFyYW1ldGVyXG4gICAgICAgIGxldCB0OlRyYW5zZm9ybSA9IHRyYW5zZm9ybSB8fCBuZXcgVHJhbnNmb3JtKHtcbiAgICAgICAgICAgICAgICBwb3NpdGlvbjogdGlsZVNldHRpbmdzLnBvc2l0aW9uLFxuICAgICAgICAgICAgICAgIHNjYWxlOiB0aWxlU2V0dGluZ3Muc2NhbGUsXG4gICAgICAgICAgICB9KVxuXG4gICAgICAgIC8vIGFkZCBhIHRyYW5zZm9ybSB0byB0aGUgZW50aXR5ICAgIFxuICAgICAgICB0aGlzLmFkZENvbXBvbmVudChuZXcgVHJhbnNmb3JtKCB0ICkpICBcbiAgICAgICAgLy9sb2coZm4gKyBcIi5jcmVhdGVUaWxlIHBvc2l0aW9uOiBcIiwgdGhpcy5nZXRDb21wb25lbnQoVHJhbnNmb3JtKS5wb3NpdGlvbik7XG5cblxuICAgICAgICAvLyBhZGQgdGhlIG1hdGVyaWFsIHRvIGNvbG9yIGl0IC0gXG4gICAgICAgIC8vICEhISEhISAgTk8hIGxldCB0aGUgZ2VuZXJhdG9yIGFzc2lnbiBhIGNvbW1vbiBtYXRlcmlhbCBvdGhlcndpc2UgeW91IHdpbGwgaW5jdXIgaW4gVW5sb2FkaW5nIHNjZW5lIGF0IDAsMCBkdWUgdG8gZXhjZWVkZWQgbGltaXRzXG4gICAgICAgIC8vdGhpcy5hZGRDb21wb25lbnQobmV3IE1hdGVyaWFsKCkpOyAgICAgICAgICBcbiAgICAgICAgLy90aGlzLmdldENvbXBvbmVudChNYXRlcmlhbCkuYWxiZWRvQ29sb3IgPSBDb2xvcjMuQmx1ZSgpO1xuXG5cbiAgICAgICAgLy9DaWxpbmRlclxuICAgICAgICBsZXQgY2lsU2hhcGUgPSBuZXcgQ3lsaW5kZXJTaGFwZSgpXG4gICAgICAgIGNpbFNoYXBlLnJhZGl1c1RvcCA9ICAxXG4gICAgICAgIGNpbFNoYXBlLmFyYyA9ICAxODAgICAgICAgICAgICAgLy8gQUNIVFVORy1CVUc6IHRoaXMgZG9lcyBub3Qgd29ya1xuICAgICAgICB0aGlzLmFkZENvbXBvbmVudChjaWxTaGFwZSk7ICAgIC8vIGFkZCBhIHNoYXBlIHRvIHRoZSBlbnRpdHlcbiAgICAgICAgXG5cbiAgICAgICAgLyogQkVIQVZJT1JcbiAgICAgICAgLy8gcXVpY2sgdGVzdCB0byBzZWUgZHVwbGljYXRlcy4uLiBtb3ZlIHRoaXMgb25lXG4gICAgICAgIHRoaXMuYWRkQ29tcG9uZW50KFxuICAgICAgICAgICAgbmV3IE9uQ2xpY2soZSA9PiB7XG4gICAgICAgICAgICAgICAgbG9nKFwiVGlsZSBjbGlja2VkIGU6IFwiLCBlKTtcbiAgICAgICAgICAgICAgICBsb2coXCJUaWxlIGNsaWNrZWQgVmVjdG9yMzogXCIsIFZlY3RvcjMpO1xuICAgICAgICAgICAgICAgIGxvZyhcIlRpbGUgY2xpY2tlZCBPYmplY3Qua2V5cyhWZWN0b3IzKTogXCIsIE9iamVjdC5rZXlzKFZlY3RvcjMpKTtcbiAgICAgICAgICAgICAgICBsb2coXCJUaWxlIGNsaWNrZWQgT2JqZWN0LmtleXMocG9zaXRpb24pOiBcIiwgT2JqZWN0LmtleXModGhpcy5nZXRDb21wb25lbnQoVHJhbnNmb3JtKS5wb3NpdGlvbikpO1xuICAgICAgICAgICAgICAgIGxvZyhcIlRpbGUgY2xpY2tlZCBwb3NpdGlvbi5oYXNPd25Qcm9wZXJ0eSgnYWRkJykpOiBcIiwgdGhpcy5nZXRDb21wb25lbnQoVHJhbnNmb3JtKS5wb3NpdGlvbi5oYXNPd25Qcm9wZXJ0eSgnYWRkJykpO1xuICAgICAgICAgICAgICAgIGxvZyhcIlRpbGUgY2xpY2tlZCBwb3NpdGlvbi5oYXNPd25Qcm9wZXJ0eSgnYWRkSW5QbGFjZScpKTogXCIsIHRoaXMuZ2V0Q29tcG9uZW50KFRyYW5zZm9ybSkucG9zaXRpb24uaGFzT3duUHJvcGVydHkoJ2FkZEluUGxhY2UnKSk7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgLy90aWxlLmdldENvbXBvbmVudChUcmFuc2Zvcm0pLnBvc2l0aW9uLnNldCgxLDIsMSkgICAgICAgICAgICAgICAgICAgICAgLy8gcG9zaXRpb24gc2V0IHdvcmtzXG4gICAgICAgICAgICAgICAgLy90aWxlLmdldENvbXBvbmVudChUcmFuc2Zvcm0pLnBvc2l0aW9uLmFkZChuZXcgVmVjdG9yMygxLDAsIDEpKSAgICAgICAgLy8gcG9zaXRpb24gLmFkZCBkb2Vzbid0XG4gICAgICAgICAgICAgICAgdGhpcy5nZXRDb21wb25lbnQoVHJhbnNmb3JtKS5wb3NpdGlvbi5hZGRJblBsYWNlKG5ldyBWZWN0b3IzKDEsMCwgMSkpICAgLy8gYWRkSW5QbGFjZSB3b3JrcyB0b29cblxuICAgICAgICAgICAgfSlcbiAgICAgICAgKSovXG5cbiAgICAgICAgZW5naW5lLmFkZEVudGl0eSh0aGlzKSAgIC8vIGFkZCB0aGUgZW50aXR5IHRvIHRoZSBlbmdpbmVcbiAgICAgICAgcmV0dXJuIHRoaXNcbiAgICB9XG5cbn0iLCJcbmNvbnN0IGZuID0gXCJQbGFuZVRpbGVcIjtcbi8vbG9nKGZuICsgXCIgY2FsbGVkXCIpXG5cblxuaW1wb3J0IHsgVGlsZSB9IGZyb20gXCIuL3RpbGVcIiAvLyBodHRwczovL3N0YWNrb3ZlcmZsb3cuY29tL3F1ZXN0aW9ucy80NjU1ODIxNS9ob3ctdG8tcmVzb2x2ZS1lcnJvci10czIzNTEtY2Fubm90LXVzZS1uZXctd2l0aC1hbi1leHByZXNzaW9uLXdob3NlLXR5cGUtbGEvNDY1NTg4OTdcbmxldCB0aWxlU2V0dGluZ3MgPSB7XG4gICAgcG9zaXRpb246IG5ldyBWZWN0b3IzKDEsMCwxKSwgICAgLy8gaW5pdGlhbCBwb3NpdGlvbiBhdCB6ZXJvXG5cbiAgICAvLyBUaGVzZSBzaG91bGQgYmUgdGhlIHJlYWwgZGltZW5zaW9ucywgYnV0IHRoZXkgY2F1c2UgYSBwcm9ibGVtIHdpdGggY2lyY2xlczFHZW4gc28gSSBjaGVhdGVkIHRvIGhhdmUgc2l6ZSB0aGF0IHdvcmtcbiAgICAvLyBpdCdzIG1haW5seSB0aGUgc2l6ZSB0aGF0IGlzIGNhdXNpbmcgcHJvYmxlbXMuLi4gc21hbGwgc2l6ZSBudW1iZXJzIDwgMS43IHdpbGwgY2F1c2UgaW5maW5pdHlcbiAgICAvL3NjYWxlOiBuZXcgVmVjdG9yMygxLDAuMDMsMSksICAgIC8vIGZsYXR0ZW4gdGhlIGJveCB0byBhIHRoaW4gcGxhbmVcbiAgICAvL3NpemU6IG5ldyBTaXplKDEsMSksICAgICAgICAgICAgIC8vIHRoZSBwcmltaXRpdmUgb2JqZWN0IGhhcyAxbSB4IDFtIGJ1dCB0aGUgU2l6ZSBvYmplY3Qgb25seSBoYXMgMiB2YXJpYWJsZXMgVE9ETy1tYXliZSBjcmVhdGUgeW91ciBvd25cbiAgICAvLyB0aGVzZSBhcmUgdGhlIHNpemVzIHRoYXQgd29ya1xuICAgIHNjYWxlOiBuZXcgVmVjdG9yMygyLDAuMDMsMiksICAgIC8vIGZsYXR0ZW4gdGhlIGJveCB0byBhIHRoaW4gcGxhbmVcbiAgICBzaXplOiBuZXcgU2l6ZSgxLjgsMS44KSwgICAgICAgICAgICAgLy8gdGhlIHByaW1pdGl2ZSBvYmplY3QgaGFzIDFtIHggMW0gYnV0IHRoZSBTaXplIG9iamVjdCBvbmx5IGhhcyAyIHZhcmlhYmxlcyBUT0RPLW1heWJlIGNyZWF0ZSB5b3VyIG93blxuICAgIC8vcmFkaXVzOiAxXG59O1xuXG5cbi8vIHRoaXMgaXMgYmFzaWNhbGx5IGFuIEVudGl0eSBhbmQgaGFzIGFsbCBvZiBpdCdzIHByb3BlcnRpZXNcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBsYW5lVGlsZSBleHRlbmRzIFRpbGUge1xuXG4gICAgY29uc3RydWN0b3IoX25hbWU/OnN0cmluZykge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICAvL2xvZyhmbiArIFwiLmNvbnN0cnVjdG9yIHRoaXM6IFwiLCB0aGlzKTtcbiAgICAgICAgLy9sb2coZm4gKyBcIi5jb25zdHJ1Y3RvciBFbnRpdHk6IFwiLCBFbnRpdHkpO1xuICAgICAgICB0aGlzLm5hbWUgPSBfbmFtZSB8fCBmbjtcbiAgICAgICAgdGhpcy5zaXplID0gdGlsZVNldHRpbmdzLnNpemU7XG4gICAgICAgIHRoaXMuY3JlYXRlVGlsZSgpO1xuICAgIH1cblxuICAgIHB1YmxpYyBjcmVhdGVUaWxlKHRyYW5zZm9ybT86VHJhbnNmb3JtICl7XG5cbiAgICAgICAgbGV0IHQ6VHJhbnNmb3JtID0gdHJhbnNmb3JtIHx8IG5ldyBUcmFuc2Zvcm0oe1xuICAgICAgICAgICAgcG9zaXRpb246IHRpbGVTZXR0aW5ncy5wb3NpdGlvbixcbiAgICAgICAgICAgIHNjYWxlOiB0aWxlU2V0dGluZ3Muc2NhbGUsXG4gICAgICAgIH0pXG5cbiAgICAgICAgdGhpcy5hZGRDb21wb25lbnQoIHQgKSAgICAgICAgICAgICAgICAgIC8vIGFkZCBhIHRyYW5zZm9ybSB0byB0aGUgZW50aXR5XG5cbiAgICAgICAgdmFyIHNoYXBlID0gbmV3IEJveFNoYXBlKClcbiAgICAgICAgdGhpcy5hZGRDb21wb25lbnQoc2hhcGUpOyAgICAgICAgICAgICAgIC8vIGFkZCBhIHNoYXBlIHRvIHRoZSBlbnRpdHlcbiAgICAgICAgXG4gICAgICAgIC8vdGhpcy5hZGRDb21wb25lbnQobmV3IE1hdGVyaWFsKCkpOyAgICAgIC8vIGFkZCB0aGUgbWF0ZXJpYWwgdG8gY29sb3IgaXRcbiAgICAgICAgLy90aGlzLmdldENvbXBvbmVudChNYXRlcmlhbCkuYWxiZWRvQ29sb3IgPSBDb2xvcjMuUmVkKCk7XG5cbiAgICAgICAgZW5naW5lLmFkZEVudGl0eSh0aGlzKSAgICAgICAgICAgICAgICAgIC8vIGFkZCB0aGUgZW50aXR5IHRvIHRoZSBlbmdpbmVcblxuICAgICAgICByZXR1cm4gdGhpc1xuICAgIH0gICAgXG59ICAgICIsIlxuY29uc3QgZm4gPSBcInRpbGVJbmRleFwiXG4vL2xvZyhmbilcblxuLy8gdGhlcmUgaXMgbm8gbmVlZCB0byBpbXBvcnQgdGhlbSBmaXJzdFxuZXhwb3J0IHsgVGlsZSB9IGZyb20gXCIuL3RpbGVcIjtcbmV4cG9ydCB7IGRlZmF1bHQgYXMgRG90VGlsZSB9IGZyb20gXCIuL2RvdFRpbGVcIjtcbmV4cG9ydCB7IGRlZmF1bHQgYXMgUGxhbmVUaWxlIH0gZnJvbSBcIi4vcGxhbmVUaWxlXCI7IiwiLy8gdGhpcyBpcyBhIHNpbXBsZSB3YXkgdG8gZGVidWcgdGhlIHNoYXBlXG4vLyBpdCBzaW1wbHkgcHV0cyBhIHNpbmdsZSBlbnRpdHkgYXQgdGhlIGNlbnRlciBvZiB0aGUgcGxvdCwgc28gdGhhdCB5b3UgY2FuIG1hbmlwdWxhdGUgaXQgYXMgYSBzaW5nbGUgaXRlbSB3aXRob3V0IFxuXG4vLyBleHBvcnRpbmcgdGhlIFRpbGUgQ2xhc3MgYXMgZGVmYXVsdCBhbGxvd3MgdG8gaW1wb3J0IGl0IGxpa2UgdGhpcyBcbi8vIGFuZCBzb2x2ZXMgcHJvYmxlbXMgdGhhdCB0aGUgb2JqZWN0IGNvdWxkIG5vdCBiZSByZWZlcmVuY2VkXG4vLyBodHRwczovL3N0YWNrb3ZlcmZsb3cuY29tL3F1ZXN0aW9ucy80NjU1ODIxNS9ob3ctdG8tcmVzb2x2ZS1lcnJvci10czIzNTEtY2Fubm90LXVzZS1uZXctd2l0aC1hbi1leHByZXNzaW9uLXdob3NlLXR5cGUtbGEvNDY1NTg4OTdcbi8vaW1wb3J0IFRpbGUgZnJvbSBcIi4uL3RpbGVzL3RpbGVcIjtcbmltcG9ydCAqIGFzIHRpbGVUeXBlIGZyb20gXCIuLi90aWxlcy9pbmRleFwiXG5pbXBvcnQgeyBHZW5lcmF0b3IgfSBmcm9tIFwiLi9nZW5lcmF0b3JcIjtcbmltcG9ydCB7IERDTFV0aWxzIH0gZnJvbSBcIi4uLy4uL3V0aWxzL2RjbFV0aWxzXCJcblxuY29uc3QgZm4gPSBcIlNpbmdsZUVudGl0eUdlblwiXG4vL2xvZyhmbilcblxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBTaW5nbGVFbnRpdHlHZW4gZXh0ZW5kcyBHZW5lcmF0b3Ige1xuICAgICAgICBcbiAgICAgICAgcHVibGljIHRpbGU6dGlsZVR5cGUuVGlsZVxuICAgICAgICBcbiAgICAgICAgY29uc3RydWN0b3IoYXJnczogYW55KXtcbiAgICAgICAgICAgIHN1cGVyKGFyZ3MpO1xuICAgICAgICAgICAgdGhpcy5uYW1lID0gXCJTaW5nbGVFbnRpdHlHZW5cIjtcbiAgICAgICAgICAgIGxvZyhmbiArIFwiLmNvbnN0cnVjdG9yXCIpXG4gICAgICAgICAgICAvL2xvZyhmbiArIFwiLmNvbnN0cnVjdG9yIDIgdGhpcy5zZXR0aW5nczogXCIsIHRoaXMuc2V0dGluZ3MpO1xuICAgICAgICB9XG5cbiAgICAgICAgZ2VuZXJhdGVDdXJ2ZSh0aWxlT2JqOnRpbGVUeXBlLlRpbGUpIHtcbiAgICAgICAgICAgIHRoaXMudGlsZVR5cGUgPSB0aWxlT2JqO1xuICAgICAgICAgICAgbG9nKGZuICsgXCIuZ2VuZXJhdGVDdXJ2ZSB3aXRoIHRpbGVPYmo6IFwiLCB0aWxlT2JqKSBcbiAgICAgICAgICAgIGxvZyhmbiArIFwiLmdlbmVyYXRlQ3VydmUgd2l0aCB0aGlzLnRpbGVUeXBlOiBcIiwgdGhpcy50aWxlVHlwZSkgXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIDEgLSBDcmVhdGUgdGhlIHRpbGUocylcbiAgICAgICAgICAgIGxldCB0MTp0aWxlVHlwZS5UaWxlID0gbmV3IHRoaXMudGlsZVR5cGUoKTsgICAvLyBXb3JrcyBldmVuIGlmIFR5cGVzY3JpcHQgY29tcGxhaW5zIDopIHlheSFcbiAgICAgICAgICAgIHRoaXMudGlsZSA9IHQxO1xuXG4gICAgICAgICAgICAvLyBhZGQgaXQgYXMgYSBjaGlsZHJlbiBvZiBkb21lXG4gICAgICAgICAgICB0MS5zZXRQYXJlbnQodGhpcy5kb21lKTtcbiAgICAgICAgICAgIGxvZyhmbiArIFwiLmdlbmVyYXRlQ3VydmUgYWRkZWQgdGlsZSBhcyBhIGNoaWxkcmVuIG9mIGRvbWUgLSB2ZXJpZnlpbmcgZG9tZS5jaGlsZHJlbjogXCIsIHRoaXMuZG9tZS5jaGlsZHJlbikgIFxuXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIFBPU0lUSU9OIC0gdXNlIGRlZmF1bHQgdGlsZSBwb3NpdGlvblxuICAgICAgICAgICAgLy9sZXQgcG9zID0gRENMVXRpbHMuZ2V0UGFyY2VsQ2VudGVyKHRoaXMuc2V0dGluZ3MucGFyY2VsLncsIHRoaXMuc2V0dGluZ3MucGFyY2VsLmgpOyAgIC8vIGNlbnRlclxuICAgICAgICAgICAgLy9sZXQgcG9zID0gbmV3IFZlY3RvcjMoMC41LCAwLCAwLjUpICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHRvIHZpc3VhbGx5IG1lYXN1cmUgaXQncyBzaXplXG4gICAgICAgICAgICAvL2xvZyhmbiArIFwiLmdlbmVyYXRlQ3VydmUgcG9zaXRpb24gZnJvbSBEQ0xVdGlscy5nZXRQYXJjZWxDZW50ZXIoKTogXCIsIHBvcylcbiAgICAgICAgICAgIC8vdDEuZ2V0Q29tcG9uZW50KFRyYW5zZm9ybSkucG9zaXRpb24gPSBwb3M7XG4gICAgICAgICAgICBcblxuICAgICAgICAgICAgLy8gTUFURVJJQUxcbiAgICAgICAgICAgIHQxLmdldENvbXBvbmVudChNYXRlcmlhbCkuYWxiZWRvQ29sb3IgPSBDb2xvcjMuRnJvbUhleFN0cmluZyh0aGlzLnNldHRpbmdzLmRjbENvbG9ycy5yZWQpXG4gICAgICAgICAgICAvL2xldCBncmFkaWVudFJZID0gdGhpcy5zZXR0aW5ncy5kY2xDb2xvcnMuZ3JhZGllbnRzLnJlZFRvWWVsbG93ICBcbiAgICAgICAgICAgIC8vbGV0IGdyYWRpZW50UlAgPSB0aGlzLnNldHRpbmdzLmRjbENvbG9ycy5ncmFkaWVudHMucHVycGxlVG9SZWRcbiAgICAgICAgICAgIC8vdDEuZ2V0Q29tcG9uZW50KE1hdGVyaWFsKS5hbGJlZG9Db2xvciA9IENvbG9yMy5MZXJwKCBDb2xvcjMuRnJvbUhleFN0cmluZyhncmFkaWVudFJZWzBdKSwgQ29sb3IzLkZyb21IZXhTdHJpbmcoZ3JhZGllbnRSWVsxXSksIDAuNSk7XG5cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgbGV0IGNsaWNrQ291bnQgPSAwXG4gICAgICAgICAgICAvLyBzZXQgYSBzYW1wbGUgYmVoYXZpb3IgLSBzaW1wbHkgbW92ZXMgb24gY2xpY2tcbiAgICAgICAgICAgIHQxLmFkZENvbXBvbmVudChcbiAgICAgICAgICAgICAgICBuZXcgT25DbGljayhlID0+IHtcbiAgICAgICAgICAgICAgICAgICAgLy9sb2coXCJUaWxlIGNsaWNrZWQgU2l6ZTogXCIsIHQxLnNpemUpXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY2xpY2tIYW5kbGVyKClcbiAgICAgICAgICAgICAgICAgICAgLy90aWxlLmdldENvbXBvbmVudChUcmFuc2Zvcm0pLnBvc2l0aW9uLnNldCgxLDIsMSkgICAgICAgICAgICAgICAgICAgICAgLy8gcG9zaXRpb24gc2V0IHdvcmtzXG4gICAgICAgICAgICAgICAgICAgIC8vdGlsZS5nZXRDb21wb25lbnQoVHJhbnNmb3JtKS5wb3NpdGlvbi5hZGQobmV3IFZlY3RvcjMoMSwwLCAxKSkgICAgICAgIC8vIHBvc2l0aW9uIC5hZGQgZG9lc24ndFxuICAgICAgICAgICAgICAgICAgICAvL3QxLmdldENvbXBvbmVudChUcmFuc2Zvcm0pLnBvc2l0aW9uLmFkZEluUGxhY2UobmV3IFZlY3RvcjMoMSwwLCAxKSkgICAvLyBhZGRJblBsYWNlIHdvcmtzIHRvb1xuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgKVxuICAgICAgICAgICAgXG4gICAgICAgIH1cblxuICAgICAgICAvLyB1dGlsaXR5IGZ1bmN0aW9uIHRvIHJvdGF0ZSB0cm91Z2ggZGlmZmVyZW50IGNvZGUgc2V0dGluZ3MgYnkgY2xpY2tpbmcgb24gdGhlIHRpbGVcbiAgICAgICAgLy8gVE9ETyBjb252ZXJ0IGludG8gYW4gaXRlcmF0b3IgYW5kIGhhdmUgdGhpcy5jbGlja0hhbmRsZXIubmV4dCgpXG4gICAgICAgIHByaXZhdGUgY2xpY2tDb3VudCA9IDA7XG4gICAgICAgIHB1YmxpYyBjbGlja0hhbmRsZXIoKSB7XG4gICAgICAgICAgICBsb2coZm4gKyBcImNsaWNrSGFuZGxlciBjbGlja0NvdW50IDE6IFwiICsgdGhpcy5jbGlja0NvdW50KTtcbiAgICAgICAgICAgIGxldCBjID0gdGhpcy5jbGlja0NvdW50IFxuICAgICAgICAgICAgbGV0IHQgPSB0aGlzLnRpbGU7XG4gICAgICAgICAgICBsZXQgdGM7XG5cbiAgICAgICAgICAgIGxldCBncmFkaWVudFJZID0gdGhpcy5zZXR0aW5ncy5kY2xDb2xvcnMuZ3JhZGllbnRzLnJlZFRvWWVsbG93ICBcbiAgICAgICAgICAgIGxldCBncmFkaWVudFJQID0gdGhpcy5zZXR0aW5ncy5kY2xDb2xvcnMuZ3JhZGllbnRzLnB1cnBsZVRvUmVkXG4gICAgICAgICAgICBsb2coXCJDb2xvcjMuWWVsbG93KCk6IFwiLCBDb2xvcjMuWWVsbG93KCkpXG4gICAgICAgICAgICBsb2coXCJDb2xvcjMuRnJvbUhleFN0cmluZyhncmFkaWVudFJZWzBdKTogXCIsIENvbG9yMy5Gcm9tSGV4U3RyaW5nKGdyYWRpZW50UllbMF0pKVxuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBleHBlcmltZW50cyAtIGlmIGVsc2UgbW9yZSBjb21wYWN0XG4gICAgICAgICAgICBsZXQgbWF4QyA9IDYgICAgLy9udW1iZXIgb2YgY2xpY2sgZXhwZXJpbWVudHMgYWZ0ZXIgd2hpY2ggY3ljbGUgdGhyb3VnaFxuICAgICAgICAgICAgaWYgKGMgPT0gMCkgICAgICB0YyA9IENvbG9yMy5Gcm9tSGV4U3RyaW5nKCB0aGlzLnNldHRpbmdzLmRjbENvbG9ycy5vcmFuZ2UgKTtcbiAgICAgICAgICAgIGVsc2UgaWYgKGMgPT0gMSkgdGMgPSBDb2xvcjMuRnJvbUhleFN0cmluZyggdGhpcy5zZXR0aW5ncy5kY2xDb2xvcnMucmVkICk7XG4gICAgICAgICAgICBlbHNlIGlmIChjID09IDIpIHRjID0gQ29sb3IzLkZyb21IZXhTdHJpbmcoIHRoaXMuc2V0dGluZ3MuZGNsQ29sb3JzLnllbGxvdyApO1xuICAgICAgICAgICAgZWxzZSBpZiAoYyA9PSAzKSB0YyA9IENvbG9yMy5Gcm9tSGV4U3RyaW5nKCB0aGlzLnNldHRpbmdzLmRjbENvbG9ycy55ZWxsb3dTdW4gKTtcbiAgICAgICAgICAgIGVsc2UgaWYgKGMgPT0gNCkgdGMgPSBDb2xvcjMuRnJvbUhleFN0cmluZyggdGhpcy5zZXR0aW5ncy5kY2xDb2xvcnMucHVycGxlICk7XG4gICAgICAgICAgICBlbHNlIGlmIChjID09IDUpIHRjID0gQ29sb3IzLkxlcnAoIENvbG9yMy5Gcm9tSGV4U3RyaW5nKGdyYWRpZW50UllbMF0pLCBDb2xvcjMuRnJvbUhleFN0cmluZyhncmFkaWVudFJZWzFdKSwgMC41KSA7XG4gICAgICAgICAgICBlbHNlIGlmIChjID09IDYpIHRjID0gQ29sb3IzLkxlcnAoIENvbG9yMy5Gcm9tSGV4U3RyaW5nKGdyYWRpZW50UlBbMF0pLCBDb2xvcjMuRnJvbUhleFN0cmluZyhncmFkaWVudFJQWzFdKSwgMC41KSA7XG5cbiAgICAgICAgICAgIC8vIGFzc2lnbiBpdCBhdCB0aGUgZW5kXG4gICAgICAgICAgICB0aGlzLnRpbGUuZ2V0Q29tcG9uZW50KE1hdGVyaWFsKS5hbGJlZG9Db2xvciA9IHRjXG5cbiAgICAgICAgICAgIC8vIGN5Y2xlIHRocm91Z2ggZXhwZXJpbWVudHNcbiAgICAgICAgICAgIHRoaXMuY2xpY2tDb3VudCA9IChjID4gbWF4QykgPyAwIDogKGMrMSlcbiAgICAgICAgICAgIGxvZyhmbiArIFwiY2xpY2tIYW5kbGVyIGNsaWNrQ291bnQyOiBcIiArIHRoaXMuY2xpY2tDb3VudCk7XG4gICAgICAgIH1cblxufSIsIlxuY29uc3QgZm4gPSBcIkRvdWJsZUVudGl0eUdlblwiXG4vL2xvZyhmbilcblxuXG5pbXBvcnQgeyBHZW5lcmF0b3IgfSBmcm9tIFwiLi9nZW5lcmF0b3JcIlxuaW1wb3J0IHsgRENMVXRpbHMgfSBmcm9tIFwiLi4vLi4vdXRpbHMvZGNsVXRpbHNcIlxuXG5cbi8vIEdlbmVyYXRvciBTZXR0aW5ncyBhcyBhIHNpbXBsZSBlZGl0YWJsZSBvYmplY3RcbmxldCBTID0ge1xuICAgIG1heFRpbGVzOiA0XG59ICAgIFxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBEb3VibGVFbnRpdHlHZW4gZXh0ZW5kcyBHZW5lcmF0b3Ige1xuXG4gICAgICAgIHB1YmxpYyBuYW1lOlN0cmluZztcblxuICAgICAgICAvL2NvbnN0cnVjdG9yKF9zZXR0aW5nczphbnksIF9kb21lRW50aXR5OkVudGl0eSl7XG4gICAgICAgIC8vY29uc3RydWN0b3IoLi4uYXJnczogYW55W10peyAgICAvLyB1bnNvbHZlZCBob3cgdG8gYWNjZXNzIHRoZSBpdGVyYXRvciB3aXRob3VyIEFycmF5LmZyb21cbiAgICAgICAgY29uc3RydWN0b3IoYXJnczogYW55KXtcbiAgICAgICAgICAgIGxvZyhmbiArIFwiLmNvbnN0cnVjdG9yIDFcIilcbiAgICAgICAgICAgIHN1cGVyKGFyZ3MpO1xuICAgICAgICAgICAgdGhpcy5uYW1lID0gXCJEb3VibGVFbnRpdHlHZW5cIjtcbiAgICAgICAgICAgIC8vbG9nKGZuICsgXCIuY29uc3RydWN0b3IgMiB0aGlzLnNldHRpbmdzOiBcIiwgdGhpcy5zZXR0aW5ncyk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBWMiBpbiBhIGZvciBsb29wXG4gICAgICAgIGdlbmVyYXRlQ3VydmUodGlsZU9iajp0aWxlVHlwZS5UaWxlKSB7XG4gICAgICAgICAgICBsb2coZm4gKyBcIi5nZW5lcmF0ZUN1cnZlIHdpdGggdGlsZU9iajogXCIsIHRpbGVPYmopIFxuICAgICAgICAgICAgLy8gQ3JlYXRlIHRoZSB0aWxlKHMpXG4gICAgICAgICAgICB0aGlzLnRpbGVUeXBlID0gdGlsZU9iajtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgdmFyIHQ9MCAvLyBpbXBvcnRhbnQgZGVjbGFyZSBpdCBvdXRzaWRlIG9mIHRoZSBzY29wZSBvdGhlcndpc2UgaXQgd2lsbCBiZSB1bmRlZmluZWRcbiAgICAgICAgICAgIGZvciAodD0wOyB0IDw9IFMubWF4VGlsZXM7IHQrKykge1xuICAgICAgICAgICAgICAgIGxvZyhmbiArIFwiLmdlbmVyYXRlQ3VydmUgdDogXCIgKyB0KTtcblxuICAgICAgICAgICAgICAgIC8vIGNyZWF0ZSB0aGUgdGlsZVxuICAgICAgICAgICAgICAgIGxldCB0aWxlOnRpbGVUeXBlLlRpbGUgPSBuZXcgdGhpcy50aWxlVHlwZShTdHJpbmcoXCJ0aWxlX1wiK3QpKTsgICAvLyBXb3JrcyBldmVuIGlmIFR5cGVzY3JpcHQgY29tcGxhaW5zIDopIHlheSFcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAvLyBjaGFuZ2UgaXQncyBwb3NpdGlvblxuICAgICAgICAgICAgICAgIGxldCBwb3NpdGlvbiA9IG5ldyBWZWN0b3IzKDEsMSwgMSp0KTsgLy8gZXZlcnkgdGlsZSBwdXQgaXQgMW0gYXBhcnQgaW4gdGhlIHogYXhpc1xuXG5cbiAgICAgICAgICAgICAgICB0aWxlLnNldFBhcmVudCh0aGlzLmRvbWUpO1xuICAgICAgICAgICAgICAgIHRpbGUuZ2V0Q29tcG9uZW50KFRyYW5zZm9ybSkucG9zaXRpb24gPSBwb3NpdGlvblxuICAgICAgICAgICAgICAgIHRpbGUuZ2V0Q29tcG9uZW50KE1hdGVyaWFsKS5hbGJlZG9Db2xvciA9IENvbG9yMy5SYW5kb20oKSAgICAgIC8vIEdyZWVuKClcblxuICAgICAgICAgICAgICAgIC8vIHNldCBhIHNhbXBsZSBiZWhhdmlvciAtIHNpbXBseSBtb3ZlcyBvbiBjbGlja1xuICAgICAgICAgICAgICAgIHRpbGUuYWRkQ29tcG9uZW50KFxuICAgICAgICAgICAgICAgICAgICBuZXcgT25DbGljayhlID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvZyhcIlRpbGUgY2xpY2tlZCBlOiBcIiwgZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBsb2coZm4gKyBcIiAtIHRpbGUgY2xpY2tlZCBuYW1lOiBcIiArIHRpbGUubmFtZSArIFwiIC0gejogXCIgKyB0aWxlLmdldENvbXBvbmVudChUcmFuc2Zvcm0pLnBvc2l0aW9uLnogKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRpbGUuZ2V0Q29tcG9uZW50KFRyYW5zZm9ybSkucG9zaXRpb24uYWRkSW5QbGFjZShuZXcgVmVjdG9yMygxLDAsMCkpICAgXG4gICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgKVxuXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBkZWJ1Z2dlclxuXG4gICAgICAgICAgICBcbiAgICAgICAgfVxuXG5cblxuICAgICAgICAvKiBWMSAtIEVOVElUSUVTIEdFTkVSQVRFRCBCWSBIQU5EXG4gICAgICAgIGdlbmVyYXRlQ3VydmUodGlsZU9iajp0aWxlVHlwZS5UaWxlKSB7XG4gICAgICAgICAgICBsb2coZm4gKyBcIi5nZW5lcmF0ZUN1cnZlIHdpdGggdGlsZU9iajogXCIsIHRpbGVPYmopIFxuXG4gICAgICAgICAgICAvLyBDcmVhdGUgdGhlIHRpbGUocylcbiAgICAgICAgICAgIHRoaXMudGlsZVR5cGUgPSB0aWxlT2JqO1xuXG4gICAgICAgICAgICBsZXQgdDp0aWxlVHlwZS5UaWxlID0gbmV3IHRoaXMudGlsZVR5cGUoKTsgICAvLyBXb3JrcyBldmVuIGlmIFR5cGVzY3JpcHQgY29tcGxhaW5zIDopIHlheSFcbiAgICAgICAgICAgIHQuc2V0UGFyZW50KHRoaXMuZG9tZSk7XG4gICAgICAgICAgICB0LmdldENvbXBvbmVudChUcmFuc2Zvcm0pLnBvc2l0aW9uID0gbmV3IFZlY3RvcjMoMSwxLDEpO1xuICAgICAgICAgICAgdC5nZXRDb21wb25lbnQoTWF0ZXJpYWwpLmFsYmVkb0NvbG9yID0gQ29sb3IzLkdyZWVuKClcblxuICAgICAgICAgICAgLy8gc2V0IGEgc2FtcGxlIGJlaGF2aW9yIC0gc2ltcGx5IG1vdmVzIG9uIGNsaWNrXG4gICAgICAgICAgICB0LmFkZENvbXBvbmVudChcbiAgICAgICAgICAgICAgICBuZXcgT25DbGljayhlID0+IHtcbiAgICAgICAgICAgICAgICAgICAgbG9nKFwiVGlsZSBjbGlja2VkIGU6IFwiLCBlKTtcbiAgICAgICAgICAgICAgICAgICAgbG9nKGZuICsgXCIgLSB0aWxlIDEgY2xpY2tlZFwiKTtcbiAgICAgICAgICAgICAgICAgICAgdC5nZXRDb21wb25lbnQoVHJhbnNmb3JtKS5wb3NpdGlvbi5hZGRJblBsYWNlKG5ldyBWZWN0b3IzKDAsMSwwKSkgICAvLyBhZGRJblBsYWNlIHdvcmtzIHRvb1xuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICApXG5cbiAgICAgICAgICAgIC8vLyBzZWNvbmQgVGlsZVxuICAgICAgICAgICAgbGV0IHQyOnRpbGVUeXBlLlRpbGUgPSBuZXcgdGhpcy50aWxlVHlwZSgpOyAgIC8vIFdvcmtzIGV2ZW4gaWYgVHlwZXNjcmlwdCBjb21wbGFpbnMgOikgeWF5IVxuICAgICAgICAgICAgdDIuc2V0UGFyZW50KHRoaXMuZG9tZSk7XG4gICAgICAgICAgICB0Mi5nZXRDb21wb25lbnQoVHJhbnNmb3JtKS5wb3NpdGlvbiA9IG5ldyBWZWN0b3IzKDIsMSwyKTtcbiAgICAgICAgICAgIHQyLmdldENvbXBvbmVudChNYXRlcmlhbCkuYWxiZWRvQ29sb3IgPSBDb2xvcjMuQmx1ZSgpXG5cbiAgICAgICAgICAgIC8vIHNldCBhIHNhbXBsZSBiZWhhdmlvciAtIHNpbXBseSBtb3ZlcyBvbiBjbGlja1xuICAgICAgICAgICAgdDIuYWRkQ29tcG9uZW50KFxuICAgICAgICAgICAgICAgIG5ldyBPbkNsaWNrKGUgPT4ge1xuICAgICAgICAgICAgICAgICAgICBsb2coZm4gKyBcIiAtIHRpbGUgY2xpY2tlZCBlOiBcIiArIGUpOyAvLyxlID0gdW5kZWZpbmVkXG4gICAgICAgICAgICAgICAgICAgIGxvZyhmbiArIFwiIC0gdGlsZSAxIGNsaWNrZWQgT2JqZWN0LktleXMoZSk6IFwiLCBPYmplY3Qua2V5cyhlKSk7XG4gICAgICAgICAgICAgICAgICAgIHQyLmdldENvbXBvbmVudChUcmFuc2Zvcm0pLnBvc2l0aW9uLmFkZEluUGxhY2UobmV3IFZlY3RvcjMoMCwxLDApKSAgIC8vIGFkZEluUGxhY2Ugd29ya3MgdG9vXG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIClcbiAgICAgICAgfVxuICAgICAgICAqL1xuXG59IiwiXG4vKipcbiAqIHNpbXBsZSBjdXN0b20gY29tcG9uZW50IHRvIGZsYWcgYW5kIGdyb3VwIHRvZ2V0aGVyIGEgc2VyaWVzIG9mIHRpbGVzIG9mIHRoZSBkb21lXG4gKi9cbkBDb21wb25lbnQgKCd0aWxlR3JvdXAnKVxuZXhwb3J0IGNsYXNzIFRpbGVHcm91cCB7XG4gICAgZ3JvdXBOOiBudW1iZXJcbiAgICBncm91cE5hbWU6IHN0cmluZ1xuICAgIGdyb3VwQ29sb3I6IENvbG9yMyAgLy8gY29uc2lkZXIgaWYgeW91IHdhbnQgdG8gc3RvcmUgdGhlIE1hdGVyaWFsIGluc3RlYWRcbiAgICBzcGlubmluZzogYm9vbGVhbiA9IHRydWVcbiAgICBjb25zdHJ1Y3Rvcihncm91cE46bnVtYmVyLCBncm91cE5hbWU/OnN0cmluZywgZ3JvdXBDb2xvcj86Q29sb3IzKSB7XG4gICAgICAgIHRoaXMuZ3JvdXBOID0gZ3JvdXBOO1xuICAgICAgICB0aGlzLmdyb3VwTmFtZSA9IGdyb3VwTmFtZTtcbiAgICAgICAgdGhpcy5ncm91cENvbG9yID0gZ3JvdXBDb2xvcjtcbiAgICB9XG59IiwiXG4vLyBUT0RPIC0gQlVHIHdoeSBpdCBkb2Vzbid0IHdvcmsgYW55bW9yZSB3aXRoIHRpbGVzIHRoYXQgaGF2ZSBzaXplIDEsMSAobGlrZSBQbGFuZVRpbGUpIC0gSSd2ZSBjaGVhdGVkIGFuZCBwdXQgdGhhdCBmYWtlIHNpemUgaW4gUGxhbmVUaWxlIHRvIG1ha2UgaXQgd29yayBcbi8vICAgICAgLy8gaXQncyBtYWlubHkgdGhlIHNpemUgdGhhdCBpcyBjYXVzaW5nIHByb2JsZW1zLi4uIHNtYWxsIHRpbGVTaXplIG51bWJlcnMgPCAxLjcgd2lsbCBjYXVzZSBpbmZpbml0eSBpbiBzb21lIGZyYWN0aW9ucyB0aGF0IHVzZSBpdFxuLy8gVE9ETyBjbGVhbiBhbGwgdGhlIGFsZ29yaXRobXMgYW5kIGNvbnZlcnQgdG8gYSBnZW9kZXNpYyBkb21lIHJhdGhlciB0aGFuIGhhY2tpbmcgdG9nZXRoZXIgYWxsIHRoZSBwb3NpdGlvbnMgb2YgdGhlIHRpbGVzIHdpdGggdGhlIGRvdWJsZSBmb3IgbG9vcFxuXG5pbXBvcnQgKiBhcyB0aWxlVHlwZSBmcm9tIFwiLi4vdGlsZXMvaW5kZXhcIlxuaW1wb3J0IHsgR2VuZXJhdG9yIH0gZnJvbSBcIi4vZ2VuZXJhdG9yXCI7XG5pbXBvcnQgeyBEQ0xVdGlscyB9IGZyb20gXCIuLi8uLi91dGlscy9kY2xVdGlsc1wiXG5pbXBvcnQgeyBUaWxlR3JvdXAgfSBmcm9tIFwiLi4vY3VzdG9tQ29wb25lbnRzXCJcbmltcG9ydCB7IGRlZmF1bHQgYXMgR3JvdXBzfSBmcm9tIFwiLi4vLi4vdXRpbHMvRW50aXR5R3JvdXBzXCJcbmltcG9ydCAqIGFzIHN5c3RlbXMgZnJvbSBcIi4uL3N5c3RlbXMvaW5kZXhcIjtcblxuY29uc3QgZm4gPSBcIkNpcmNsZXMxR2VuXCJcbi8vbG9nKGZuKVxuXG4vLyBHZW5lcmF0b3IgU2V0dGluZ3MgYXMgYSBzaW1wbGUgZWRpdGFibGUgb2JqZWN0XG5sZXQgUyA9IHtcbiAgICByYWRpdXM6IDIsICAgICAgICAgICAgICAgICAgICAgIC8vIGluaXRpYWwgcmFkaXVzIGluIG1cbiAgICB0aWxlRGlzdGFuY2U6IDAuNSwgICAgICAgICAgICAgIC8vIGNvbXBhY3RuZXNzIG9mIHRpbGVzICg8IDEgdGlsZXMgb3ZlcmxhcCwgPjEgdGlsZXMgYXJlIHNlcGFyYXRlZCBieSBzcGFjZSApXG4gICAgY2lyY2xlc0Rpc3RhbmNlOiAtMSwgICAgICAgICAgICAvLyBjb21wYWN0bmVzcyBvZiBlYWNoIGNpcmNsZSBvZiB0aWxlcyBpbiBtICggPCAwID0gb3ZlcmxhcCB0aGUgdGlsZXMpXG4gICAgZG9tZVJhZGl1c01heDogMTYsICAgICAgICAgICAgICAgLy8gbWF4aW11bSBSYWRpdXMgKGRpYW1ldGVyID0gMipyYWRpdXMpIG9mIHRoZSBkb21lXG4gICAgLy9jaXJjbGVzOiAzLCAgICAgICAgICAgICAgICAgICAgIC8vIG51bWJlciBvZiBjb25jZW50cmljIGNpcmNsZXNcblxuICAgIGhlaWdodE1heDogMTUsICAgICAgICAgICAgICAgICAgLy8gaGVpZ2hlc3QgcG9pbnQgb2YgdGhlIGRvbWVcbiAgICBoZWlnaHRNaW46IDMsICAgICAgICAgICAgICAgICAgIC8vIGxvd2VzdCBwb2ludCBvZiB0aGUgZG9tZVxuICAgIGhlaWdodE9mZnNldDogLTUsICAgICAgICAgICAgICAgLy8gaG9ycmlibGUgaGFjayB0byBsb3dlciB0aGUgd2hvbGUgZG9tZSAtIFRPRE8gY2hhbmdlIHRoZSBoZWlnaHQgYWxnb3JpdGhtXG4gICAgbG9va0F0Q2VudGVyOiBuZXcgVmVjdG9yMyAoMCwtMiwwKSwgICAgLy8gYWxsIHRpbGVzIGFyZSBjaGlsZHMgb2YgdGhlIGRvbWUgdGhhdCBpcyBtb3ZlZCBhdCB0aGUgY2VudGVyLi4udGhpcyBpcyBmb3Igc21vb3RoaW5nIHRoZSBkb21lIGN1cnZlIHNvIHRoYXQgdGlsZXMgbG9vayBiZWxvdyB0aGUgZ3JvdW5kXG5cbiAgICAvLyBTeXN0ZW0gcGFyYW1ldGVycyAgICAgICAgICAgIC8vZ29vIGNvbWJvcyAoZG9tZSwgdGlsZSk6ICg1LCA1MClcbiAgICByb3RTcGVlZERvbWU6IDUsICAgICAgICAgICAgICAgIC8vIHNwZWVkIG9mIHJvdGF0aW9uIG9mIHRoZSB3aG9sZSBkb21lXG4gICAgcm90U3BlZWRUaWxlOiA1MCwgICAgICAgICAgICAgICAvLyBzcGVlZCBvZiByb3RhdGlvbiBvZiBlYWNoIHNpbmdsZSB0aWxlXG4gICAgYWx0ZXJuYXRlUm90Q2lyY2xlczogdHJ1ZSwgICAgIC8vIHJvdGF0ZSBlYWNoIGNpcmNsZSBvZiB0aWxlcyBpbiBhIGRpZmZlcmVudCBkaXJlY3Rpb25cbiAgICBwcm94aW1pdHlTZW5zb3I6IGZhbHNlICAgICAgICAgIC8vICoqKioqIGVuYWJsZSB0aGF0IGVhY2ggdGlsZSByZXNwb25kcyB0byB1c2VyIHByZXNlbmNlICoqKioqIFVORklOSVNIRURcblxuXG4gICAgdGlsZVNjYWxlTWluOiAwLjIsICAgICAgICAgICAgICAvLyBUT0RPXG4gICAgdGlsZVNjYWxlTWF4OiAwLjUsICAgICAgICAgICAgICAvLyBUT0RPXG5cbiAgICAvLyB1c2VkIGJ5IEZpYm9cbiAgICAvL0c6IGdvbGRlblJhdGlvLCAgICAgICAgICAgICAgICAgLy8gR29sZGVuIFJhdGlvbiBcbiAgICAvL0dBOiAzNjAgLSAzNjAqZ29sZGVuUmF0aW8sICAgICAgLy8gR29sZGVyIEFuZ2xlIGluIGRlZ3JlZXMgKG5lZWRzIHRvIGJlIGFzc2lnbmVkIGxhdGVyIGFzIGl0IHJlcXVpcmVzIEcpXG4gICAgLy9yZ3Jvd3RoOiAxLjAwNSwgICAgICAgICAgICAgICAgIC8vIGZhY3RvciBieSB3aGljaCB0aGUgcmFkaXVzIHdpbGwgZ3JvdyB3aXRoIGVhY2ggaXRlcmF0aW9uXG4gICAgLy9tYXhUaWxlczogMzAgICAgICAgICAgICAgICAgICAgIC8vIE5yIG9mIGl0ZXJhdGlvbnMgPSBOciBvZiBUaWxlcyB0aGF0IHdpbGwgYmUgYXR0YWNoZWQgICAgICAgICAgICBcbn07XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIENpcmNsZXMxR2VuIGV4dGVuZHMgR2VuZXJhdG9yIHtcbiAgICAgICAgXG4gICAgICAgIHB1YmxpYyBjaXJjbGVzOiBudW1iZXIgICAgICAgICBcblxuICAgICAgICBjb25zdHJ1Y3RvcihhcmdzOiBhbnkpe1xuICAgICAgICAgICAgc3VwZXIoYXJncyk7XG4gICAgICAgICAgICB0aGlzLm5hbWUgPSBmbjtcbiAgICAgICAgICAgIGxvZyhmbiArIFwiLmNvbnN0cnVjdG9yXCIpXG4gICAgICAgIH1cblxuXG4gICAgICAgIHB1YmxpYyBnZW5lcmF0ZUN1cnZlKHRpbGVPYmo6dGlsZVR5cGUuVGlsZSkge1xuICAgICAgICAgICAgdGhpcy50aWxlVHlwZSA9IHRpbGVPYmo7XG4gICAgICAgICAgICBsb2coZm4gKyBcIi5nZW5lcmF0ZUN1cnZlIHdpdGggdGlsZU9iajogXCIsIHRpbGVPYmopXG5cbiAgICAgICAgICAgIC8vIEkgbmVlZCBhbiBpbnN0YW5jZSBvZiBhIHRpbGUgdG8gZ2V0IGl0J3Mgc2l6ZVxuICAgICAgICAgICAgLy8gYnV0IGltbWVkaWF0ZWxleSBkZWxldGUgaXQgc2luY2UgeW91IGRvbid0IG5lZWQgaXQgYW55bW9yZSBcbiAgICAgICAgICAgIGxldCB0MCA9IG5ldyB0aWxlT2JqKCk7XG4gICAgICAgICAgICBsZXQgdGlsZVNpemUgPSB0MC5zaXplXG4gICAgICAgICAgICBlbmdpbmUucmVtb3ZlRW50aXR5ICh0MClcbiAgICAgICAgICAgIGxvZyhmbiArIFwiLmdlbmVyYXRlQ3VydmUgdGlsZVNpemU6IFwiLCB0aWxlU2l6ZSlcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy9WMSAtIHNldCB0aGUgbnVtYmVyIG9mIGNpcmNsZXMgdnMgc2V0dGluZyBkb21lUmFkaXVzIGFuZCBkaXZpbmcgYnkgdGhlIHdpZHRoIGFuZCBkaXN0YW5jZVxuICAgICAgICAgICAgLy8gQWNodHVuZyB0aGVyZSBpcyBhIGNvbmRpdGlvbiB3aGVuIHRpbGVTaXplLndpZHRoICg9IDEpICsgUy5jaXJjbGVzRGlzdGFuY2UgKC0xKSB0aGF0IChjaXJjbGVzIC8gMCkgd2lsbCBiZSBpbmZpbml0eVxuICAgICAgICAgICAgbGV0IGNpcmNsZUxlbmd0aCA9ICh0aWxlU2l6ZS53aWR0aCArIFMuY2lyY2xlc0Rpc3RhbmNlKVxuICAgICAgICAgICAgaWYgKGNpcmNsZUxlbmd0aCA9PSAwKSBjaXJjbGVMZW5ndGggPSB0aWxlU2l6ZS53aWR0aCArICgwLjEgKiBTLmNpcmNsZXNEaXN0YW5jZSkgICAgLy8gc29sdmUgaW5maW5pdHlcbiAgICAgICAgICAgIGxldCBjaXJjbGVzID0gTWF0aC5yb3VuZChTLmRvbWVSYWRpdXNNYXggLyBjaXJjbGVMZW5ndGgpLy8odGlsZVNpemUud2lkdGggKyBTLmNpcmNsZXNEaXN0YW5jZSlcbiAgICAgICAgICAgIHRoaXMuY2lyY2xlcyA9IGNpcmNsZXM7XG4gICAgICAgICAgICBsb2coZm4gKyBcIi5nZW5lcmF0ZUN1cnZlIGNpcmNsZXMgaW4gZG9tZSA6XCIgKyBjaXJjbGVzKVxuXG4gICAgICAgICAgICBsZXQgcmFkaXVzID0gUy5yYWRpdXMgfHwgdGhpcy5zZXR0aW5ncy5yYWRpdXMgLy8gc3RhcnRpbmcgcmFkaXVzIG9mIHRoZSBjaXJjbGUgaW4gbVxuICAgICAgICAgICAgbGV0IHN0YXJ0UmFkaXVzID0gcmFkaXVzO1xuICAgICAgICAgICAgbGV0IGNlbnRlciA9IERDTFV0aWxzLmdldFBhcmNlbENlbnRlcigpO1xuICAgICAgICAgICAgbGV0IGFuZ2xlSW5jLCBjaXJjbGVIO1xuICAgICAgICAgICAgbGV0IGxhc3RUaWxlICAvLyBob3JyaWJsZSBoYWNrIHRvIGdldCB0aGUgbGFzdCBjaGlsZHJlbidzIGhlaWdodFxuXG4gICAgICAgIFxuICAgICAgICAgICAgLy9sb29wIHRocm91Z2ggdGhlIGNpcmNsZXNcbiAgICAgICAgICAgIGZvciAobGV0IGM9MDsgYzwgY2lyY2xlczsgYysrKSB7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLyAgICBUSUxFIFBPU0lUSU9OU1xuXG4gICAgICAgICAgICAgICAgLy8gVE9ETyB1c2UgdGhlIEFuZ2xlIGNsYXNzIGh0dHBzOi8vZ2l0aHViLmNvbS9kZWNlbnRyYWxhbmQvZWNzLXJlZmVyZW5jZS9ibG9iL21hc3Rlci9kb2NzLWxhdGVzdC9kZWNlbnRyYWxhbmQtZWNzLmFuZ2xlLm1kXG4gICAgICAgICAgICAgICAgLy9BbmdsZS5Gcm9tRGVncmVlcyhkZWdyZWVzSGVyZSkucmFkaWFucygpXG4gICAgICAgICAgICAgICAgLy9BbmdsZS5Gcm9tUmFkaWFucyhyYWRpYW5zSGVyZSkuZGVncmVlcygpXG5cbiAgICAgICAgICAgICAgICAvLyBmaW5kaW5nIHRoZSBhbmdsZSBpbmNyZW1lbnQgdGhhdCB3aWxsIHB1dCBlYWNoIHRpbGUgc2lkZSBieSBzaWRlIHdpdGhvdXQgc3BhY2luZyBiZXR3ZWVuIHRoZW0gbm9yIG92ZXJsYXBcbiAgICAgICAgICAgICAgICAvLyB0aGlzIHdvcmtzIGZvciByb3VuZCB0aWxlcyBhcyBJJ20gYXNzdW1pbmcgdGhhdCB0aGUgZGlzdGFuY2UgYmV0d2VlbiB0aGUgY2VudGVyIG9mIDIgdGlsZXMgaXMgdGlsZVNpemUud2lkdGhcbiAgICAgICAgICAgICAgICAvLyBpdCBtaWdodCBub3Qgd29yayBmb3Igb3RoZXIgdGlsZXMgc2l6ZXMsIGJ1dCBpdCdzIGEgd29ya2FibGUgYXBwcm94aW1hdGlvblxuICAgICAgICAgICAgICAgIC8vIHRoaXMgZGlzdGFuY2Ugb24gdGhlIGNpcmNsZSwgY3JlYXRlcyBhbiBpc29zY2VsZXMgdHJpYW5nbGUgYmVjYXVzZSB0d28gc2lkZXMgYXJlIHRoZSByYWRpdXMsIFxuICAgICAgICAgICAgICAgIC8vIGFuZCB0aGUgYW5nbGUgYmV0d2VlbiB0aGVtIGNhbiBiZSBzb2x2ZWQgd2l0aCB0aGUgY29zaW5lIGZvcm11bGEgaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvTGF3X29mX2Nvc2luZXMgXG4gICAgICAgICAgICAgICAgLy8gc29sdmluZyBmb3IgdGhlIGFuZ2xlIGFscGhhIGFzIGhlcmUgaHR0cHM6Ly9tYXRoLnN0YWNrZXhjaGFuZ2UuY29tL3F1ZXN0aW9ucy8xODU4MjkvaG93LWRvLXlvdS1maW5kLWFuLWFuZ2xlLWJldHdlZW4tdHdvLXBvaW50cy1vbi10aGUtZWRnZS1vZi1hLWNpcmNsZVxuICAgICAgICAgICAgICAgIGxldCBkaXN0YW5jZSA9IHRpbGVTaXplLndpZHRoICsgKHRpbGVTaXplLndpZHRoICogKFMudGlsZURpc3RhbmNlLzIpIClcbiAgICAgICAgICAgICAgICBsZXQgZGlzdGFuY2UyID0gTWF0aC5wb3coZGlzdGFuY2UsIDIpXG4gICAgICAgICAgICAgICAgLy9yYWRpdXMgPSBzdGFydFJhZGl1cyArICgodGlsZVNpemUud2lkdGggKyBTLmNpcmNsZXNEaXN0YW5jZSkgKiBjKSAgICAgLy8gYWRhcHQgdGhlIHJhZGl1cyB0byB0aGUgZ2l2ZW4gY2lyY2xlXG4gICAgICAgICAgICAgICAgcmFkaXVzID0gc3RhcnRSYWRpdXMgKyAoY2lyY2xlTGVuZ3RoICogYylcblxuICAgICAgICAgICAgICAgIGxldCByMiA9IE1hdGgucG93KDIqcmFkaXVzLCAyKSAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGFuZ2xlSW5jID0gTWF0aC5hY29zKCAocjIgLSBkaXN0YW5jZTIpIC8gcjIgKSAgICAgICAgICAgIC8vIHRoZSBmaXJzdCBhbmdsZUluYyBpcyBpZGVhbCBidXQgd2Ugd2FudCBhbiBpbnQgbnVtYmVyIG9mIHRpbGVzIGluIGEgY2lyY2xlLCBub3QgYSBmbG9hdFxuICAgICAgICAgICAgICAgIGxldCB0aWxlc1BlckNpcmNsZSA9IE1hdGguY2VpbCgoMipNYXRoLlBJKS9hbmdsZUluYykgICAgIC8vIHJvdW5kIHRvIGEgZnVsbCBudW1iZXIgb2YgdGlsZSBwZXIgY2lyY2xlXG4gICAgICAgICAgICAgICAgYW5nbGVJbmMgPSAoMipNYXRoLlBJKS90aWxlc1BlckNpcmNsZTsgICAgICAgICAgICAgICAgICAgLy8gbm93IGZpbmQgdGhlIGFuZ2xlSW5jIHRvIHJvdW5kZWQgbnVtYmVyIG9mIGRvdHMgcGVyIGNpcmNsZVxuICAgICAgICAgICAgICAgIGxvZyhcIlxcblxcblxcblwiKyBmbiArIFwiLmdlbmVyYXRlQ3VydmUgQ2lyY2xlOiBcIiArIGMgKyBcIiB3aXRoIFJhZGl1czogXCIgKyByYWRpdXMgKyBcIiAtIHRpbGUgZGlzdGFuY2U6IFwiICsgZGlzdGFuY2UpXG4gICAgICAgICAgICAgICAgbG9nKGZuICsgXCIuZ2VuZXJhdGVDdXJ2ZSBDaXJjbGU6IFwiICsgYyArIFwiICAtIGFuZ2xlSW5jIDE6IFwiICsgYW5nbGVJbmMgKyBcIiAtICB0aWxlc1BlckNpcmNsZTogXCIgKyB0aWxlc1BlckNpcmNsZSlcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAvLyBjaXJjbGUgaGVpZ2h0IFRPRE8gRklOSVNIIGFuZCBjbGVhbiB0aGUgYWxnb3JpdGhtIChtYXliZSBldmVuIGNoYW5naW5nIHggYW5kIHogb2YgYSBzcGhlcmUgcmF0aGVyIHRoYW4gY2FsY3VsYXRpbmcgY2lyY2xlcyBhbmQgaGVpZ2h0cylcbiAgICAgICAgICAgICAgICAvL2xldCBoZWlnaHRSYW5nZSA9IChTLmhlaWdodE1heCAtIFMuaGVpZ2h0TWluKSAgICAgICAgICAgLy8gMTUtMyA9IDEyXG4gICAgICAgICAgICAgICAgLy9jaXJjbGVIID0gMTUgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBWMSAtIGZpeGVkIGhlaWdodFxuICAgICAgICAgICAgICAgIC8vY2lyY2xlSCA9IFMuaGVpZ2h0TWF4IC0gKChoZWlnaHRSYW5nZSAvIGNpcmNsZXMpICogYykgLy8gVjIgLSB0aGlzIGNyZWF0ZXMgYSBsaW5lYXIgaGVpZ2h0IHZhcmlhdGlvbiAtIG5vdCByaWdodFxuICAgICAgICAgICAgICAgIC8vY2lyY2xlSCA9IE1hdGguc3FydCggTWF0aC5wb3coUy5kb21lUmFkaXVzTWF4ICsgUy5oZWlnaHRNaW4sIDIpIC0gTWF0aC5wb3cocmFkaXVzLCAyKSApIC0gUy5oZWlnaHRNaW4gLy8gVjMgICBpZiB5b3UgcHV0IC04IHBvc2l0aW9ucyBpdCB0byB6ZXJvID4+IG1ha2UgaXQgZGVwZW5kZW50IG9uIENcbiAgICAgICAgICAgICAgICBjaXJjbGVIID0gTWF0aC5zcXJ0KCBNYXRoLnBvdyhTLmRvbWVSYWRpdXNNYXggKyBTLmhlaWdodE1pbiwgMikgLSBNYXRoLnBvdyhyYWRpdXMsIDIpICkgKyBTLmhlaWdodE9mZnNldCAgLy9WNCB3b3JrcyB3aXRoIGEgaGFja1xuICAgICAgICAgICAgICAgIFxuXG4gICAgICAgICAgICAgICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLyAgIE1BVEVSSUFMIFxuXG4gICAgICAgICAgICAgICAgLy8gdW5maW5pc2hlZCBtYXRlcmlhbCBleHBsb3JhdGlvblxuICAgICAgICAgICAgICAgIC8vIGNpcmNsZSBjb2xvciAtIGdyYWRpZW50IGZyb20gaW5uZXIgY2lyY2xlIHRvIGJvdHRvbSBjaXJjbGVcbiAgICAgICAgICAgICAgICBjb25zdCBncmFkaWVudCA9IHRoaXMuc2V0dGluZ3MuZGNsQ29sb3JzLmdyYWRpZW50cy5yZWRUb1llbGxvd1xuICAgICAgICAgICAgICAgIGxldCBjaXJjbGVQZXJjZW50YWdlID0gYyAvIGNpcmNsZXNcbiAgICAgICAgICAgICAgICBsZXQgY2lyY2xlQ29sb3IgPSBDb2xvcjMuTGVycCggQ29sb3IzLkZyb21IZXhTdHJpbmcoZ3JhZGllbnRbMF0pLCBDb2xvcjMuRnJvbUhleFN0cmluZyhncmFkaWVudFsxXSksIGNpcmNsZVBlcmNlbnRhZ2UpO1xuICAgICAgICAgICAgICAgIC8vbGV0IGNpcmNsZUNvbG9yID0gQ29sb3IzLkZyb21IZXhTdHJpbmcodGhpcy5zZXR0aW5ncy5kY2xDb2xvcnMucmVkKVxuICAgICAgICAgICAgICAgIGxvZyhmbiArIFwiLmdlbmVyYXRlQ3VydmUgQ2lyY2xlOiBcIiArIGMgKyBcIi9cIiArIGNpcmNsZXMgKyBcIiA9IGNpcmNsZVBlcmNlbnRhZ2U6IFwiICsgY2lyY2xlUGVyY2VudGFnZSArIFwiIC0gY2lyY2xlQ29sb3I6IFwiICsgY2lyY2xlQ29sb3IpXG5cbiAgICAgICAgICAgICAgICAvLyBhc3NpZ24gYSBjb21tb25nIG1hdGVyaWFsIHRvIGFsbCB0aWxlcyBpbiBhIGNpcmNsZSBzbyB0aGF0IHlvdSBkb24ndCBleGNlZWQgdGhlIGxpbWl0c1xuICAgICAgICAgICAgICAgIGxldCBjaXJjbGVNYXRlcmlhbCA9IG5ldyBNYXRlcmlhbCgpO1xuICAgICAgICAgICAgICAgIGNpcmNsZU1hdGVyaWFsLmFsYmVkb0NvbG9yID0gY2lyY2xlQ29sb3JcbiAgICAgICAgICAgICAgICBjaXJjbGVNYXRlcmlhbC5tZXRhbGxpYyA9IDE7XG4gICAgICAgICAgICAgICAgY2lyY2xlTWF0ZXJpYWwuYW1iaWVudENvbG9yID0gQ29sb3IzLkZyb21IZXhTdHJpbmcoIHRoaXMuc2V0dGluZ3MuZGNsQ29sb3JzLnllbGxvd1N1biApXG4gICAgICAgICAgICAgICAgLy9jaXJjbGVNYXRlcmlhbC5kaXJlY3RJbnRlbnNpdHkgPSAxIC8vZGVmYXVsdCAxXG4gICAgICAgICAgICAgICAgLy9jaXJjbGVNYXRlcmlhbC5kaXNhYmxlTGlnaHRpbmcgPSB0cnVlO1xuICAgICAgICAgICAgICAgIGNpcmNsZU1hdGVyaWFsLmVudmlyb25tZW50SW50ZW5zaXR5ID0gMC41XG5cbiAgICAgICAgICAgICAgICBjaXJjbGVNYXRlcmlhbC5lbWlzc2l2ZUNvbG9yID0gQ29sb3IzLkZyb21IZXhTdHJpbmcoIHRoaXMuc2V0dGluZ3MuZGNsQ29sb3JzLnllbGxvd1N1biApICAgIC8vIG5vdCB2ZXJ5IGVtaXNzaXZlXG4gICAgICAgICAgICAgICAgY2lyY2xlTWF0ZXJpYWwuZW1pc3NpdmVJbnRlbnNpdHkgPSAwLjEgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBub3QgdmVyeSBlbWlzc2l2ZVxuICAgICAgICAgICAgICAgIC8vY2lyY2xlTWF0ZXJpYWwuZW1pc3NpdmVUZXh0dXJlID0gbmV3IFRleHR1cmUoXCJtYXRlcmlhbHMvZGNsX2xvZ28uc3ZnXCIpICAvL2RvZXNuwrR0IHdvcmtcbiAgICAgICAgICAgICAgICAvL2NpcmNsZU1hdGVyaWFsLmFscGhhID0gMC41O1xuICAgICAgICAgICAgICAgIC8vY29uc3QgbG9nb1RleHR1cmUgPSBuZXcgVGV4dHVyZShcIm1hdGVyaWFscy9kY2xfbG9nby5zdmdcIilcbiAgICAgICAgICAgICAgICAvL2NpcmNsZU1hdGVyaWFsLmFsYmVkb1RleHR1cmUgPSBsb2dvVGV4dHVyZVxuICAgICAgICAgICAgICAgIFxuXG5cbiAgICAgICAgICAgICAgICAvLyBsb29wIHRocm91Z2ggYWxsIHRoZSBhbmdsZXMgZm9yIHRoaXMgY2lyY2xlIGFuZCBwb3NpdGlvbiB0aGUgdGlsZXNcbiAgICAgICAgICAgICAgICB2YXIgYSA9IDBcbiAgICAgICAgICAgICAgICB2YXIgY291bnQgPSAxXG4gICAgICAgICAgICAgICAgLy93aGlsZSAoYSA8IDIqTWF0aC5QSSkgeyAgICAgICAvLy8gdGhpcyB3b3JrcyB0byBjbGVhcmx5IHNlcGFyYXRlIHRoZSBhbmdsZXNcbiAgICAgICAgICAgICAgICAgd2hpbGUgKGNvdW50IDw9IHRpbGVzUGVyQ2lyY2xlKSB7ICAgXG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAvL2xvZyAoXCJcXG5cXG5cIiArIGZuICsgXCJnZW5lcmF0ZUN1cnZlIGE6IFwiICsgYSlcbiAgICAgICAgICAgICAgICAgICAgbGV0IHggPSAoTWF0aC5jb3MoYSkgKiByYWRpdXMpIC8vICsgY2VudGVyLnggIC8vIG9mZnNldCB0byBjZW50ZXIgbm90IG5lZWRlZCBiZWNhdXNlIEkgbW92ZWQgZG9tZVxuICAgICAgICAgICAgICAgICAgICBsZXQgeiA9IChNYXRoLnNpbihhKSAqIHJhZGl1cykgLy8gKyBjZW50ZXIuelxuICAgICAgICAgICAgICAgICAgICBsZXQgeSA9IGNpcmNsZUggICAgICAgICAgICAgICAgLy8gYWxsIHRpbGVzIGluc2lkZSBvZiBhIGNpcmNsZSB3aWxsIGhhdmUgdGhlIHNhbWUgaGVpZ2h0ICAgICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICBsZXQgY291bnRTdHIgPSBcInRpbGVfY1wiKyBjICsgXCJfXCIgK2NvdW50LnRvU3RyaW5nKClcbiAgICAgICAgICAgICAgICAgICAgbGV0IHQgPSBuZXcgdGlsZU9iaihjb3VudFN0cik7IC8vQkIgPDwgbWF5YmUgdGhpcyBpcyB0aGUgb25lIHRoYXQgaXMgZ2VuZXJhdGluZyBhbHdheXMgdGhlIHNhbWU/XG4gICAgICAgICAgICAgICAgICAgIC8vbGV0IHQgPSBuZXcgdGhpcy50aWxlVHlwZShjb3VudFN0cik7XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICBsZXQgdHQgPSB0LmdldENvbXBvbmVudChUcmFuc2Zvcm0pXG4gICAgICAgICAgICAgICAgICAgIHR0LnBvc2l0aW9uID0gbmV3IFZlY3RvcjMoeCx5LHopXG5cbiAgICAgICAgICAgICAgICAgICAgLy8gdGhlIHRhcmdldCBwb3NpdGlvbiBpcyBub3QgdGhlIGNlbnRlciBvZiB0aGUgcGFyY2VsIG9ubHkgYmVjYXVzZSBldmVyeSB0aWxlIGlzIGEgY2hpbGRyZW4gb2YgdGhlIGRvbWUgRW50aXR5XG4gICAgICAgICAgICAgICAgICAgIC8vIHRoYXQgaGFzIGJlZW4gbW92ZWQgdG8gdGhlIGNlbnRlci4gVE9ETyAtIGZpbmQgYSB1bml2ZXJzYWwgd2F5IHRvIGRvIGxvY2FsVG9HbG9iYWwgYW5kIEdsb2JhbFRvTG9jYWxcbiAgICAgICAgICAgICAgICAgICAgbGV0IHRhcmdldFBvcyA9IFMubG9va0F0Q2VudGVyIHx8IG5ldyBWZWN0b3IzKDAsMCwwKSAgIC8vIERDTFV0aWxzLmdldFBhcmNlbENlbnRlcigpXG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAvLyBmYWNlIHRoZSBsb3dlciBzaWRlIHRvIHRoZSB0YXJnZXQgKGNlbnRlciBvZiB0aGUgc2NlbmUpXG4gICAgICAgICAgICAgICAgICAgIC8vIEludGVyd2VhdmVyIHNvbHV0aW9uIC0gaWYgeW91IG9ubHkgdXNlIGxvb2tBdCBpdCB3aWxsIGFsd2F5cyBwb2ludCB0aGUgbWFpbiBmb3J3YXJkIHZlY3RvciB0byB0aGUgdGFyZ2V0ICh0aGUgc2lkZSBvZiB0aGUgY3lsaW5kZXIgb3IgdGlsZSlcbiAgICAgICAgICAgICAgICAgICAgLy8gaW4gb3JkZXIgdG8gcG9pbnQgdGhlIGxvd2VyIGZhY2Ugb2YgdGhlIHRpbGUsIHlvdSBuZWVkIHRvIGFsc28gcm90YXRlIHRoZSBtYWluIGZhY2UgKGluIHRoaXMgY2FzZSA5MCBkZWdyZWVzIGFyb3VuZCBlaXRoZXIgdGhlIFggYXhpcylcbiAgICAgICAgICAgICAgICAgICAgLy8gYnV0IHlvdSBuZWVkIHRvIGRvIGl0IGFmdGVyIHRoZSBsb29rQXQgdHJhbnNmb3JtYXRpb24gQU5EIEFERElORyB0byBpdC4uLm5vdCBzdWJzdGl0dXRpbmcgaXRcbiAgICAgICAgICAgICAgICAgICAgLy8gaWYgeW91IHVzZSByb3RhdGlvbi5zZXRFdWxlciBpdCB3b24ndCB3b3JrIGJlY2F1c2UgYXMgSW50ZXJ3ZWF2ZXIgdG91Z2h0IG1lXG4gICAgICAgICAgICAgICAgICAgIC8vICBgc2V0RXVsZXJgIGFuZCBgbG9va0F0YCBhcmUgYm90aCAnb3ZlcndyaXRlJyBmdW5jdGlvbnMgdGhhdCBpZ25vcmUgd2hhdGV2ZXIncyBpbiB0aGVyZSBhbHJlYWR5LlxuICAgICAgICAgICAgICAgICAgICB0dC5sb29rQXQoIHRhcmdldFBvcywgVmVjdG9yMy5VcCgpKTtcbiAgICAgICAgICAgICAgICAgICAgdHQucm90YXRpb24gPSB0dC5yb3RhdGlvbi5tdWx0aXBseShRdWF0ZXJuaW9uLkV1bGVyKDkwLCAwLCAwKSk7XG5cbiAgICAgICAgICAgICAgICAgICAgLy8gYXNzaWduIG9uZSB1bmlxdWUgbWF0ZXJpYWwgcGVyIGNpcmNsZSBpbiBvcmRlciB0byBzYXZlIHNwYWNlID4gb3RoZXJ3aXNlIEkgZ2V0IFwiVW5sb2FkaW5nIHNjZW5lIGF0IDAsMCBkdWUgdG8gZXhjZWVkZWQgbGltaXRzXCIgPj4gIGh0dHBzOi8vZG9jcy5kZWNlbnRyYWxhbmQub3JnL2RldmVsb3BtZW50LWd1aWRlL21hdGVyaWFscy8jcmV1c2UtbWF0ZXJpYWxzXG4gICAgICAgICAgICAgICAgICAgIHQuYWRkQ29tcG9uZW50KGNpcmNsZU1hdGVyaWFsKSBcblxuICAgICAgICAgICAgICAgICAgICAvLyBhZGQgY3VzdG9tQ29tcG9uZW50IHRvIGdyb3VwIHRoZW0gYnkgY2lyY2xlXG4gICAgICAgICAgICAgICAgICAgIHQuYWRkQ29tcG9uZW50KG5ldyBUaWxlR3JvdXAoYywgXCJjaXJjbGVfXCIrYywgY2lyY2xlTWF0ZXJpYWwuYWxiZWRvQ29sb3IpIClcblxuICAgICAgICAgICAgICAgICAgICAvKiB1c2VmdWwgZm9yIGRlYnVnZ2luZyAtIGNsaWNrIG9uIGEgdGlsZSB0byBtb3ZlIGl0IGFuZCBzZWUgaWYgdGhlcmUgYXJlIG90aGVycyB1bmRlbmVhdGggaXRcbiAgICAgICAgICAgICAgICAgICAgdC5hZGRDb21wb25lbnQoXG4gICAgICAgICAgICAgICAgICAgICAgICBuZXcgT25DbGljayhlID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZW50ID0gdGhpcy5kb21lLmNoaWxkcmVuW2UuZW50aXR5SWRdXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9nKFwiVGlsZSBjbGlja2VkIGVudGl0eSBuYW1lOiBcIiArIGVudC5uYW1lICsgXCIgLSBwb3NpdGlvbjogXCIsIGVudC5nZXRDb21wb25lbnQoVHJhbnNmb3JtKS5wb3NpdGlvbiApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vY29uc29sZS5sb2coXCJUaWxlIGNsaWNrZWQgZTogXCIsIGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHQuZ2V0Q29tcG9uZW50KFRyYW5zZm9ybSkucG9zaXRpb24uYWRkSW5QbGFjZShuZXcgVmVjdG9yMygxLDAsIDEpKSBcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIC8vIHNldCBpdCB0byBhIGNoaWxkIG9mIHRoZSBkb21lXG4gICAgICAgICAgICAgICAgICAgIHQuc2V0UGFyZW50KHRoaXMuZG9tZSk7XG4gICAgICAgICAgICAgICAgICAgIC8vZW5naW5lLmFkZEVudGl0eSh0KTsgLy8gdGhpcyBhdXRvbWF0aWNhbGx5IGRvbmUgYnkgdGhlIG5ldyB0aWxlT2JqKClcblxuICAgICAgICAgICAgICAgICAgICAvLyBkb25lIC0gaW5jcmVtZW50IGFuZ2xlIGZvciB0aGUgbmV4dCByb3VuZCBhbmQgdGlsZVxuICAgICAgICAgICAgICAgICAgICBhICs9IGFuZ2xlSW5jIFxuICAgICAgICAgICAgICAgICAgICAvL2xvZyhmbiArIFwiLmdlbmVyYXRlQ3VydmUgYW5nbGU6XCIgKyBhICtcIiAtIHg6IFwiICsgeCArIFwiIC0gejogXCIgKyB6ICk7XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICBjb3VudCsrXG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgLy8gZmluaXNoZWQgY3JlYXRpbmcgb25lIG9mIHRoZSBjaXJjbGVzIC0gYWRkIHRoZXNlIHRpbGVzIHRvIGEgZ3JvdXBcbiAgICAgICAgICAgICAgICAvLyBJIG5lZWQgYSBjdXN0b20gZHluYW1pYyBncm91cCBjbGFzcyBiZWNhdXNlIHRoZSBjdXJyZW50IG1ldGhvZHMgZG9uJ3QgYWxsb3cgbWUgdG8gY3JlYXRlIGEgZ3JvdXAgZm9yIGNvbXBvbmVudHMgd2hvc2UgdGlsZUdyb3VwLmdyb3VwTiA9PSAwIChvciAxLCBvciB0aGUgY2lyY2xlTnVtYmVyKVxuICAgICAgICAgICAgICAgIC8vIGdldENvbXBvbmVudEdyb3VwIGh0dHBzOi8vZ2l0aHViLmNvbS9kZWNlbnRyYWxhbmQvZWNzLXJlZmVyZW5jZS9ibG9iL21hc3Rlci9kb2NzLWxhdGVzdC9kZWNlbnRyYWxhbmQtZWNzLmVuZ2luZS5nZXRjb21wb25lbnRncm91cC5tZFxuICAgICAgICAgICAgICAgIC8vIGdldEVudGl0aWVzV2l0aENvbXBvbmVudCAvL2h0dHBzOi8vZ2l0aHViLmNvbS9kZWNlbnRyYWxhbmQvZWNzLXJlZmVyZW5jZS9ibG9iL21hc3Rlci9kb2NzLWxhdGVzdC9kZWNlbnRyYWxhbmQtZWNzLmVuZ2luZS5nZXRlbnRpdGllc3dpdGhjb21wb25lbnQubWRcbiAgICAgICAgICAgICAgICAvL3RoaXMuZ3JvdXBzW1wiY2lyY2xlX1wiICsgY10gPSBlbmdpbmUuZ2V0RW50aXRpZXNXaXRoQ29tcG9uZW50KFwiVGlsZUdyb3VwLmdyb3VwTlwiKSBcbiAgICAgICAgICAgICAgICBsZXQgZ3JvdXBOYW1lID0gXCJncm91cFwiK2NcbiAgICAgICAgICAgICAgICB0aGlzLmdyb3Vwc1tncm91cE5hbWVdID0gR3JvdXBzLmNyZWF0ZUdyb3VwV2l0aENvbXBvbmVudHNBbmRDb25kaXRpb24oXCJ0aWxlR3JvdXBcIiwgXCJncm91cE5cIiwgXCI9PVwiK2MsIGdyb3VwTmFtZSApXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIGRvbmUgY3JlYXRpbmcgYWxsIHRpbGVzLCBjcmVhdGUgYSBncm91cCB3aXRoIEFMTCB0aWxlc1xuICAgICAgICAgICAgdGhpcy5ncm91cHNbXCJhbGxUaWxlc1wiXSA9IGVuZ2luZS5nZXRDb21wb25lbnRHcm91cChUaWxlR3JvdXApO1xuXG4gICAgICAgICAgICBsb2coZm4gKyBcIi5nZW5lcmF0ZUN1cnZlIC0gRE9ORSBHRU5FUkFUSU5HIENVUlZFIHRoaXMuZG9tZTogXCIsIHRoaXMuZG9tZS5jaGlsZHJlbik7XG4gICAgICAgICAgICBsb2coZm4gKyBcIi5nZW5lcmF0ZUN1cnZlIHRoaXMuZ3JvdXBzOiBcIiwgdGhpcy5ncm91cHMpXG4gICAgICAgICAgICB0aGlzLmFkZFN5c3RlbXMoKVxuICAgICAgICAgICAgXG4gICAgICAgIH1cblxuXG4gICAgICAgIC8vVE9ETyBmaW5kIGEgd2F5IHRvIGRvIHRoaXMgZHluYW1pY2FsbHkgYW5kIGFjdGl2YXRlIG9yIGRpc2FibGUgY2VydGFpbiBzeXN0ZW1zIHRocm91Z2ggdGhlIHNldHRpbmdzXG4gICAgICAgIHB1YmxpYyBhZGRTeXN0ZW1zKCkge1xuICAgICAgICAgICAgbG9nKGZuICsgXCIuYWRkU3lzdGVtcyBnZW5lcmF0b3JTZXR0aW5nczogXCIsIFMpIFxuICAgICAgICAgICAgbG9nKGZuICsgXCIuYWRkU3lzdGVtcyBkb21lU2V0dGluZ3M6IFwiLCB0aGlzLmRvbWUpXG4gICAgICAgICAgICBsb2coZm4gKyBcIi5hZGRTeXN0ZW1zIHBhcmFtcyByb3RTcGVlZERvbWU6IFwiICsgUy5yb3RTcGVlZERvbWUgKyBcIiBcXHQgLSByb3RTcGVlZFRpbGU6IFwiICsgUy5yb3RTcGVlZFRpbGUpXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIHJvdGF0ZSB0aGUgd2hvbGUgZG9tZSBzdXBlciBzbG93IFMucm90U3BlZWREb21lXG4gICAgICAgICAgICBpZiAoUy5yb3RTcGVlZERvbWUgPiAwICkge1xuICAgICAgICAgICAgICAgIGVuZ2luZS5hZGRTeXN0ZW0gKCBuZXcgc3lzdGVtcy5Hcm91cFJvdGF0b3IoIHRoaXMuZG9tZSAsIGZhbHNlLCBTLnJvdFNwZWVkRG9tZSAsIFZlY3RvcjMuVXAoKSkgKVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyogZXhwZXJpbWVudCByb3RhdGUgZWFjaCBjaXJjbGUgaW4gZGlmZmVyZW50IGRpcmVjdGlvbnNcbiAgICAgICAgICAgIGlmIChTLmFsdGVybmF0ZVJvdENpcmNsZXMgPT0gdHJ1ZSkge1xuICAgICAgICAgICAgICAgICAgICBsZXQgZGlyOmJvb2xlYW4gPSBmYWxzZVxuICAgICAgICAgICAgICAgIGZvciAobGV0IGMgPSAwOyBjIDwgdGhpcy5jaXJjbGVzOyBjKysgKSB7XG4gICAgICAgICAgICAgICAgICAgIGxldCBnID0gXCJncm91cFwiK2MgICAgICAgLy91c2UgdGhlIGdyb3VwIE5hbWUgcmF0aGVyIHRoYW4gdGhlIGdyb3VwIG9iamVjdCAgICAgLy90aGlzLmdyb3Vwc1tcImdyb3VwXCIrY107XG4gICAgICAgICAgICAgICAgICAgIGRpciA9ICFkaXIgICAgICAgICAgICAgIC8vYXQgZWFjaCBjaXJjbGUgcm90YXRlIGluIGEgZGlmZmVyZW50IGRpcmVjdGlvblxuICAgICAgICAgICAgICAgICAgICBsZXQgcHJpb3JpdHkgPSAxICogYztcbiAgICAgICAgICAgICAgICAgICAgZW5naW5lLmFkZFN5c3RlbSAoIG5ldyBzeXN0ZW1zLkdyb3VwUm90YXRvciggZywgZGlyLCBTLnJvdFNwZWVkVGlsZSwgbmV3IFZlY3RvcjMoMSwwLDEpKSwgICkgLy9WZWN0b3IzLkZvcndhcmQoKSApICkgLy8gdGhpcyB3b3JrcyB0byBmbGlwIGFsbCB0aWxlcyAgXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBUT0RPIC0gSW50ZXJhY3RpdmUgU3lzdGVtIDogZm9sbG93IHRoZSBjYW1lcmFcbiAgICAgICAgICAgIGlmIChTLnByb3hpbWl0eVNlbnNvcikge1xuICAgICAgICAgICAgICAgIGxldCBnID0gZW5naW5lLmdldENvbXBvbmVudEdyb3VwKFRpbGVHcm91cClcbiAgICAgICAgICAgICAgICBlbmdpbmUuYWRkU3lzdGVtICggbmV3IHN5c3RlbXMuUHJveGltaXR5U2NhbGVyIChnKSApXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcblxuICAgICAgICB9XG5cblxufSAgICAgICAgICAgICIsIlxuLy8vIEZpYm9uYWNjaSBHZW5lcmF0b3IgLSBVTkZJTklTSEVEIGRvIG5vdCB1c2UgeWV0XG4vL1RPRE8gLSByaWdodCBub3cgeCBpcyBpbmNyZWFzaW5nIGJ5IHZlcnkgbGl0dGxlIGFtb3VudHMgYW5kIHogaXMgYWx3YXlzIDBcblxuXG5pbXBvcnQgKiBhcyB0aWxlVHlwZSBmcm9tIFwiLi4vdGlsZXMvaW5kZXhcIlxuaW1wb3J0IHsgR2VuZXJhdG9yIH0gZnJvbSBcIi4vZ2VuZXJhdG9yXCI7XG5pbXBvcnQgeyBEQ0xVdGlscyB9IGZyb20gXCIuLi8uLi91dGlscy9kY2xVdGlsc1wiXG5cbmNvbnN0IGZuID0gXCJGaWJvbmFjY2lHZW5lcmF0b3JcIlxuLy9sb2coZm4pXG5cbi8vIEdlbmVyYXRvciBTZXR0aW5nc1xubGV0IGdvbGRlblJhdGlvID0gKDEvMS42MTgwMzM5ODkpXG5sZXQgUyA9IHtcbiAgICBHOiBnb2xkZW5SYXRpbywgICAgICAgICAgICAgICAgIC8vIEdvbGRlbiBSYXRpb24gXG4gICAgR0E6IDM2MCAtIDM2MCpnb2xkZW5SYXRpbywgICAgICAvLyBHb2xkZXIgQW5nbGUgaW4gZGVncmVlcyAobmVlZHMgdG8gYmUgYXNzaWduZWQgbGF0ZXIgYXMgaXQgcmVxdWlyZXMgRykgICAgIFxuICAgIHJhZGl1czogMiwgICAgICAgICAgICAgICAgICAgICAgLy8gaW5pdGlhbCByYWRpdXMgaW4gbVxuICAgIHJncm93dGg6IDEuMDA1LCAgICAgICAgICAgICAgICAgLy8gZmFjdG9yIGJ5IHdoaWNoIHRoZSByYWRpdXMgd2lsbCBncm93IHdpdGggZWFjaCBpdGVyYXRpb25cbiAgICBtYXhUaWxlczogMzAgICAgICAgICAgICAgICAgICAgIC8vIE5yIG9mIGl0ZXJhdGlvbnMgPSBOciBvZiBUaWxlcyB0aGF0IHdpbGwgYmUgYXR0YWNoZWQgICAgICAgICAgICBcbn07XG5cblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgRmlib25hY2NpR2VuIGV4dGVuZHMgR2VuZXJhdG9yIHtcbiBcbiAgICBjb25zdHJ1Y3RvcihhcmdzOiBhbnkpIHtcbiAgICAgICAgc3VwZXIoYXJncyk7XG4gICAgICAgIHRoaXMubmFtZSA9IFwiRmlib25hY2NpR2VuXCI7XG4gICAgICAgIGxvZyhmbiArIFwiLmNvbnN0cnVjdG9yIFM6IFwiLCBTKSAvLyB2ZXJpZnlpbmcgSSBjYW4gcmVhZCB0aGUgc2V0dGluZ3NcbiAgICB9XG5cbiAgICBnZW5lcmF0ZUN1cnZlKHRpbGVPYmo6dGlsZVR5cGUuVGlsZSkge1xuICAgICAgICBsb2coZm4gKyBcIi5nZW5lcmF0ZUN1cnZlIHdpdGggdGlsZU9iajogXCIsIHRpbGVPYmopIFxuICAgICAgICBsZXQgcm90ID0gMDsgICAgLy8gdGhlIGFuZ2xlIHRoYXQgdGhlIHRpbGUgc2hvdWxkIGJlIG9mZnNldCBieS4gaXQgaXMgaW5jcmVhc2VkIGJ5IFMuR0EgZXZlcnkgaXRlcmF0aW9uXG4gICAgICAgIGxldCBjdXJOID0gUy5tYXhUaWxlc1xuICAgICAgICBsZXQgcmFkID0gUy5yYWRpdXNcbiAgICAgICAgbGV0IHgsIHksIHosIHBlcmNlbnRhZ2U7XG4gICAgICAgIGxldCB0OnRpbGVUeXBlLlRpbGU7XG4gICAgICAgIGxldCBncmFkaWVudFJZID0gdGhpcy5zZXR0aW5ncy5kY2xDb2xvcnMuZ3JhZGllbnRzLnJlZFRvWWVsbG93XG4gICAgICAgIGxldCBncmFkaWVudFJQID0gdGhpcy5zZXR0aW5ncy5kY2xDb2xvcnMuZ3JhZGllbnRzLnB1cnBsZVRvUmVkXG5cblxuICAgICAgICAvL2ZvciAobGV0IGkgPSBjdXJOOyBpID4gMCA7aS0tICkge1xuICAgICAgICB3aGlsZSAoY3VyTiA+IDApIHtcbiAgICAgICAgICAgIGN1ck4tLTtcblxuICAgICAgICAgICAgLy8gaW5jcmVhc2Ugcm90YXRpb24gbWFraW5nIHN1cmUgaXQncyBpbiB0aGUgMC0zNjAgYW5nbGVcbiAgICAgICAgICAgIHJvdCArPSBTLkdBXG4gICAgICAgICAgICByb3QgLT0gKHJvdC8zNjApKjM2MFxuICAgICAgICAgICAgLy9sb2coXCJcXG5cIiArIGN1ck4gKyBcIiAtIHJvdDogXCIgKyByb3QpO1xuXG4gICAgICAgICAgICAvL3NldCB0aGUgbmV3IHJhZGl1c1xuICAgICAgICAgICAgcmFkICo9IFMucmdyb3d0aFxuXG4gICAgICAgICAgICAvL2NhbGN1bGF0ZSB0aGUgbmV3IHggYW5kIHogcG9zaXRpb25zXG4gICAgICAgICAgICB4ID0gTWF0aC5jb3Mocm90Kk1hdGguUEkvMTgwKSpyYWRcbiAgICAgICAgICAgIHogPSBNYXRoLnNpbihyb3QqTWF0aC5QSS8xODApKnJhZFxuICAgICAgICAgICAgeSA9IDAuMSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9UT0RPIC0gZmlyc3QgZG8gZmxhdCBvbiB0aGUgZmxvb3IsIHRoZW4gdGFrZSBjYXJlIG9mIGVsZXZhdGlvbiBhbmQgdGlsZSByb3RhdGlvblxuICAgICAgICAgICAgbG9nKFwiXFxuXCIgKyBjdXJOICsgXCIgLSByb3Q6IFwiICsgcm90ICsgXCIgLSB4OiBcIiArIHggKyBcIiAtIHo6IFwiICsgeik7XG5cbiAgICAgICAgICAgIC8vIG5vdyB3ZSBhcmUgcmVhZHkgdG8gY3JlYXRlIHRoZSB0aWxlIGFuZCBwb3NpdGlvbiBpdFxuICAgICAgICAgICAgdCA9IG5ldyB0aWxlT2JqKCk7ICAgLy8gV29ya3MgZXZlbiBpZiBUeXBlc2NyaXB0IGNvbXBsYWlucyA6KSB5YXkhXG5cbiAgICAgICAgICAgIHQuZ2V0Q29tcG9uZW50KFRyYW5zZm9ybSkucG9zaXRpb24uc2V0KHgsIHksIHopXG5cbiAgICAgICAgICAgIC8vIGNvbG9yIGl0IGFzIGEgcGVyY2VudGFnZSBvZiB0aGUgZGlzdGFuY2UgZnJvbSB0aGUgZW5kIHNvIHRoYXQgeW91IGtub3cgd2hhdCB5b3UgYXJlIGxvb2tpbmcgYXRcbiAgICAgICAgICAgIHBlcmNlbnRhZ2UgPSAoY3VyTi9TLm1heFRpbGVzKTtcbiAgICAgICAgICAgIHQuZ2V0Q29tcG9uZW50KE1hdGVyaWFsKS5hbGJlZG9Db2xvciA9IENvbG9yMy5MZXJwKCBDb2xvcjMuRnJvbUhleFN0cmluZyhncmFkaWVudFJZWzBdKSwgQ29sb3IzLkZyb21IZXhTdHJpbmcoZ3JhZGllbnRSWVsxXSksIHBlcmNlbnRhZ2UpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBzZXQgdGhlIGRvbWUgYXMgcGFyZW50XG4gICAgICAgICAgICB0LnNldFBhcmVudCh0aGlzLmRvbWUpO1xuXG4gICAgICAgIH1cbiAgICAgICAgY29uc29sZS5sb2coXCJ0aGlzLmRvbWU6IFwiLCB0aGlzLmRvbWUpOyAvLyB0cmFjZSB0byBzZWUgaWYgaXQgaGFzIGFsbCB0aGUgY2hpbGRyZWRcblxuICAgIH0gICAgXG4gICAgXG59ICAgICIsIi8vIGluZGV4IHRoYXQgZXhwb3J0cyBhbGwgYXZhaWxhYmxlIGdlbmVyYXRvcnMgaW4gb25lIHNpbmdsZSBjb252ZW5pZW50IGZpbGUgaW1wb3J0XG4vLyBzeW50YXggcmVmIGh0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vcXVlc3Rpb25zLzQwNzAyODQyL2hvdy10by1pbXBvcnQtYWxsLW1vZHVsZXMtZnJvbS1hLWRpcmVjdG9yeS1pbi10eXBlc2NyaXB0XG5cbmNvbnN0IGZuID0gXCJnZW5lcmF0b3JJbmRleFwiXG4vL2xvZyhmbilcblxuLy8gZm9yIGRldiBwdXJwb3NlcyAtIG5vdCB2ZXJ5IHVzZWZ1bCBpbiB0aGUgZmluYWwgcHJvZHVjdFxuZXhwb3J0IHsgR2VuZXJhdG9yIH0gZnJvbSBcIi4vZ2VuZXJhdG9yXCI7XG5leHBvcnQgeyBkZWZhdWx0IGFzIFNpbmdsZUVudGl0eUdlbiB9IGZyb20gXCIuL3NpbmdsZUVudGl0eUdlblwiO1xuZXhwb3J0IHsgZGVmYXVsdCBhcyBEb3VibGVFbnRpdHlHZW4gfSBmcm9tIFwiLi9kb3VibGVFbnRpdHlHZW5cIjtcblxuLy8gdGhlIG1haW4gb25lIHRoYXQgaXMgY3VycmVudGx5IHdvcmtpZ24gdG8gZ2VuZXJhdGUgYSBkb21lXG5leHBvcnQgeyBkZWZhdWx0IGFzIENpcmNsZXMxR2VuIH0gICAgZnJvbSBcIi4vY2lyY2xlczFHZW5cIjsgXG5cbi8vIFVORklOSVNIRUQgLSBkbyBub3QgdXNlIHlldFxuZXhwb3J0IHsgZGVmYXVsdCBhcyBGaWJvbmFjY2lHZW4gfSAgICBmcm9tIFwiLi9maWJvbmFjY2lHZW5cIjsgXG4iLCJjb25zdCBmbiA9IFwiZmxhc2hEb21lXCJcbi8vbG9nKGZuICsgXCIgY2FsbGVkXCIpXG5cblxuaW1wb3J0IHsgZG9tZVNldHRpbmdzIH0gZnJvbSBcImRvbWVTZXR0aW5nc1wiO1xuLy9pbXBvcnQgeyBzaW5nbGVFbnRpdHlHZW4gLyosIHNpbXBsZUNpcmNsZUdlbiovIH0gZnJvbSBcIi4vZ2VuZXJhdG9ycy9cIlxuXG4vL2ltcG9ydCBcIi4vZ2VuZXJhdG9ycy9pbmRleFwiO1xuaW1wb3J0ICogYXMgZ2VuZXJhdG9ycyBmcm9tIFwiLi9nZW5lcmF0b3JzL2luZGV4XCI7ICAgICAgICAgICAvLyBpbXBvcnQgYWxsIGdlbmVyYXRvcnNcbmltcG9ydCAqIGFzIHRpbGVUeXBlcyBmcm9tIFwiLi90aWxlcy9pbmRleFwiOyAgICAgICAgICAgICAgICAgLy8gaW1wb3J0IGFsbCB0aWxlc1xuaW1wb3J0IHsgRENMVXRpbHMgfSBmcm9tIFwiLi4vdXRpbHMvZGNsVXRpbHNcIlxuXG4vL2ltcG9ydCB7IFRpbGUgfSBmcm9tIFwiLi90aWxlcy90aWxlXCI7XG4vL2ltcG9ydCB7IEdlbmVyYXRvckJhc2UgfSBmcm9tIFwiLi9nZW5lcmF0b3JzL2dlbmVyYXRvckJhc2VcIjsgLy8gZm9yIHR5cGluZyB0aGUgXG4gICAgXG4vL2xvZyhmbiArIFwiIGltcG9ydGVkIGdlbmVyYXRvcnM6IFwiLCBnZW5lcmF0b3JzKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8ge2RjbGFtZDogMn0gICB3aHk/XG5sb2coZm4gKyBcIiBpbXBvcnRlZCBnZW5lcmF0b3JzLmtleXM6IFwiLCBPYmplY3Qua2V5cyhnZW5lcmF0b3JzKSkgICAgICAgICAgICAgICAgIC8vW1wiR2VuZXJhdG9yXCIsIFwiU2luZ2xlRW50aXR5R2VuXCIsIFwiRG91YmxlRW50aXR5R2VuXCIsIFwiZGNsYW1kXCIsIFwiY29udGV4dFwiXVxuLy9sb2coZm4gKyBcIiBpbXBvcnRlZCBnZW5lcmF0b3JzLnNpbmdsZUVudGl0eUdlbjogXCIsIGdlbmVyYXRvcnMuU2luZ2xlRW50aXR5R2VuKSAvL3VuZGVmaW5lZCA+IHdoeT9cblxuLy9sb2coZm4gKyBcIiBpbXBvcnRlZCB0aWxlVHlwZXM6IFwiLCB0aWxlVHlwZXMpICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8ve2RjbGFtZDogMn0gICB3aHk/XG4vL2xvZyhmbiArIFwiIGltcG9ydGVkIHRpbGVUeXBlcy5kY2xhbWQ6IFwiLCB0aWxlVHlwZXMuZGNsYW1kKSAgICAgICAgICAgICAgICAgICAgICAgLy8gMiAgICAgICAgXG5sb2coZm4gKyBcIiBpbXBvcnRlZCB0aWxlVHlwZXMua2V5czogXCIsIE9iamVjdC5rZXlzKHRpbGVUeXBlcykpICAgICAgICAgICAgICAgICAgIC8vW1wiVGlsZVwiLCBcIkRvdFRpbGVcIiwgXCJQbGFuZVRpbGVcIiwgXCJkY2xhbWRcIiwgXCJjb250ZXh0XCJdXG4vL2xvZyhmbiArIFwiIGltcG9ydGVkIHRpbGVUeXBlcy5Eb3RUaWxlOiBcIiwgdGlsZVR5cGVzLkRvdFRpbGUpICAgICAgICAgICAgICAgICAgIC8vdW5kZWZpbmVkID4gd2h5P1xuXG5EQ0xVdGlscy50cmFjZUtleXMoKTsgICAvLyBkZXYgcHVycG9zZXMgLSBEQ0wgc2hvdyB3aGF0IHlvdSBnb3RcblxuXG4vLyBEb21lIGV4dGVuZHMgRW50aXR5IHNvIHRoYXQgaXQgY2FuIGhhdmUgaXTCtHMgb3duIGNoaWxkcmVuIFxuZXhwb3J0IGNsYXNzIEZsYXNoRG9tZSBleHRlbmRzIEVudGl0eSB7XG5cbiAgICBwdWJsaWMgc2V0dGluZ3MgPSBkb21lU2V0dGluZ3M7ICAgICAgICAgICAgIC8vIG5vIG5lZWQgdG8gZ28gdGhyb3VnaCB0aGUgY29uc3RydWN0b3JcbiAgICBwdWJsaWMgcGFyY2VsQ2VudGVyOlZlY3RvcjM7ICAgICAgICAgICAgICAgIC8vID0gdGhpcy5nZXRDZW50ZXIoKTtcbiAgICBwdWJsaWMgZ2VuZXJhdG9yOmdlbmVyYXRvcnMuR2VuZXJhdG9yOyAgICAgIC8vIGhvbGRzIHRoZSBzZWxlY3RlZCBnZW5lcmF0b3IgLSBzZXQgaXQgaW4gdGhlIGRvbWVTZXR0aW5nc1xuICAgIHB1YmxpYyB0aWxlT2JqOnRpbGVUeXBlcy5UaWxlOyAgICAgICAgICAgICAgICAgLy9cblxuICAgIC8vcHVibGljIGV2ZW50TWFuYWdlciA9IG5ldyBFdmVudE1hbmFnZXIoKSAgICAvLyB0byBzaWduYWwgaXTCtHMgc3RhdGUgY2hhbmdlc1xuICAgIC8vcHVibGljIHRpbGVHcm91cDtcbiAgICBcbiAgICBjb25zdHJ1Y3Rvcigpe1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICBsb2coZm4gKyBcIi5jb25zdHJ1Y3RvciBjYWxsZWQgdGhpcy5zZXR0aW5nczogXCIsIHRoaXMuc2V0dGluZ3MpO1xuICAgICAgICBsb2coZm4gKyBcIi5jb25zdHJ1Y3RvciBjaG9zZW4gR2VuZXJhdG9yOiBcIiwgdGhpcy5zZXR0aW5ncy5nZW5lcmF0b3IpO1xuICAgICAgICBsb2coZm4gKyBcIi5jb25zdHJ1Y3RvciBjaG9zZW4gVGlsZTogXCIsIHRoaXMuc2V0dGluZ3MudGlsZSk7XG4gICAgICAgIFxuICAgICAgICAvL2xvZyhmbiArIFwiLmNvbnN0cnVjdG9yIGVuZ2luZTogXCIsIE9iamVjdC5rZXlzKGVuZ2luZSkpOyAgLy8gaXMgZW5naW5lIGdsb2JhbD8geWVzIFtcImV2ZW50TWFuYWdlclwiLCBcInN5c3RlbXNcIiwgXCJlbnRpdHlMaXN0c1wiLCBcImFkZGVkU3lzdGVtc1wiLCBcIl9lbnRpdGllc1wiLCBcIl9kaXNwb3NhYmxlQ29tcG9uZW50c1wiLCBcIl9jb21wb25lbnRHcm91cHNcIiwgXCJzaW1wbGVTeXN0ZW1zXCIsIFwicm9vdEVudGl0eVwiXVxuICAgICAgICAvL3RoaXMucGFyY2VsQ2VudGVyID0gdGhpcy5nZXRQYXJjZWxDZW50ZXIoKVxuICAgICAgICBsZXQgcCA9IHRoaXMuc2V0dGluZ3MucGFyY2VsXG4gICAgICAgIHRoaXMucGFyY2VsQ2VudGVyID0gRENMVXRpbHMuZ2V0UGFyY2VsQ2VudGVyKCBwLncsIHAuaCApO1xuICAgICAgICBsb2coZm4gKyBcIi5jb25zdHJ1Y3RvciBjYWxsZWQgdGhpcy5jZW50ZXI6IFwiLCB0aGlzLnBhcmNlbENlbnRlcik7XG5cbiAgICAgICAgLy8gcG9zaXRpb24gaXQgYXQgdGhlIGNlbnRlciBvZiB0aGUgcGFyY2VsLCBzbyBldmVyeSBjaGlsZCB3aWxsIGJlIGFscmVhZHkgb3JpZW50ZWQgdG8gdGhlIGNlbnRlclxuICAgICAgICB0aGlzLmdldENvbXBvbmVudE9yQ3JlYXRlKFRyYW5zZm9ybSkucG9zaXRpb24gPSB0aGlzLnBhcmNlbENlbnRlclxuXG4gICAgICAgIGVuZ2luZS5hZGRFbnRpdHkodGhpcyk7IC8vIGFkZCB0aGUgZG9tZSBhcyBhbiBlbnRpdHlcblxuICAgICAgICB0aGlzLnNldHRpbmdzLmRvbWUgPSB0aGlzXG4gICAgICAgIFxuICAgICAgICB0aGlzLmdlbmVyYXRlRG9tZSgpO1xuICAgIH1cblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLyAgQ1JFQVRFIFRIRSBET01FXG5cbiAgICBwcml2YXRlIGdlbmVyYXRlRG9tZSgpe1xuICAgICAgICBsb2coZm4gKyBcIi5nZW5lcmF0ZURvbWVcIik7XG5cbiAgICAgICAgLy8gMSAtIGNob29zZSBkb21lIHNoYXBlIGdlbmVyYXRvciAoc3dhcHBhYmxlKSBlZzogc2luZ2xlLCBzaW1wbGUgY2lyY2xlcyBmaWJvbmFjY2kgZXRjXG4gICAgICAgIC8vIGdldCB0aGUgc2VsZWN0ZWQgZ2VuZXJhdG9yIGZyb20gdGhlIHNldHRpbmdzID4gYXNzaWducyBpdCB0byB0aGlzLmdlbmVyYXRvclxuICAgICAgICB0aGlzLnNldEdlbmVyYXRvckZyb21TZXR0aW5ncygpOyAgXG4gICAgICAgIC8vbG9nKGZuICsgXCIuZ2VuZXJhdGVEb21lIHRoaXMuZ2VuZXJhdG9yOiBcIiwgdGhpcy5nZW5lcmF0b3IpO1xuICAgICAgICBsb2coZm4gKyBcIi5nZW5lcmF0ZURvbWUgQ2hvc2VuIEdlbmVyYXRvcjogXCIsIHRoaXMuZ2VuZXJhdG9yLm5hbWUpO1xuXG5cbiAgICAgICAgLy8gMiAtIGNob29zZSB0aWxlIHNoYXBlIC0gZWcgZG90IChmbGF0IGNpbGluZGVyLCBjdWJlLCBjb25lKSBldGNcbiAgICAgICAgdGhpcy50aWxlT2JqID0gdGhpcy5zZXRUaWxlVHlwZSgpO1xuICAgICAgICAvL2xvZyhmbiArIFwiLmdlbmVyYXRlRG9tZTEgLSBsb2cgLSB0aGlzLnRpbGVPYmo6IFwiLCB0aGlzLnRpbGVPYmopOyAgICAgICAgICAgICAgICAgICAgLy8gaXQgYXBwZWFycyB1bmRlZmluZWQgaW4gdGhlIGxvZyBhbHRob3VnaCBpdCBpcyBub3QgaW4gdGhlIGNvbnNvbGVcbiAgICAgICAgLy9jb25zb2xlLmxvZyhmbiArIFwiLmdlbmVyYXRlRG9tZTIgLSBjb25zb2xlLmxvZyAtIHRoaXMudGlsZU9iajogXCIsIHRoaXMudGlsZU9iaikgICAvLyBzaG93cyBhcyBhIHN0cmluZyB0aGUgY29kZSBpbiB0aGUgZnVuY3Rpb24gY29uc3RydWN0b3JcbiAgICAgICAgLy9jb25zb2xlLmRpcihmbiArIFwiLmdlbmVyYXRlRG9tZTMgLSBjb25zb2xlLmRpciAtIHRoaXMudGlsZU9iajogXCIsIHRoaXMudGlsZU9iaikgICAvLyBlbXB0eVxuICAgICAgICAvL3ZhciB0MSA9IG5ldyB0aGlzLnRpbGVPYmooKTsgLy8gV29ya3MgZXZlbiBpZiBUeXBlc2NyaXB0IGNvbXBsYWlucyA6KSB5YXkhXG5cblxuICAgICAgICAvLyAzIC0gZ2VuZXJhdGUgdGhlIGRvbWUgd2l0aCB0aGUgZ2l2ZW4gdHlsZSBcbiAgICAgICAgdGhpcy5nZW5lcmF0b3IuZ2VuZXJhdGVDdXJ2ZSh0aGlzLnRpbGVPYmopO1xuXG4gICAgICAgIC8vIFRPRE8gNCAtIGdldCByZXR1cm5lZCB0aGF0IGl0J3MgZG9uZSwgbGlzdGVuIHRvIGFuIGV2ZW50P1xuICAgICAgICAvLyBUT0RPIDUgLSBhdHRhY2ggYWxsIHN5c3RlbXMgYW5kIGFuaW1hdGlvbnNcblxuICAgIH1cblxuLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vICBVVElUTElUSUVTXG5cbiAgICAvKlRPRE8gcHV0IHRoaXMgaW4gYSBnZW5lcmljIERDTCB1dGlscywgb3RoZXIgb2JqZWN0cyB3aWxsIG5lZWQgdG8ga25vdyB0aGVpciBjZW50ZXJcbiAgICBwdWJsaWMgZ2V0UGFyY2VsQ2VudGVyKCl7XG4gICAgICAgIC8vbG9nKGZuICsgXCIuZ2V0UGFyY2VsQ2VudGVyIC0gdGhpcy5wYXJjZWxDZW50ZXIxOiBcIiwgdGhpcy5wYXJjZWxDZW50ZXIpO1xuICAgICAgICBpZiAoIXRoaXMucGFyY2VsQ2VudGVyKSB7XG4gICAgICAgICAgICAvL2xvZyhmbiArIFwiLmdldFBhcmNlbENlbnRlciAtIGdlbmVyYXRpbmcgUGFyY2VsQ2VudGVyOiBcIiwgdGhpcy5wYXJjZWxDZW50ZXIpO1xuICAgICAgICAgICAgY29uc3QgcGFyY2VsU2l6ZSA9IDE2ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vbWV0ZXJzIHBlciBwYXJjZWxcbiAgICAgICAgICAgIGNvbnN0IGN4ID0gKHRoaXMuc2V0dGluZ3MucGFyY2VsLncvMikgKiBwYXJjZWxTaXplO1xuICAgICAgICAgICAgY29uc3QgY3ogPSAodGhpcy5zZXR0aW5ncy5wYXJjZWwuaC8yKSAqIHBhcmNlbFNpemU7XG4gICAgICAgICAgICB0aGlzLnBhcmNlbENlbnRlciA9IG5ldyBWZWN0b3IzKGN4LDAsY3opICAgICAgICAgICAgLy88VmVjdG9yMz57eDogY3gsIHk6MCwgejogY3p9XG4gICAgICAgIH1cbiAgICAgICAgbG9nKGZuICsgXCIuZ2V0UGFyY2VsQ2VudGVyIC0gdGhpcy5wYXJjZWxDZW50ZXIyOiBcIiwgdGhpcy5wYXJjZWxDZW50ZXIpO1xuICAgICAgICByZXR1cm4gdGhpcy5wYXJjZWxDZW50ZXI7XG4gICAgfVxuICAgIC8vKi9cblxuXG4gICAgLy8gc2V0cyB0aGUgdGlsZSB0eXBlIGVpdGhlciBmcm9tIHRoZSBzZXR0aW5ncyBvciBieSBwYXNzaW5nIGl0IGFzIGEgdmFyaWFibGVcbiAgICBwcml2YXRlIHNldFRpbGVUeXBlKCl7XG4gICAgICAgIGNvbnN0IHRpbGVUeXBlc1NldHRpbmcgPSB0aGlzLnNldHRpbmdzLnRpbGVUeXBlc1xuICAgICAgICBzd2l0Y2ggKHRoaXMuc2V0dGluZ3MudGlsZSkge1xuICAgICAgICAgICAgY2FzZSB0aWxlVHlwZXNTZXR0aW5nLkRPVDpcbiAgICAgICAgICAgICAgICB0aGlzLnRpbGVPYmogPSB0aWxlVHlwZXMuRG90VGlsZSAgLy8gcGFzcyBvbmx5IHRoZSBvYmplY3Qgbm90IHRoZSBpbnN0YW5jZSBvZiBhIG5ldyBEb3RUaWxlXG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIHRpbGVUeXBlc1NldHRpbmcuUExBTkU6XG4gICAgICAgICAgICAgICAgdGhpcy50aWxlT2JqID0gdGlsZVR5cGVzLlBsYW5lVGlsZVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICB0aGlzLnRpbGVPYmogPSB0aWxlVHlwZXMuRG90VGlsZSBcbiAgICAgICAgfVxuICAgICAgICBsb2coZm4gKyBcIi5zZXRUaWxlVHlwZSB0aGlzLnRpbGVPYmo6IFwiLCB0aGlzLnRpbGVPYmopOyBcbiAgICAgICAgcmV0dXJuIHRoaXMudGlsZU9ialxuICAgIH1cblxuXG4gICAgLy8gaGVscHMgcmV0cmlldmUgdGhlIGdlbmVyYXRvciBmcm9tIHRoZSBzZXR0aW5ncyBvYmplY3QgKDEsMiwzLDQpXG4gICAgLy8gYmV0dGVyIHRvIGdldCBpdCBmcm9tIHRoZSBzZXR0aW5ncyBzbyB0aGF0IGlmIHlvdSBjaGFuZ2UgdGhlbSB5b3UgY2FuIHJlbGF1bmNoIHRoZSBkb21lIGFub3RoZXIgdGltZVxuICAgIHByaXZhdGUgc2V0R2VuZXJhdG9yRnJvbVNldHRpbmdzKCkge1xuICAgICAgICBjb25zdCBnZW5UeXBlcyA9IHRoaXMuc2V0dGluZ3MuZ2VuZXJhdG9yVHlwZXNcblxuICAgICAgICAvLyBhbGwgcGFyYW1ldGVycyB0byBwYXNzIHRvIHRoZSBnZW5lcmF0b3JzXG4gICAgICAgIGxldCBhcmdzID0geyBzZXR0aW5nczogdGhpcy5zZXR0aW5ncywgZG9tZTogdGhpc31cblxuICAgICAgICBzd2l0Y2ggKHRoaXMuc2V0dGluZ3MuZ2VuZXJhdG9yKSB7XG4gICAgICAgICAgICBjYXNlIGdlblR5cGVzLlNJTkdMRTpcbiAgICAgICAgICAgICAgICB0aGlzLmdlbmVyYXRvciA9IG5ldyBnZW5lcmF0b3JzLlNpbmdsZUVudGl0eUdlbihhcmdzKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgZ2VuVHlwZXMuRE9VQkxFOlxuICAgICAgICAgICAgICAgIHRoaXMuZ2VuZXJhdG9yID0gbmV3IGdlbmVyYXRvcnMuRG91YmxlRW50aXR5R2VuKGFyZ3MpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBnZW5UeXBlcy5GSUJPTkFDQ0k6XG4gICAgICAgICAgICAgICAgdGhpcy5nZW5lcmF0b3IgPSBuZXcgZ2VuZXJhdG9ycy5GaWJvbmFjY2lHZW4oYXJncyk7XG4gICAgICAgICAgICAgICAgYnJlYWs7ICAgXG4gICAgICAgICAgICBjYXNlIGdlblR5cGVzLkNJUkNMRTpcbiAgICAgICAgICAgICAgICB0aGlzLmdlbmVyYXRvciA9IG5ldyBnZW5lcmF0b3JzLkNpcmNsZXMxR2VuKGFyZ3MpO1xuICAgICAgICAgICAgICAgIGJyZWFrOyBcbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgdGhpcy5nZW5lcmF0b3IgPSBuZXcgZ2VuZXJhdG9ycy5TaW5nbGVFbnRpdHlHZW4oYXJncyk7XG4gICAgICAgIH1cbiAgICAgICAgLy9sb2coZm4gKyBcIi5zZXRHZW5lcmF0b3JGcm9tU2V0dGluZ3MgZ2VuZXJhdG9yczogXCIsIGdlbmVyYXRvcnMpOyAvLyB1c2VsZXNzIGhvbGRzIG9ubHkgdGhpcyBvYmplY3QgICB7ZGNsYW1kOiAyfVxuICAgICAgICAvL2xvZyhmbiArIFwiLnNldEdlbmVyYXRvckZyb21TZXR0aW5ncyB0aGlzLmdlbmVyYXRvcjogXCIsIHRoaXMuZ2VuZXJhdG9yKTsgXG4gICAgICAgIC8vbG9nKGZuICsgXCIuc2V0R2VuZXJhdG9yRnJvbVNldHRpbmdzIC0gdGhpcy5nZW5lcmF0b3Iuc2V0dGluZ3M6IFwiLCB0aGlzLmdlbmVyYXRvci5zZXR0aW5ncyk7IFxuICAgICAgICAvL2xvZyhmbiArIFwiLnNldEdlbmVyYXRvckZyb21TZXR0aW5ncyAtIHRoaXMuZ2VuZXJhdG9yLmdldE5hbWUoKTogXCIsIHRoaXMuZ2VuZXJhdG9yLmdldE5hbWUoKSk7XG4gICAgfVxuXG5cblxufSIsIi8vY29uc29sZS5jbGVhcigpXG5sZXQgZm5hbWUgPSBcImdhbWUudHNcIlxubG9nKFwiXFxuLS0tLSBnYW1lLnRzXCIpO1xuXG5cblxuLy8gQ1JFQVRFIFRIRSBET01FIEVudGl0eVxuaW1wb3J0IHsgRmxhc2hEb21lIH0gZnJvbSBcImNvbXBvbmVudHMvZmxhc2hkb21lL2RvbWVcIjtcbmNvbnN0IGRvbWU6Rmxhc2hEb21lID0gbmV3IEZsYXNoRG9tZSgpO1xubG9nKGZuYW1lICsgXCIgZmxhc2hEb21lIGltcG9ydGVkIDogXCIsIGRvbWUpO1xuXG5cblxuXG4iLCIvKipcbiAqIFRlbXBsYXRlIG9mIHRoZSBiYXNpYyB0aGluZ3MgeW91IG5lZWQgdG8gdXNlIGZvciBjcmVhdGluZyBhIGdlbmVyYXRvciBcbiAqIFxuICogLSBkdXBsaWNhdGUgdGhpcyBmaWxlLCBcbiAqIC0gY2hhbmdlIHRoZSBmbiBzdHJpbmcgYW5kIGNsYXNzIG5hbWVcbiAqIC0gY3JlYXRlIHRoZSBjb2RlIHlvdSB3YW50IGluc2lkZSBvZiBnZW5lcmF0ZUN1cnZlXG4gKiBcbiAqIC0gYWRkIHRvIC9zcmMvZmxhc2hkb21lL2dlbmVyYXRvcnMvaW5kZXgudHMgdGhpc1xuICogZXhwb3J0IHsgZGVmYXVsdCBhcyBUZW1wbGF0ZUdlbiB9ICAgIGZyb20gXCIuL2dlbmVyYXRvcl90ZW1wbGF0ZVwiOyAgLy8gY2hhbmdlIGFwcHJvcHJpYXRlIGNsYXNzIG5hbWUgYW5kIGZpbGVcbiAqIFxuICogLSBpbiAvc3JjL2ZsYXNoZG9tZS9kb21lU2V0dGluZ3MudHMgYWRkIGl0IHRvIHRoZSBnZW5lcmF0b3JUeXBlcyBlbnVtXG4gKiBnZW5lcmF0b3JUeXBlcyB7ICBURU1QTEFURSA9IFwiVGVtcGxhdGVcIiAgfSAgLy9jaGFuZ2Ugd2l0aCBhcHByb3ByaWF0ZSBuYW1lXG4gKiBcbiAqIC0gcmVtZW1iZXIgdG8gYWN0aXZhdGUgaXQgaW4gXG4gKiBkb21lU2V0dGluZ3MuZ2VuZXJhdG9yOiAgZ2VuZXJhdG9yVHlwZXMuVEVNUExBVEUsXG4gKiBcbiAqIC0gaW4gL3NyYy9mbGFzaGRvbWUvZG9tZS50cyBzZXRHZW5lcmF0b3JGcm9tU2V0dGluZ3MoKSBhZGQgYSBjYXNlIGZvciB0aGlzIGdlbmVyYXRvclxuICogY2FzZSBnZW5UeXBlcy5URU1QTEFURTpcbiAqICAgICAgdGhpcy5nZW5lcmF0b3IgPSBuZXcgZ2VuZXJhdG9ycy5UZW1wbGF0ZUdlbihhcmdzKTsgICAgICAvL2NoYW5nZSB3aXRoIGFwcHJvcHJpYXRlIG5hbWVzXG4gKiAgICAgIGJyZWFrOyBcbiAqL1xuXG5cbmltcG9ydCAqIGFzIHRpbGVUeXBlIGZyb20gXCIuLi90aWxlcy9pbmRleFwiXG5pbXBvcnQgeyBHZW5lcmF0b3IgfSBmcm9tIFwiLi9nZW5lcmF0b3JcIjtcbmltcG9ydCB7IERDTFV0aWxzIH0gZnJvbSBcIi4uLy4uL3V0aWxzL2RjbFV0aWxzXCJcblxuY29uc3QgZm4gPSBcIlRlbXBsYXRlR2VuXCIgLy9cIkNpcmNsZXMxR2VuXCJcbi8vbG9nKGZuKVxuXG4vLyBHZW5lcmF0b3IgU2V0dGluZ3MgYXMgYSBzaW1wbGUgZWRpdGFibGUgb2JqZWN0XG5sZXQgUyA9IHtcbiAgICByYWRpdXM6IDIsICAgICAgICAgICAgICAgICAgICAgIC8vIGluaXRpYWwgcmFkaXVzIGluIG0gXG4gICAgbWF4VGlsZXM6IDMwICAgICAgICAgICAgICAgICAgICAvLyBOciBvZiBpdGVyYXRpb25zID0gTnIgb2YgVGlsZXMgdGhhdCB3aWxsIGJlIGF0dGFjaGVkICAgICAgICAgICAgXG59O1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBUZW1wbGF0ZUdlbiBleHRlbmRzIEdlbmVyYXRvciB7XG4gICAgICAgIFxuICAgICAgICBjb25zdHJ1Y3RvcihhcmdzOiBhbnkpe1xuICAgICAgICAgICAgc3VwZXIoYXJncyk7XG4gICAgICAgICAgICB0aGlzLm5hbWUgPSBmbjtcbiAgICAgICAgICAgIGxvZyhmbiArIFwiLmNvbnN0cnVjdG9yXCIpXG4gICAgICAgIH1cblxuICAgICAgICBnZW5lcmF0ZUN1cnZlKHRpbGVPYmo6dGlsZVR5cGUuVGlsZSkge1xuICAgICAgICAgICAgdGhpcy50aWxlVHlwZSA9IHRpbGVPYmo7XG4gICAgICAgICAgICBsb2coZm4gKyBcIi5nZW5lcmF0ZUN1cnZlIHdpdGggdGlsZU9iajogXCIsIHRpbGVPYmopXG5cbiAgICAgICAgICAgIC8vIHBhcnNlIHRoZSBnbG9iYWwgc2V0dGluZ3MgdG8gc2VlIGlmIGl0IGhhcyB2YXJpYWJsZXNcbiAgICAgICAgICAgIC8vbGV0IHJhZGl1cyA9IHRoaXMuc2V0dGluZ3MucmFkaXVzIHx8IFMucmFkaXVzICAvLyBwcmVjZWRlbmNlIHRvIHRoZSBnbG9iYWwgc2V0dGluZ3NcbiAgICAgICAgICAgIGxldCByYWRpdXMgPSBTLnJhZGl1cyB8fCB0aGlzLnNldHRpbmdzLnJhZGl1cyAgLy8gcHJlZGVjZW5jZSB0byBsb2NhbCBzZXR0aW5nc1xuXG4gICAgICAgICAgICAvLyBpbnN0YW50aWF0ZSB0aGUgdGlsZVxuICAgICAgICAgICAgbGV0IHQgPSBuZXcgdGlsZU9iaigpO1xuXG4gICAgICAgICAgICAvLyBzZXQgaXQgdG8gYSBjaGlsZCBvZiB0aGUgZG9tZVxuICAgICAgICAgICAgdC5zZXRQYXJlbnQodGhpcy5kb21lKVxuICAgICAgICB9XG59ICAgICAgICAgICAgIl19');